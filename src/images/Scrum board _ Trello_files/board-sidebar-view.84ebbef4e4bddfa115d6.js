/*! For license information please see board-sidebar-view.84ebbef4e4bddfa115d6.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"./app/scripts/data/latest-power-ups-message.js":function(e,t,i){const s=i("./node_modules/underscore/underscore.js"),{newPowerUps:r}=i("./app/scripts/data/new-power-ups.js"),n=s.chain(r).values().max().value();e.exports.latestPowerUpsMessage=n>Date.now()?"NewPowerUps_".concat(n.toISOString().substr(0,10)):void 0},"./app/scripts/data/new-power-ups.js":function(e,t,i){const s=i("./node_modules/underscore/underscore.js");e.exports.newPowerUps=s.chain({"55a5d917446f51777421000d":"2016-08-07","56d5e249a98895a9797bebb9":"2016-08-23","570262ea1100fa611d7e200a":"2016-08-23","56cdf5f7071f133a93eb2363":"2016-08-23","57b47fb862d25a30298459b1":"2016-08-23"}).pairs().map((function(...e){const[t,i]=Array.from(e[0]);return[t,new Date(Date.parse(i))]})).object().value()},"./app/scripts/lib/util/selection/has-selection-in.js":function(e,t){e.exports.hasSelectionIn=function(e){const t=window.getSelection(),i=t.toString(),s=t.anchorNode;return!!i&&!!e.find(s).length}},"./app/scripts/views/archive/archive-view.js":function(e,t,i){const s=i("./app/scripts/views/archive/archived-cards-view.js"),r=i("./app/scripts/views/archive/archived-lists-view.js"),n=i("./app/scripts/lib/util/index.js"),o=i("./app/scripts/views/internal/view.js"),{l:a}=i("./app/scripts/lib/localize.js"),l=i("./node_modules/react/index.js"),{renderComponent:d}=i("./app/src/components/ComponentWrapper/index.ts"),{BoardArchive:c}=i("./app/scripts/views/templates/BoardArchive.js");class p extends o{static initClass(){this.prototype.viewTitleKey="archive",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"}}initialize(){return this.searchText=this.slot(""),this.cardsView=this.subview(s,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(r,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)}searchChanged(){return this.searchText.set(this.$searchInput.val().trim())}didClickSwitchSections(e){var t,i,s;return this.activeSubview.set((t=this.activeSubview.get(),i=this.cardsView,s=this.listsView,t===i?s:i)),this.$searchInput.focus(),n.stop(e)}injectSubview(e){return this.$(".js-archive-content").append(e.el),e.didBecomeActive()}remove(){return this.unmountBoardArchive&&this.unmountBoardArchive(),super.remove(...arguments)}renderOnce(){return this.unmountBoardArchive||(this.unmountBoardArchive=d(l.createElement(c,null),this.$el[0])),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:e=>e.$el.detach()}),this.watch("activeSubview",(e=>{const t=e===this.cardsView?"switch to archived lists":"switch to archived cards";return this.$(".js-switch-section").text(a(t))})),this.watch("activeSubview.isLoading",(e=>(this.$(".js-loading-spinner").toggleClass("hide",!e),this.$(".js-archive-content").toggleClass("hide",e)))),this}}p.initClass(),e.exports=p},"./app/scripts/views/archive/archived-card-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),{Analytics:r}=i("./packages/atlassian-analytics/index.ts"),n=i("./app/scripts/views/card/card-view.js"),{maybeDisplayLimitsErrorOnCardOpen:o}=i("./app/scripts/views/card/card-limits-error.js"),a=i("./app/scripts/views/lib/confirm.js"),{Controller:l}=i("./app/scripts/controller/index.js"),d=i("./app/scripts/views/lib/dialog.js"),{featureFlagClient:c}=i("./packages/feature-flag-client/index.ts"),p=i("./app/scripts/lib/util/index.js"),u=i("./app/scripts/views/internal/view.js"),m=i("./node_modules/react/index.js"),{renderComponent:h}=i("./app/src/components/ComponentWrapper/index.ts"),{ArchivedCardOptions:g}=i("./app/scripts/views/templates/ArchivedCardOptions.js");class b extends u{static initClass(){this.prototype.tagName="div",this.prototype.className="archived-list-card",this.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},this.prototype.vigor=this.VIGOR.NONE}initialize(){return null==this.$reactRoot&&(this.$reactRoot=s("<div></div>")),this.linkCardsEnabled=c.get("wildcard.link-cards",!1),this.sendGASEvent=c.get("dataeng.gasv3-event-tracking",!1)}render(){const e=this.subview(n,this.model,{dontFilter:!0,quickEditHidden:!0});e.render(),this.$el.append(e.el);const t={editable:this.model.editable(),canDelete:this.options.canDelete,canReopen:null!=this.model.getList(),reOpenText:this.options.reOpenText};return this.$el.append(this.$reactRoot),this.unmountArchivedCardOptions||(this.unmountArchivedCardOptions=h(m.createElement(g,t),this.$reactRoot[0])),super.render()}remove(){return this.unmountArchivedCardOptions&&(this.unmountArchivedCardOptions(),this.unmountArchivedCardOptions=null),super.remove(...arguments)}openCard(e){this.model.get("cardRole")||(p.stop(e),l.showCardDetail(this.model),d.calcPos())}deleteModel(e){var t,i;p.stop(e),a.toggle("delete card",{elem:(t=s(e.target).closest(".js-delete"),i=e=>e[0],null!=t?i(t):void 0),model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:()=>(this.model.destroy(),this.unmountArchivedCardOptions&&this.unmountArchivedCardOptions(),r.sendTrackEvent({action:"deleted",actionSubject:"card",source:"archiveScreen",containers:{card:{id:this.model.id},list:{id:this.model.getList().id},board:{id:this.model.getBoard().id}}}))})}reopen(e){p.preventDefault(e);const t={$elem:s(e.target),hasAttachments:this.model.attachmentList.length>0,destinationBoard:this.model.getBoard(),destinationList:this.model.getList()};if(o(t))return;const i=r.startTask({taskName:"edit-card/closed",source:"archiveScreen"});return this.model.update({closed:!1,traceId:i},((e,t)=>{if(e)throw r.taskFailed({taskName:"edit-card/closed",traceId:i,source:"archiveScreen",error:e});return r.sendUpdatedCardFieldEvent({field:"closed",source:"archiveScreen",containers:{card:{id:t.id},board:{id:t.idBoard},list:{id:t.idList}},attributes:{taskId:i}}),r.taskSucceeded({taskName:"edit-card/closed",traceId:i,source:"archiveScreen"}),this.unmountArchivedCardOptions&&(this.unmountArchivedCardOptions(),this.unmountArchivedCardOptions=null),r.sendTrackEvent({action:"reopened",actionSubject:"card",source:"archiveScreen",containers:{card:{id:this.model.id},list:{id:this.model.getList().id},board:{id:this.model.getBoard().id}}})})),!1}}b.initClass(),e.exports=b},"./app/scripts/views/archive/archived-cards-view.js":function(e,t,i){const{Analytics:s}=i("./packages/atlassian-analytics/index.ts"),r=i("./app/scripts/views/archive/archived-card-view.js"),n=i("./app/scripts/views/archive/search-help-view.js"),{Dates:o}=i("./app/scripts/lib/dates.js"),{featureFlagClient:a}=i("./packages/feature-flag-client/index.ts"),{ModelLoader:l}=i("./app/scripts/db/model-loader.js"),d=i("./app/scripts/views/internal/view.js"),c=i("./node_modules/underscore/underscore.js"),{l:p}=i("./app/scripts/lib/localize.js"),u=i("./node_modules/effing/lib/index.js"),m=i("./app/scripts/views/lib/pop-over.js"),h=i("./app/scripts/lib/util/index.js"),g=i("./node_modules/react/index.js"),{renderComponent:b}=i("./app/src/components/ComponentWrapper/index.ts"),{ArchivedCards:v}=i("./app/scripts/views/templates/ArchivedCards.js");let f=void 0,w=void 0;class k extends d{static initClass(){this.prototype.CARDS_PER_PAGE=30,this.prototype.SEARCH_LIMIT=50,f={},w=function(e){let t=f;return{lease(){const i=function(){t!==f&&i!==t||e.apply(this,arguments)};return t=i,i}}},this.prototype.events={"click .js-more-cards":"getMoreCards","click .js-show-search-tips":"showSearchTips"},this.prototype.vigor=this.VIGOR.SOME}initialize({searchText:e}){this.searchText=e,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.tooManySearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map((e=>e.length>0)).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.sendGASEvent=a.get("dataeng.gasv3-event-tracking",!1),this.updateSearchCallback=w((e=>{const t=e.map((e=>this.modelCache.get("Card",e.id)));return this.tooManySearchResults.set(t.length===this.SEARCH_LIMIT),this.searchResults.set(t),this.isLoadingSearchResults.set(!1)}));const t=e=>(this.sortedContiguousCards.set(c.without(this.sortedContiguousCards.get(),e)),this.searchResults.set(c.without(this.searchResults.get(),e)));return this.listenTo(this.modelCache,{"remove:Card":t,"change:Card:closed":e=>{e.get("idBoard")===this.model.id&&(e.get("closed")?this.sortedContiguousCards.set([e,...Array.from(this.sortedContiguousCards.get())]):t(e))}}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))}didBecomeActive(){if(this.hasBeenActiveBefore)return;this.hasBeenActiveBefore=!0;const e={limit:this.CARDS_PER_PAGE};return this.isLoadingInitialCards.set(!0),l.loadClosedCards(this.model.id,e).tap(u(this,"didLoadContiguousCards")).finally((()=>this.isLoadingInitialCards.set(!1))).done()}didLoadContiguousCards(e){this.hasMoreCards.set(e.length===this.CARDS_PER_PAGE);const t=c.sortBy(e,(e=>-this.cardSortRank(e))),i=[...Array.from(this.sortedContiguousCards.get()),...Array.from(t)];return this.sortedContiguousCards.set(c.uniq(i))}cardSortRank(e){let t;return null!=(i=o.parse(e.get("dateLastActivity")),s="getTime",r=e=>e.getTime(),t=null!=i&&"function"==typeof i[s]?r(i,s):void 0)?t:null;var i,s,r}getMoreCards(){const e=c.last(this.sortedContiguousCards.get()),t={limit:this.CARDS_PER_PAGE,before:null!=e?this.cardSortRank(e):null};return this.isLoadingMoreCards.set(!0),l.loadClosedCards(this.model.id,t).tap(u(this,"didLoadContiguousCards")).finally((()=>this.isLoadingMoreCards.set(!1))).done()}removeSubviews(e){return this.unmountArchivedCards&&this.unmountArchivedCards(),super.removeSubviews(e)}remove(){return this.unmountArchivedCards&&this.unmountArchivedCards(),super.remove(...arguments)}renderOnce(){this.unmountArchivedCards&&this.unmountArchivedCards(),this.unmountArchivedCards=b(g.createElement(v,null),this.$el[0]),this.watch("isLoadingMoreCards",(function(e){return this.$(".js-more-cards").attr("disabled",e)}));const e=this.hasMoreCards.and(this.isSearching.not());this.subscribe(e,(function(e){return this.$(".js-more-cards").toggleClass("hide",!e)})),this.$(".js-search-message").html(p("too many results",{limit:"<strong>".concat(this.SEARCH_LIMIT.toString(),"+</strong>"),learnMoreLink:'<a class="js-show-search-tips" href="#">'.concat(p("learn more"),"</a>")},{raw:!0}));const t=this.tooManySearchResults;this.subscribe(t,(function(e){return this.$(".js-search-message").toggleClass("hide",!e)})),this.watch("isSearching",(function(e){const t=e?"no results":"no archived cards";return this.$(".js-empty-message").text(p(t))})),this.watch("cards",(function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)})),this.watch("isLoadingSearchResults",(function(e){return this.$(".js-search-loading").toggleClass("hide",!e)}));const i=this.debounce(this.loadSearchResults,400);return this.subscribe(this.searchText.filter((e=>e.length>0)),(function(){return this.isLoadingSearchResults.set(!0),i.call(this)})),this.subscribe(this.cards,this.frameDebounce(this.renderCards))}loadSearchResults(){const e={query:"is:archived ".concat(this.searchText.get()),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0,cards_limit:this.SEARCH_LIMIT};return l.loadSearchData(e).get("cards").then(this.updateSearchCallback.lease()).done()}renderCards(){const e=this.$(".js-archive-items");e.children().detach();const t=Array.from(this.cards.get()).map((e=>this.subview(r,e,{reOpenText:p("unarchive card"),canDelete:!0})));this.appendSubviews(t,e)}showSearchTips(e){h.stop(e),s.sendClickedLinkEvent({linkName:"showSearchTipsLink",source:"archiveScreen",containers:{board:{id:this.model.id}}}),m.toggle({elem:e.target,view:n})}}k.initClass(),e.exports=k},"./app/scripts/views/archive/archived-list-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),{track:r}=i("./packages/analytics/index.ts"),n=i("./app/scripts/lib/util/index.js"),o=i("./app/scripts/views/archive/archived-model-view.js"),{maybeDisplayLimitsErrorOnCardOpen:a}=i("./app/scripts/views/card/card-limits-error.js"),l=i("./app/scripts/views/templates/archive_item.js"),{Analytics:d}=i("./packages/atlassian-analytics/index.ts"),{featureFlagClient:c}=i("./packages/feature-flag-client/index.ts"),{ModelLoader:p}=i("./app/scripts/db/model-loader.js");e.exports=class extends o{initialize(){return this.sendGASEvent=c.get("dataeng.gasv3-event-tracking",!1)}reopen(e){return n.preventDefault(e),p.loadListCards(this.model.id).then((()=>{let t=!1;this.model.cardList.forEach((function(e){let i;const s=null!=(r=e.get("badges"),n=e=>e.attachments,i=null!=r?n(r):void 0)?i:0;var r,n;return t=t||s>0}));const i={$elem:s(e.target),hasAttachments:t,destinationBoard:this.model.getBoard()};if(!a(i))return this.model.update({closed:!1},(e=>{if(null!=e)throw this.model.update({closed:!0}),r("List","Reopen","Via Archive","Failed"),this.sendGASEvent&&d.sendTrackEvent({action:"reopened",actionSubject:"list",source:"archiveScreen",containers:{list:{id:this.model.id},board:{id:this.model.getBoard().id}},attributes:{succeeded:!1}}),e;if(r("List","Reopen","Via Archive"),this.sendGASEvent)return d.sendTrackEvent({action:"reopened",actionSubject:"list",source:"archiveScreen",containers:{list:{id:this.model.id},board:{id:this.model.getBoard().id}},attributes:{succeeded:!0}})}))})),!1}render(){return this.$el.html(l({name:this.model.get("name"),url:"function"==typeof this.model.getUrl?this.model.getUrl():void 0,reOpenText:this.options.reOpenText,canReopen:this.canReopen()})),this}}},"./app/scripts/views/archive/archived-lists-view.js":function(e,t,i){const s=i("./app/scripts/views/archive/archived-list-view.js"),{ModelLoader:r}=i("./app/scripts/db/model-loader.js"),n=i("./app/scripts/lib/util/index.js"),o=i("./app/scripts/views/internal/view.js"),a=i("./node_modules/underscore/underscore.js"),{l:l}=i("./app/scripts/lib/localize.js"),d=i("./node_modules/react/index.js"),{renderComponent:c}=i("./app/src/components/ComponentWrapper/index.ts"),{ArchivedLists:p}=i("./app/scripts/views/templates/ArchivedLists.js");class u extends o{static initClass(){this.prototype.hasBeenActiveBefore=!1,this.prototype.vigor=this.VIGOR.SOME}initialize({searchText:e}){return this.searchText=e,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map((function(...e){const[t,i]=Array.from(e[0]);if(""===i)return t;{const e=n.buildFuzzyMatcher(i);return a.filter(t,(t=>e(t.get("name"))))}})).map((e=>a.sortBy(e,(e=>e.get("name"))))),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",(e=>e.get("closed")?this.allArchivedLists.set([e,...Array.from(this.allArchivedLists.get())]):this.allArchivedLists.set(a.without(this.allArchivedLists.get(),e))))}remove(){return this.unmountArchivedLists&&this.unmountArchivedLists(),super.remove(...arguments)}didBecomeActive(){this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,r.loadArchivedLists(this.model.id).then((e=>{const t=this.modelCache.find("List",(e=>e.get("idBoard")===this.model.id&&e.get("closed")));return this.allArchivedLists.set(t),this.isLoading.set(!1)})))}renderOnce(){return this.unmountArchivedLists&&this.unmountArchivedLists(),this.unmountArchivedLists=c(d.createElement(p,null),this.$el[0]),this.watch("searchText",(function(e){const t=0===e.length?"no archived lists":"no results";return this.$(".js-empty-message").text(l(t))})),this.watch("sortedFilteredLists",(function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)})),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))}renderLists(){this.$(".js-archive-items").children().detach();const e=Array.from(this.sortedFilteredLists.get()).map((e=>this.subview(s,e,{reOpenText:l("unarchive list"),canDelete:!1})));return this.appendSubviews(e,this.$(".js-archive-items")),this}}u.initClass(),e.exports=u},"./app/scripts/views/archive/archived-model-view.js":function(e,t,i){const s=i("./app/scripts/views/lib/pop-over.js"),r=i("./app/scripts/views/board/reopen-board-popover-view.js"),{ModelLoader:n}=i("./app/scripts/db/model-loader.js"),o=i("./node_modules/bluebird/js/browser/bluebird.js"),a=i("./app/scripts/lib/util/index.js"),l=i("./app/scripts/views/internal/view.js"),{l:d}=i("./app/scripts/lib/localize.js"),{Auth:c}=i("./app/scripts/db/auth.js"),p=i("./app/scripts/views/templates/archive_item.js"),{Analytics:u}=i("./packages/atlassian-analytics/index.ts");class m extends l{static initClass(){this.prototype.tagName="li",this.prototype.className="u-clearfix",this.prototype.events={"click .js-reopen":"reopen"}}initialize(){if(this.me=c.me(),this.listenTo(this.model,"deleting",this.render),null!=this.model.getBoard)return this.listenTo(this.model.getBoard(),"change:limits",this.render)}_checkTargetCapacity(){let e=!0;return null!=this.model.getBoard&&(e=this.model.getBoard().hasCapacity(this.model)),e}canReopen(){const e=this._checkTargetCapacity();return null!=this.model.owned?e&&this.model.owned():e&&this.model.editable()}render(){let e;return this.$el.html(p({name:this.model.get("name"),orgName:(e=this.model.getOrganization())?e.get("displayName"):this.model.hasOrganization()?d(["templates","board_header","private-workspace"]):d("personal"),url:"function"==typeof this.model.getUrl?this.model.getUrl():void 0,reOpenText:this.options.reOpenText,canReopen:this.canReopen(),reopenDisabled:this.options.reopenDisabled})),this}reopen(e){a.stop(e);const t=this.model.getOrganization();if(null!=t?t.isAtOrOverFreeBoardLimit():void 0)return;const i=[this.model.getNewBillableGuests()];return!t||t.adminList&&0!==t.adminList.length||i.push(n.loadOrganizationMembersMinimal(t.id)),o.all(i).then(((...e)=>{const[i]=Array.from(e[0]),{newBillableGuests:n,availableLicenseCount:o}=i;return n.length>0?s.show({elem:this.$(".js-reopen"),view:new r({board:this.model,org:t,newBillableGuests:n,availableLicenseCount:o,onReopen:()=>u.sendTrackEvent({action:"reopened",actionSubject:"board",source:"closedBoardsScreen",containers:{board:{id:this.model.id}}})})}):(this.model.reopen(),u.sendTrackEvent({action:"reopened",actionSubject:"board",source:"closedBoardsScreen",containers:{board:{id:this.model.id}}}))}))}}m.initClass(),e.exports=m},"./app/scripts/views/archive/search-help-view.js":function(e,t,i){const s=i("./app/scripts/views/internal/view.js"),r=i("./app/scripts/views/templates/search_help_popover.js");class n extends s{static initClass(){this.prototype.viewTitleKey="help"}render(){return this.$el.html(r()),this}}n.initClass(),e.exports=n},"./app/scripts/views/board-menu/BoardSidebarPuPUpsell.tsx":function(e,t,i){"use strict";i.r(t),i.d(t,"BoardSidebarPuPUpsell",(function(){return m}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./app/src/components/UpgradePrompts/index.ts"),o=i("./packages/test-ids/index.ts"),a=i("./packages/i18n/index.ts"),l=i("./packages/analytics/index.ts"),d=i("./packages/feature-flag-client/index.ts"),c=i("./packages/nachos/icons/power-up.tsx"),p=i("./packages/nachos/icons/private.tsx");const u=Object(a.forNamespace)("upgrade prompt"),m=({billingUrl:e,orgId:t})=>{const i=Object(d.useFeatureFlag)("btg.upgrade-prompt-audit",!1);return r.a.createElement("span",{className:"board-menu-navigation-item-link disabled"},r.a.createElement("span",{className:"board-menu-navigation-item-link-icon mod-upsell-slot"},r.a.createElement(p.a,{size:"small"})),i?r.a.createElement(n.UpgradeSmartComponent,{orgId:t||"",promptId:"boardMenuDrawerPromptFull"}):r.a.createElement(n.UpgradePromptFull,{content:u(["board menu","power ups","content"]),headline:u(["board menu","power ups","headline"]),cta:u("learn more"),orgId:t,ctaLink:e,ctaOnClick:()=>{Object(l.trackUe)({category:l.Noun.BOARD_MENU,verb:l.Verb.OPENS,directObj:l.Noun.BC_MODAL,method:"by clicking full upgrade prompt in board menu pup section"})},icon:r.a.createElement(c.a,null),source:"boardMenuDrawer",testId:o.UpgradePromptTestIds.PuPsUpgradePrompt}))}},"./app/scripts/views/board-menu/about-this-board-admin-list-view.js":function(e,t,i){const s=i("./app/scripts/views/internal/view.js"),r=i("./app/scripts/views/internal/templates.js"),n=i("./app/scripts/views/member-menu-profile/member-mini-profile-view.js"),{Analytics:o}=i("./packages/atlassian-analytics/index.ts"),{featureFlagClient:a}=i("./packages/feature-flag-client/index.ts");class l extends s{static initClass(){this.prototype.viewTitleKey="multi admin list"}initialize(){return this.listenTo(this.model)}render(){const e=this.model.toJSON();return a.get("dataeng.gasv3-event-tracking",!1)&&o.sendScreenEvent({name:"aboutThisBoardAdminListInlineDialog",containers:{board:{id:this.model.id}}}),this.$el.html(r.fill(i("./app/scripts/views/templates/popover_about_this_board_admin_list.js"),e)),this.renderAdminList(),this}renderAdminList(){const e=this.$(".js-show-all-admins"),t=this.model.orderedVisibleAdmins(),i=Array.from(t).map((e=>this.subview(n,e,{board:this.model})));return this.ensureSubviews(i,e)}}l.initClass(),e.exports=l},"./app/scripts/views/board-menu/board-collections-select-view.js":function(e,t,i){const{Auth:s}=i("./app/scripts/db/auth.js"),r=i("./app/scripts/views/organization/add-tag-view.js"),n=i("./app/scripts/views/lib/pop-over.js"),o=i("./app/scripts/lib/util/index.js"),a=i("./app/scripts/views/internal/view.js"),{Controller:l}=i("./app/scripts/controller/index.js"),d=i("./node_modules/underscore/underscore.js"),c=i("./packages/jquery/index.js"),{Analytics:p,tracingCallback:u}=i("./packages/atlassian-analytics/index.ts"),m=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_collections"),h=m.renderable((function(e,t){if(e)return m.ul(".select-tags-list",(()=>Array.from(e).map((e=>m.li(".select-tags-list-item.js-tag-item",{"data-id-tag":e.id},(()=>m.a(".select-tags-list-item-name-link.js-toggle-tag",(function(){return t&&m.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),m.text(e.get("name"))}))))))))})),g=m.renderable((function(e){return h(e.associated,!0),h(e.notAssociated,!1)})),b=m.renderable((function({board:e,collectionsEnabled:t,billingUrl:s,orgUrl:r,hasTags:n,hideExplainer:o}){return t?(o||m.div(".collections-info",(function(){return m.span(".collections-explainer-close.js-close-explainer",(()=>m.icon("close"))),m.img(".collections-image",{src:i("./resources/images/collections/business-class-feature-roadmap.png")}),m.p((()=>m.format("collections-let-you-group-and-filter"))),m.p(".js-learn-more",(()=>m.format("learn-more-about-collections")))})),m.div(".collections-select-lists",(function(){return n?(m.div(".has-collections",(function(){return m.p(".js-team-page",(()=>m.format("visit-team-page-create-some",{orgUrl:r}))),m.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},(()=>m.format("create-collection")))})),m.input(".js-collections-search",{type:"text",placeholder:m.l("search-collections"),autocomplete:"off"}),m.div(".js-filtered-collections")):m.div(".no-collections",(function(){return m.p((()=>m.format("no-collections"))),m.p(".js-team-page",(()=>m.format("visit-team-page-create-some",{orgUrl:r}))),m.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},(()=>m.format("create-collection")))}))}))):void m.div(".collections-upsell.ads-layouts-experiment",(()=>m.div(".collections-upsell-body",(function(){return m.h4(".collections-upsell-header",(()=>m.format("ads-title"))),m.p((()=>m.format("collections-let-you-group-and-filter"))),m.a(".js-learn-more",{href:"/business-class",target:"_blank"},(()=>m.format("ads-learn-more"))),m.div(".collections-upgrade-action",(function(){return s?m.a(".nch-button.nch-button--primary.js-upgrade",{href:s},(()=>m.format("ads-upgrade"))):m.a(".nch-button.nch-button--primary.js-add-team",{href:"#"},(()=>m.format("ads-upgrade")))}))}))))}));class v extends a{static initClass(){this.prototype.className="board-menu-collections-select",this.prototype.noPadding=!0,this.prototype.events={"click .js-add-tag":"addTag","keyup .js-collections-search":"renderFilteredCollections","click .js-toggle-tag"(e){return this.toggleTag((e=>c(e.target).closest(".js-tag-item")[0].getAttribute("data-id-tag"))(e))},"click .js-add-team":"addTeam","click .js-close-explainer":"closeExplainer","click .js-learn-more a":e=>p.sendClickedLinkEvent({linkName:"learnMoreLink",source:"boardMenuDrawerCollectionsScreen"}),"click .js-team-page a":e=>p.sendClickedLinkEvent({linkName:"orgPageLink",source:"boardMenuDrawerCollectionsScreen"}),"click .js-upgrade"(e){return p.sendClickedButtonEvent({buttonName:"upgradeButton",source:"boardMenuDrawerCollectionsScreen",containers:{board:{id:this.model.id},organization:{id:this.model.getOrganization().id}}})}},this.prototype.viewTitleKey="pick tags"}initialize(){return this.sidebarView=this.options.sidebarView,this.organization=(null!=this.options?this.options.org:void 0)||this.model.getOrganization(),this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.listenTo(this.model,"change:idOrganization",this.refereshOrganization),this.listenTo(this.model,"change:idTags",this.render),this.listenTo(s.me(),"change:oneTimeMessagesDismissed",this.render),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),super.initialize(...arguments)}addTag(e){return o.stop(e),p.sendClickedLinkEvent({linkName:"createCollectionLink",source:"boardMenuDrawerCollectionsScreen",containers:{board:{id:this.model.id},organization:{id:this.model.getOrganization().id}}}),n.toggle({elem:e.target,view:r,options:{model:this.organization,modelCache:this.modelCache,boardView:!0}})}toggleTag(e){const t=this.model.getIdTags().includes(e),i=p.startTask({taskName:"edit-board/idTags",source:"boardMenuDrawerCollectionsScreen"});return this.model.toggleTag(e,i,u({taskName:"edit-board/idTags",traceId:i,source:"boardMenuDrawerCollectionsScreen"},(s=>{const r=this.model.get("id"),n=this.model.get("idOrganization");s||p.sendTrackEvent({action:"toggled",actionSubject:"collection",source:"boardMenuDrawerCollectionsScreen",attributes:{taskId:i,idCollection:e,toggleOff:t},containers:{board:{id:r},organization:{id:n}}})})))}addTeam(e){return o.stop(e),p.sendClickedButtonEvent({buttonName:"addTeamFromCollectionsButton",source:"boardMenuDrawerCollectionsScreen",containers:{board:{id:this.model.id},organization:{id:this.model.getOrganization().id}}}),this.model.trigger("add-to-team")}closeExplainer(){return s.me().dismiss("CollectionsExplainer"),p.sendDismissedComponentEvent({componentType:"overlay",componentName:"collectionsExplainerOverlay",source:"boardMenuDrawerCollectionsScreen"})}filterTagsBySearch(e){const t=this._searchVal().toLowerCase();return d.isEmpty(t)?e:d.filter(e,(e=>f(e.get("name"),(e=>e.toLowerCase().indexOf(t)))>-1))}filterTagsByAssociation(e,t){return d.groupBy(e,(e=>Array.from(t).includes(e.id)?"associated":"notAssociated"))}_searchVal(){let e;return null!=(e=f(this.$(".js-collections-search").val(),(e=>e.trim())))?e:""}renderFilteredCollections(){if(!(null!=this.organization?this.organization.tagList.models.length:void 0))return;const e=this.filterTagsByAssociation(this.filterTagsBySearch(this.organization.tagList.models),this.model.getIdTags());return this.$(".js-filtered-collections").empty().append(g(e))}refereshOrganization(){const e=this.modelCache.get("Organization",this.model.previous("idOrganization")),t=this.model.getOrganization();return null!=e&&this.stopListening(e.tagList),this.organization=t,this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),this.render()}render(){let e,t;const i=s.me().isDismissed("CollectionsExplainer"),r=null!=this.organization?this.organization.tagList.models.length:void 0;return this.organization&&(t=l.getOrganizationUrl(this.organization),e=l.getOrganizationBillingUrl(this.organization)),this.$el.html(b({board:this.model,collectionsEnabled:this.collectionsEnabled,billingUrl:e,orgUrl:t,hasTags:r,hideExplainer:i})),this.renderFilteredCollections(),this}}function f(e,t){return null!=e?t(e):void 0}v.initClass(),e.exports=v},"./app/scripts/views/board-menu/board-collections-view.js":function(e,t,i){function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let r;const n=i("./app/scripts/views/board-menu/board-collections-select-view.js"),o=i("./app/scripts/views/board-menu/board-add-to-team-view.js"),{Auth:a}=i("./app/scripts/db/auth.js"),{ModelLoader:l}=i("./app/scripts/db/model-loader.js"),d=i("./app/scripts/views/internal/view.js"),{Feature:c}=i("./app/scripts/debug/constants.ts"),{sendErrorEvent:p}=i("./packages/error-reporting/index.ts"),u=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_collections"),m=u.renderable((()=>{u.div((()=>{u.div(".spinner.loading")}))}));class h extends d{render(){return this.$el.html(m())}}class g extends d{renderOnce(){return this.$el.html(u.render((()=>{u.div(".count-explanation",(()=>{u.p((()=>u.format("only-team-members-can-enable-collections")))}))})))}}s(g,"vigor",g.VIGOR.NONE),e.exports=(r=class extends d{constructor(...e){super(...e),s(this,"viewTitleKey","collections")}className(){return"board-menu-content-frame board-collections-view"}static initClass(){this.prototype.noPadding=!0}initialize(){this.sidebarView=this.options.sidebarView,this.listenTo(this.model,"team-has-bc",(()=>{this.redirecting=!1,this.addToTeam=!1,this.render()})),this.listenTo(this.model,"added-to-team",(()=>{this.redirecting=!0,this.render()})),this.listenTo(this.model,"cancel-add-to-team",(()=>{this.addToTeam=!1,this.render()})),this.listenTo(this.model,"cancel-upgrade",(()=>{this.initialViewState=null,this.render()})),this.listenTo(this.model,"add-to-team",(()=>{this.model.owned()?(this.initialViewState=null,this.addToTeam=!0,this.render()):window.location="/business-class"}))}render(){try{this.$el.empty();const e=this.model,t=e.hasOrganization(),i=e.getOrganization(),s=a.me(),r=e.isMember(s),n=null==i?void 0:i.isMember(s),o=!r&&!n,l=e.isPublic()&&(null==i?void 0:i.isPublic()),d=t&&(r&&!n||o&&l);this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():d?this.renderOnlyForTeamMembers():this.renderTagSelect()}catch(e){p(e,{tags:{ownershipArea:"trello-remarkable",feature:c.Collections}})}}renderOnlyForTeamMembers(){this.appendSubview(this.subview(g,this.model))}renderSpinner(){this.appendSubview(this.subview(h,this.model))}renderAddToTeam(){if(this.model.hasOrganization())return this.appendSubview(this.subview(g,this.model)),this;l.loadMyOrganizations(),this.appendSubview(this.subview(o,this.model,{menuType:"Collections"}))}renderTagSelect(){this.appendSubview(this.subview(n,this.model,{modelCache:this.modelCache,sidebarView:this.sidebarView}))}},r.initClass(),r=r)},"./app/scripts/views/board-menu/board-labels-view.js":function(e,t,i){const s=i("./app/scripts/views/label/labels-view.js"),r=i("./app/scripts/views/internal/view.js");class n extends r{static initClass(){this.prototype.viewTitleKey="labels"}el(){const e=this.subview(s,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:t=>{if(this.model.editable())return e.editLabel(t)}});return e.render().el}}n.initClass(),e.exports=n},"./app/scripts/views/board-menu/board-menu-about-this-board-view.js":function(e,t,i){const{Auth:s}=i("./app/scripts/db/auth.js"),r=i("./app/scripts/lib/util/index.js"),n=i("./app/scripts/views/internal/view.js"),o=i("./app/scripts/views/lib/pop-over.js"),a=i("./node_modules/react/index.js"),{l:l}=i("./app/scripts/lib/localize.js"),d=i("./app/scripts/views/templates/board_menu_about_this_board.js"),{trackUe:c}=i("./packages/analytics/index.ts"),{renderComponent:p}=i("./app/src/components/ComponentWrapper/index.ts"),{BoardMenuViewsAndCopies:u}=i("./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.tsx"),m=i("./app/scripts/views/board-menu/about-this-board-admin-list-view.js"),h=i("./app/scripts/views/description/description-view.js"),g=i("./app/scripts/views/member-menu-profile/member-mini-profile-view.js"),b=i("./app/scripts/views/member-menu-profile/member-on-board-view.js"),v=i("./app/scripts/views/board-menu/search-input-view.js"),{workspaceNavigationState:f}=i("./app/src/components/WorkspaceNavigation/index.ts");class w extends n{static initClass(){this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-change-permissions":"changePermissions","click .js-fill-board-admin-count":"openAllMembers"}}initialize({sidebarView:e}){return this.sidebarView=e,super.initialize(...arguments),this.listenTo(this.model,{"change:memberships":this.renderDebounced,"change:prefs.voting":this.renderDebounced,"change:prefs.comments":this.renderDebounced,"change:desc":this.renderDebounced}),this.descView=this.subview(h,this.model,{maxDescLength:700,board:this.model,placeholderKey:this.getPlaceHolderText(),source:"boardMenuDrawerAboutScreen"}),this.makeDebouncedMethods("render")}getPlaceHolderText(){const e=this.model.isTemplate(),t=s.me(),i=this.model.ownedByMember(t),r=this.model.isMember(t);return e?i||r?"about-this-template-description-admin":"about-this-template-description-visitor":"its-your-boards-time-to-shine"}getViewTitle(){return this.model.isTemplate()?l(["view title","about-this-template"]):l(["view title","about-this-board"])}render(){this.model.isPublic()&&this.model.isTemplate()&&f.setValue({expanded:!1});const e=s.isLoggedIn(),t=s.me(),i={};if(i.isLoggedIn=e,i.isAdmin=this.model.ownedByMember(t),i.isNonAdminMember=this.model.isMember(t)&&!i.isAdmin,i.isTemplate=this.model.isTemplate(),i.isAdmin){const e=this.model.getCommentPerm(),t=this.model.getPref("voting");i.canComment="disabled"!==e,i.canVote="disabled"!==t,i.commentHeader=this.getPermissionsLevelHeader(e),i.votingHeader=this.getPermissionsLevelHeader(t),i.permissionsHierarchy=this.getPermissionsHierarchy(e,t)}else e?(i.canComment=this.model.canComment(t),i.canVote=this.model.canVote(t)):(i.canComment="public"===this.model.getCommentPerm(),i.canVote="public"===this.model.getPref("voting"));this.$el.html(d(i));const r=1===this.model.adminList.length;return r?this.renderSingleAdminProfile():this.renderAdminFacepile(),this.$(".about-this-board-multi-admin").toggleClass("hide",r),this.$(".about-this-board-desc").toggleClass("visitor-single-admin",r&&!i.isAdmin),this.descView.placeholderKey=this.getPlaceHolderText(),this.appendSubview(this.descView,this.$(".js-fill-atb-desc")),this.renderSearchInputView(),this.renderViewCopyCount(),this}renderSingleAdminProfile(){const e=this.model.adminList.models[0],t=e.toJSON();t.showEmail=!1,t.isMe=e===s.me();const i=this.$(".js-made-by"),r=this.subview(g,e);return this.ensureSubview(r,i)}renderAdminFacepile(){const e=this.$(".js-made-by-facepile"),t=this.model.orderedVisibleAdmins(),i=t.length,s=t.slice(0,5),r=i-5;r>0?(this.$(".js-fill-board-admin-count").text("+".concat(r)),this.$(".js-fill-board-admin-count").toggleClass("pile",r<100),this.$(".js-fill-board-admin-count").toggleClass("pile-lg",r>=100)):this.$(".js-fill-board-admin-count").text("");const n=Array.from(s).map((e=>this.subview(b,e,{board:this.model})));if(e.length)return this.ensureSubviews(n,e)}openAllMembers(e){var t,i;return r.stop(e),c("board sidebar","toggles","admin list popover","from about view","","by clicking on admin count",{boardId:this.model.id,teamId:(t=this.model.getOrganization(),i=e=>e.id,null!=t?i(t):void 0)}),o.toggle({elem:this.$(".js-fill-board-admin-count"),maxWidth:304,view:m,options:{model:this.model,modelCache:this.modelCache}})}getPermissionsLevelHeader(e){switch(e){case"members":return"members-can";case"observers":return"members-and-observers-can";case"org":return"team-members-can";case"public":return"any-trello-user-can"}}getPermissionsHierarchy(e,t){if(e===t)return"equal";if("disabled"!==e&&"disabled"===t)return"comment";if("disabled"===e&&"disabled"!==t)return"voting";{const i=["members","observers","org","public"];return i.indexOf(e)<i.indexOf(t)?"comment":"voting"}}changePermissions(e){r.stop(e),this.sidebarView.pushView("settings")}showCardFilter(e){r.stop(e),this.sidebarView.pushView("filter")}renderSearchInputView(){const e=this.$(".js-search-input-view");if(e.length){const t=this.subview(v,this.model.filter,{showCardFilter:this.showCardFilter.bind(this)});return this.appendSubview(t,e)}}renderViewCopyCount(){return p(a.createElement(u,{idBoard:this.model.id,isTemplate:this.model.isTemplate(),showLabels:!1}),this.$(".js-view-copy-count")[0]),this}}w.initClass(),e.exports=w},"./app/scripts/views/board-menu/board-menu-activity-view.js":function(e,t,i){const{ActionList:s}=i("./app/scripts/models/collections/action-list.js"),r=i("./app/scripts/views/action/action-list-view.js"),{Analytics:n}=i("./packages/atlassian-analytics/index.ts"),o=i("./app/scripts/views/internal/view-with-actions.js"),a=i("./app/scripts/views/internal/view.js"),l=i("./app/scripts/views/internal/templates.js"),d=i("./node_modules/underscore/underscore.js");class c extends a{static initClass(){this.prototype.viewTitleKey="activity",this.prototype.viewIcon="activity",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"}}initialize(){this.mode="all",({fullHistory:this.fullHistory}=this.options),null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(r,new s(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model,source:"boardMenuDrawerActivityScreen"}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:".concat(this.model.id),(()=>(this.actionListView.collection.reset(this.getActions()),this.renderMoreActionsLinkDebounced()))),this.listenTo(this.model.memberList,{"change:initials change:avatarUrl change:avatarSource change:fullName change:username":this.render}),this.loadMoreActions()}render(){return this.$el.html(l.fill(i("./app/scripts/views/templates/board_menu_activity.js"),this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this}renderActions(){return this.actionListView.render(),this.renderMoreActionsLink()}renderMoreActionsLink(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this}renderMode(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this}showAll(e){this.mode="all",this.renderMode(),n.sendClickedButtonEvent({buttonName:"showAllActivityButton",source:"boardMenuDrawerActivityScreen"})}showComments(e){this.mode="comments",this.renderMode(),n.sendClickedButtonEvent({buttonName:"showCommentsOnlyButton",source:"boardMenuDrawerActivityScreen"})}}c.initClass(),d.extend(c.prototype,o),e.exports=c},"./app/scripts/views/board-menu/board-menu-more-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),r=i("./app/scripts/views/lib/alerts.js"),{Auth:n}=i("./app/scripts/db/auth.js"),{Analytics:o,tracingCallback:a}=i("./packages/atlassian-analytics/index.ts"),l=i("./app/scripts/views/internal/board-display-helpers.js"),{Controller:d}=i("./app/scripts/controller/index.js"),c=i("./app/scripts/views/lib/pop-over.js"),p=i("./app/scripts/lib/util/index.js"),u=i("./app/scripts/views/internal/view.js"),m=i("./app/scripts/views/lib/confirm.js"),h=i("./app/scripts/views/board/share-popover-view.js"),g=i("./app/scripts/views/board-menu/edit-email-settings-view.js"),b=i("./app/scripts/views/board/copy-board-view.js"),v=i("./app/scripts/views/board/convert-board-template-view.js"),{l:f}=i("./app/scripts/lib/localize.js"),w=i("./app/scripts/views/templates/board_menu_more.js"),{dontUpsell:k}=i("./packages/browser/index.ts"),{ModelLoader:y}=i("./app/scripts/db/model-loader.js"),j=i("./app/scripts/views/board-menu/board-add-to-team-view.js"),{featureFlagClient:C}=i("./packages/feature-flag-client/index.ts"),x=i("./node_modules/react/index.js"),S=i("./packages/react-dom-wrapper/index.ts"),{renderComponent:_}=i("./app/src/components/ComponentWrapper/index.ts"),{UpgradePromptFull:E}=i("./app/src/components/UpgradePrompts/UpgradePromptFull.tsx"),{UpgradeSmartComponent:T}=i("./app/src/components/UpgradePrompts/UpgradeSmartComponent.tsx"),{UpgradePromptPill:P}=i("./app/src/components/UpgradePrompts/UpgradePromptPill.tsx"),{UpgradeSmartComponentConnected:A}=i("./app/src/components/UpgradePrompts/UpgradeSmartComponent.tsx"),{UpgradePromptTestIds:O}=i("./packages/test-ids/index.ts"),{renderUpgradePrompt:D}=i("./app/src/components/UpgradePrompts/renderUpgradePrompt.ts"),{BusinessClassIcon:B}=i("./packages/nachos/icons/business-class.tsx"),{CollectionIcon:N}=i("./packages/nachos/icons/collection.tsx"),{PlanSelectionOverlay:L}=i("./app/src/components/FreeTrial/index.ts"),{QrCodePopover:I}=i("./app/src/components/QrCode/index.ts");class M extends u{static initClass(){this.prototype.viewTitleKey="more",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-open-collections":"openCollections","click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","click .js-make-template":"makeTemplate","click .js-convert-to-board":"convertToBoard","submit form":"cancel"}}initialize({sidebarView:e}){this.sidebarView=e,this.makeDebouncedMethods("render"),this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState,"change:prefs.isTemplate":this.renderDebounced,"change:prefs.permissionLevel":this.renderDebounced,"change:idOrganization":this.renderDebounced,"change:memberships":this.renderDebounced}),this.listenTo(this.model,"cancel-add-to-team",(()=>(this.addToTeam=!1,this.render()))),this.listenTo(this.model,"add-to-team",(()=>this.model.owned()?(this.addToTeam=!0,this.render()):window.location="/business-class"))}remove(){return"function"==typeof this.unmountCollectionsPromptPill&&this.unmountCollectionsPromptPill(),"function"==typeof this.unmountCollectionsPromptFull&&this.unmountCollectionsPromptFull(),"function"==typeof this.unmountTemplatesPromptPill&&this.unmountTemplatesPromptPill(),this.unmountQrCodePopover(),super.remove(...arguments)}render(e){let t;this.$el.empty();const i=n.me(),s=this.model,r=this.model.toJSON();r.canJoin=this.model.canJoin(),r.canInviteMembers=this.model.canInviteMembers(),r.confirmed=i.get("confirmed"),r.isLoggedIn=i.isLoggedIn();const a=this.model.getOrganization(),c=a?d.getOrganizationBillingUrl(a):void 0,p=a?a.id:void 0;r.canCloseBoard=this.model.owned()||!!(null==a?void 0:a.hasPremiumFeature("superAdmins"))&&(null!=a?a.owned():void 0),r.editableByMember=this.model.editableByMember(i),r.canLeaveBoard=(this.model.isMemberObserver(i)||this.model.editableByMember(i))&&i.getMembershipData(this.model).canRemove,r.canCloseOrLeave=r.canLeaveBoard||r.canCloseBoard,r.pLevelClass=l.getPermLevelIconClassForBoard(this.model),r.pLevelAltText=l.getPermLevelAltTextForBoard(this.model),r.helperText=f(["board perms",this.model.getPermLevel(),"short summary"]);const u=null!=a?a.isFeatureEnabled("tags"):void 0;r.showCollections=this.model.hasOrganization()&&(u||!k()),r.hasMultipleMembers=U(this.model.get("memberships"),(e=>e.length))>1,r.isAtOrOverFreeBoardLimit=U(this.model.getOrganization(),(e=>e.isAtOrOverFreeBoardLimit())),r.isOrgBcOrEnt=!!(null!=a&&a.isBusinessClass()||null!=a&&a.belongsToRealEnterprise()),r.isAdmin=this.model.ownedByMember(i),r.isTemplate=this.model.isTemplate(),r.canBeTemplate="public"===this.model.getPermLevel()||r.isOrgBcOrEnt,r.showTemplateUpgrade=this.model.hasOrganization()&&r.isAdmin&&!k();const m=this.model.isGuest(i),h=this.model.isPublic()&&this.model.isTemplate(),g=!this.model.isMember(i)&&!this.model.canJoin(),b=this.model.get("idEnterprise")&&i.isManagedEntMemberOf(this.model.get("idEnterprise"));if(s.get("enterpriseOwned")&&m&&!b?r.canCopyBoard=!1:this.model.allowsSelfJoin()&&(t=this.model.getPref("permissionLevel"),["org","enterprise"].includes(t))?r.canCopyBoard=!0:s.get("enterpriseOwned")&&g&&!b&&!h?r.canCopyBoard=!1:r.canCopyBoard=!0,this.addToTeam)this.renderAddToTeam();else{this.$el.html(w(r));const e=this.$el.find(".js-board-menu-pill-collections-upgrade")[0];if(null!=a&&a.isMember(i)){const t=C.get("btg.upgrade-prompt-audit",!1),i=()=>{if(o.sendUIEvent({action:"clicked",actionSubject:"pill",actionSubjectId:"collectionsBcUpgradePill",source:"boardMenuDrawerMoreScreen"}),!t){const t=document.createElement("span");return e.appendChild(t),_(x.createElement(L,{ctaLink:d.getOrganizationBillingUrl(p),onContinue:()=>window.location.assign("/business-class"),orgId:p,onClose:()=>(S.unmountComponentAtNode(t),t.remove())}),t,{boardModel:this.model})}},n=this.$el.find(".js-board-menu-pill-collections-upgrade")[0];if(t?n&&(this.unmountcollectionsPromptPill=()=>{S.unmountComponentAtNode(n)},_(x.createElement(A,{orgId:p,promptId:"boardMenuMoreCollectionsPromptPill"}),n)):this.unmountCollectionsPromptPill=D(x.createElement(P,{testId:O.CollectionsUpgradePill,icon:x.createElement(B,null),cta:f(["upgrade prompt","upgrade"]),ctaOnClick:i}),this.$el.find(".js-board-menu-pill-collections-upgrade")[0],{boardModel:s},r.showCollections),C.get("btg.upgrade-prompt-audit",!1)){const e=this.$el.find(".js-board-menu-prompt-collections")[0];e&&_(x.createElement(T,{orgId:p,promptId:"boardMenuMoreCollectionsPromptFull"}),e)}else this.unmountCollectionsPromptFull=D((function({dismiss:e}){const t={headline:f(["upgrade prompt","board menu","collections","headline-2"]),content:f(["upgrade prompt","board menu","collections","content-2"]),className:"board-menu-prompt-collections",cta:f(["upgrade prompt","learn more"]),ctaLink:c,orgId:p,source:"boardMenuDrawerMoreScreen",icon:x.createElement(N,null),isDismissable:!0,onDismiss:e,testId:O.CollectionsUpgradePrompt};return x.createElement(E,t)}),this.$el.find(".js-board-menu-prompt-collections")[0],{promptID:"ad-bc-prompt-upgrade-board-more-collection",boardModel:this.model});const a=this.$el.find(".js-board-menu-pill-templates-upgrade")[0];t?a&&(this.unmountTemplatesPromptPill=()=>S.unmountComponentAtNode(a),_(x.createElement(A,{orgId:p,promptId:"boardMenuMoreTemplatesPromptPill"}),a)):this.unmountTemplatesPromptPill=D(x.createElement(P,{testId:O.TemplatesUpgradePill,icon:x.createElement(B,null),cta:f(["upgrade prompt","upgrade"]),ctaOnClick:()=>{o.sendUIEvent({action:"clicked",actionSubject:"pill",actionSubjectId:"makeTemplateBcUpgradePill",source:"boardMenuDrawerMoreScreen"});const t=document.createElement("span");return e.appendChild(t),_(x.createElement(L,{ctaLink:d.getOrganizationBillingUrl(p),onContinue:()=>window.location.assign("/business-class"),orgId:p,onClose:()=>(S.unmountComponentAtNode(t),t.remove())}),t,{boardModel:this.model})}}),a,{boardModel:s},r.showCollections)}this.renderSubscribeState()}if(C.get("aaaa.qr-codes",!1)){const e=this.model.get("shortUrl");this.mountQrCodePopover(e)}return this}renderAddToTeam(){return y.loadMyOrganizations(),this.appendSubview(this.subview(j,this.model,{menuType:"More"}))}renderSubscribeState(){this.$(".js-subscribed-state").toggleClass("hide",!this.model.get("subscribed"))}openCollections(e){p.stop(e),this.sidebarView.pushView("collections")}openSettings(e){p.stop(e),this.sidebarView.pushView("settings")}openLabels(e){p.stop(e),this.sidebarView.pushView("labels")}openStickers(e){p.stop(e),this.sidebarView.pushView("stickers")}openArchivedItems(e){p.stop(e),this.sidebarView.pushView("archive")}shareBoard(e){p.stop(e),c.toggle({elem:this.$(e.target).closest(".js-share"),view:new h({model:this.model,modelCache:this.modelCache})})}openEmailSettings(e){p.stop(e),c.toggle({elem:this.$(e.target).closest(".js-email"),view:new g({model:this.model,modelCache:this.modelCache})})}copyBoard(e){p.stop(e),s(e.target).hasClass("disabled")||(this.sidebarView.sendClickedDrawerNavItemEvent("more","copyBoard"),c.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new b({model:this.model,modelCache:this.modelCache})}))}toggleSubscribe(e){if(p.preventDefault(e),!s(e.target).hasClass("disabled")){const e=o.startTask({taskName:"edit-board/subscribed",source:"boardMenuDrawerMoreScreen"});this.model.subscribeWithTracing(!this.model.get("subscribed"),{taskName:"edit-board/subscribed",source:"boardMenuDrawerMoreScreen",traceId:e,next:t=>{t||o.sendTrackEvent({action:this.model.get("subscribed")?"subscribed":"unsubscribed",actionSubject:"board",source:"boardMenuDrawerMoreScreen",containers:{board:{id:this.model.id}},attributes:{taskId:e}})}}),this.sidebarView.sendClickedDrawerNavItemEvent("more","watch",{watchEnabled:this.model.get("subscribed")})}}closeConfirm(e){p.stop(e),this.sidebarView.sendClickedDrawerNavItemEvent("more","closeBoard"),m.toggle("close board",{elem:s(e.target).closest("a"),model:this.model,confirmBtnClass:"nch-button nch-button--danger",templateData:{boardsPageUrl:"/".concat(n.me().get("username"),"/boards")},fxConfirm:e=>{const t=o.startTask({taskName:"edit-board/closed",source:"boardMenuDrawerMoreScreen"});this.model.close({traceId:t},a({taskName:"edit-board/closed",source:"boardMenuDrawerMoreScreen",traceId:t},((e,i)=>{i&&o.sendTrackEvent({action:"closed",actionSubject:"board",source:"boardMenuDrawerMoreScreen",containers:{board:{id:this.model.id}},attributes:{taskId:t}})})))}})}leaveConfirm(e){p.stop(e),this.sidebarView.sendClickedDrawerNavItemEvent("more","leaveBoard");const t=n.me(),i=t.removeMembershipConfirmationKey(this.model);m.toggle(i,{elem:s(e.target).closest("a"),confirmBtnClass:"nch-button nch-button--danger",fxConfirm:e=>{const i=o.startTask({taskName:"edit-board/members/remove",source:"boardMenuDrawerMoreScreen"});return this.model.removeMemberWithTracing(t,i,a({taskName:"edit-board/members/remove",source:"boardMenuDrawerMoreScreen",traceId:i},((e,t)=>{t&&o.sendTrackEvent({action:"left",actionSubject:"board",source:"boardMenuDrawerMoreScreen",containers:{board:{id:this.model.board}},attributes:{taskId:i}})})))}})}selectUrl(e){return this.$(".js-short-url").focus().select()}cancel(e){return p.stop(e),!1}makeTemplate(e){if(p.stop(e),this.sidebarView.sendClickedDrawerNavItemEvent("more","makeTemplateFromBoard"),!s(e.target).hasClass("disabled"))return c.toggle({elem:this.$(e.target).closest(".js-make-template"),view:new v({model:this.model,modelCache:this.modelCache})})}convertToBoard(){r.show("converting","info","templates",1e3);const e=o.startTask({taskName:"edit-board/prefs/isTemplate",source:"boardMenuDrawerMoreScreen"});return this.model.setPrefWithTracing("isTemplate",!1,{taskName:"edit-board/prefs/isTemplate",source:"boardMenuDrawerMoreScreen",traceId:e,next:(e,t)=>{var i,s;t&&o.sendUpdatedBoardFieldEvent({field:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen",containers:{board:{id:this.model.id},organization:{id:null===(i=this.model)||void 0===i||null===(s=i.getOrganization())||void 0===s?void 0:s.id}}})}}).save(),this.sidebarView.sendClickedDrawerNavItemEvent("more","convertToBoard")}mountQrCodePopover(e){const t=this.$el.find(".js-qr-code")[0];t&&_(x.createElement(I,{url:e,type:"board"}),t)}unmountQrCodePopover(){const e=this.$el.find(".js-qr-code")[0];e&&S.unmountComponentAtNode(e)}}function U(e,t){return null!=e?t(e):void 0}M.initClass(),e.exports=M},"./app/scripts/views/board-menu/board-settings-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),{Auth:r}=i("./app/scripts/db/auth.js"),n=i("./app/scripts/views/board-menu/board-select-organization-view.js"),o=i("./app/scripts/views/board-menu/change-board-add-member-perms-view.js"),a=i("./app/scripts/views/board-menu/change-board-commenting-perms-view.js"),l=i("./app/scripts/views/power-ups/voting-settings-view.js"),d=i("./app/scripts/views/lib/pop-over.js"),c=i("./app/scripts/lib/util/index.js"),p=i("./app/scripts/views/internal/view.js"),u=i("./app/scripts/views/internal/templates.js"),{l:m}=i("./app/scripts/lib/localize.js"),{Analytics:h,tracingCallback:g}=i("./packages/atlassian-analytics/index.ts"),{featureFlagClient:b}=i("./packages/feature-flag-client/index.ts"),v=i("./node_modules/react/index.js"),f=i("./packages/react-dom-wrapper/index.ts"),{WorkspacesPreambleChangeTeamButton:w}=i("./app/src/components/WorkspacesPreamble/index.ts"),{renderComponent:k}=i("./app/src/components/ComponentWrapper/index.ts");class y extends p{static initClass(){this.prototype.viewTitleKey="settings",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-voting:not(.disabled)":"changeVotingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin","click .js-change-cookie-settings":"changeCookieSettings"}}initialize({sidebarView:e}){this.sidebarView=e,this.makeDebouncedMethods("render"),this.listenTo(this.model,"change",this.renderDebounced),this.blockTeamlessBoardsEnabled=b.get("btg.block-teamless-boards",!1),this.workspacesPreambleChangeTeamButtonTarget=null}render(){const e=this.model.toJSON({prefs:!0,url:!0,labels:!0});e.isLoggedIn=r.isLoggedIn(),e.cardCovers=e.prefs.cardCovers;const t=this.model.getOrganization();return e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.votingEnabled=this.model.isPowerUpEnabled("voting"),e.commentsDisplay=m(["board pref perms",this.model.getCommentPerm()]),e.votingDisplay=m(["board pref perms",this.model.getPref("voting")]),e.invitationsDisplay=m(["board pref perms",this.model.getInvitePerm()]),e.blockTeamlessBoardsEnabled=this.blockTeamlessBoardsEnabled,this.blockTeamlessBoardsEnabled?e.canChangeOrg=this.model.owned():(e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),e.setOrgNull=(null!=t?t.owned():void 0)&&!this.model.owned()),e.isTemplate=this.model.isTemplate(),this.$el.html(u.fill(i("./app/scripts/views/templates/board_menu_settings.js"),e,{editable:this.model.editable(),owned:this.model.owned()})),this.blockTeamlessBoardsEnabled&&this.renderWorkspacesPreambleChangeTeamButton(),this}changeOrg(e){if(c.stop(e),this.model.owned())d.toggle({elem:s(e.target).closest("a"),view:n,options:{model:this.model,modelCache:this.modelCache}}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","changeOrg");else{var t;const e=h.startTask({taskName:"edit-board/idOrganization",source:"boardMenuDrawerSettingsScreen"}),i=this.model.get("idOrganization");null===(t=this.modelCache.get("Organization",i))||void 0===t||t.boardList.remove(this.model);const s={idOrganization:"",traceId:e};this.model.update(s,g({taskName:"edit-board/idOrganization",source:"boardMenuDrawerSettingsScreen",traceId:e},(t=>{t||h.sendUpdatedBoardFieldEvent({field:"organization",source:"boardMenuDrawerSettingsScreen",containers:{board:{id:this.model.id}},attributes:{previous:i,taskId:e}})}))),d.hide(),this.sidebarView.sendClickedDrawerNavItemEvent("settings","removeOrg")}}toggleCovers(e,t){c.stop(e);const i=h.startTask({taskName:"edit-board/prefs/cardCovers",source:"boardMenuDrawerSettingsScreen"});this.sidebarView.sendClickedDrawerNavItemEvent("settings","cardCovers",{cardCoversEnabled:this.model.getPref("cardCovers"),taskId:i}),this.model.setPrefWithTracing("cardCovers",!this.model.getPref("cardCovers"),{taskName:"edit-board/prefs/cardCovers",source:"boardMenuDrawerSettingsScreen",traceId:i,next:e=>{var t;e||h.sendUpdatedBoardFieldEvent({field:"cardCoversPref",value:this.model.getPref("cardCovers"),source:"boardMenuDrawerSettingsScreen",containers:{board:{id:this.model.id},organization:{id:null===(t=this.model.getOrganization())||void 0===t?void 0:t.id}},attributes:{taskId:i}})}})}changeCommentingPerms(e){c.stop(e),d.toggle({elem:s(e.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache})}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","commentPerms")}changeVotingPerms(e){c.stop(e),d.toggle({elem:s(e.target).closest("a"),view:new l({model:this.model,modelCache:this.modelCache})}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","votingPerms")}changeAddMemberPerms(e){c.stop(e),d.toggle({elem:s(e.target).closest("a"),view:new o({model:this.model,modelCache:this.modelCache})}),this.sidebarView.sendClickedDrawerNavItemEvent("settings","invitationsPerms",{invitationsEnabled:this.model.getPref("invitations")})}toggleSelfJoin(e){c.stop(e);const t=h.startTask({taskName:"edit-board/prefs/selfJoin",source:"boardMenuDrawerSettingsScreen"});this.sidebarView.sendClickedDrawerNavItemEvent("settings","selfJoin",{selfJoinEnabled:this.model.getPref("selfJoin"),taskId:t}),this.model.setPrefWithTracing("selfJoin",!this.model.getPref("selfJoin"),{taskName:"edit-board/prefs/selfJoin",source:"boardMenuDrawerSettingsScreen",traceId:t,next:e=>{var i;e||h.sendUpdatedBoardFieldEvent({field:"selfJoinPref",value:this.model.getPref("selfJoin"),source:"boardMenuDrawerSettingsScreen",containers:{board:{id:this.model.id},organization:{id:null===(i=this.model.getOrganization())||void 0===i?void 0:i.id}},attributes:{taskId:t}})}}).save()}changeCookieSettings(){return this.sidebarView.sendClickedDrawerNavItemEvent("settings","cookieConsent"),window.trelloCookieConsentDialog()}unmountWorkspacesPreambleChangeTeamButton(){if(this.workspacesPreambleChangeTeamButtonTarget)return f.unmountComponentAtNode(this.workspacesPreambleChangeTeamButtonTarget)}renderWorkspacesPreambleChangeTeamButton(){this.unmountWorkspacesPreambleChangeTeamButton(),this.workspacesPreambleChangeTeamButtonTarget=this.$("#board-settings-change-org")[0],this.workspacesPreambleChangeTeamButtonTarget&&k(v.createElement(w,{boardId:this.model.id}),this.workspacesPreambleChangeTeamButtonTarget)}remove(){return this.unmountWorkspacesPreambleChangeTeamButton(),super.remove(...arguments)}}y.initClass(),e.exports=y},"./app/scripts/views/board-menu/board-sidebar-default-view.js":function(e,t,i){const{ActionList:s}=i("./app/scripts/models/collections/action-list.js"),r=i("./app/scripts/views/action/action-list-view.js"),{Analytics:n}=i("./packages/atlassian-analytics/index.ts"),{Auth:o}=i("./app/scripts/db/auth.js"),{Backgrounds:a}=i("./app/scripts/data/backgrounds.js"),l=i("./app/scripts/views/board-menu/board-sidebar-power-up-slots-view.js"),{BUTLER_POWER_UP_ID:d}=i("./app/scripts/data/butler-id.js"),c=i("./app/scripts/views/internal/plugins/plugin-runner.js"),{TrelloStorage:p}=i("./packages/storage/index.ts"),u=i("./app/scripts/lib/util/index.js"),m=i("./app/scripts/views/internal/view.js"),h=i("./node_modules/underscore/underscore.js"),g=i("./app/scripts/views/internal/templates.js"),b=i("./app/scripts/views/templates/board_menu_default.js"),v=i("./app/scripts/views/internal/plugins/plugins-changed-signal.js"),{featureFlagClient:f}=i("./packages/feature-flag-client/index.ts"),w=i("./app/scripts/lib/localize-count.js"),{asNumber:k}=i("./packages/i18n/formatters.ts"),y=i("./app/scripts/views/internal/view-with-actions.js"),{latestPowerUpsMessage:j}=i("./app/scripts/data/latest-power-ups-message.js"),{Controller:C}=i("./app/scripts/controller/index.js");class x extends m{static initClass(){this.prototype.viewTitleKey="menu",this.prototype.viewIcon="member",this.prototype.className="board-menu-content-frame",this.prototype.headerDisplayTypeClass="is-board-menu-default-view",this.prototype.events={"click .js-about-this-board":"openAboutThisBoard","click .js-change-background":"changeBackground","click .js-open-power-ups"(e){return n.sendClickedLinkEvent({linkName:"boardMenuPowerUpLink",attributes:{boardId:this.model.id,organizationId:this.model.get("idOrganization")},source:"boardMenuDrawer"}),this.showPowerUps(e)},"click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore","click .js-power-up-empty-slot":"showPowerUps","click .js-enterprise-upsell-dismiss":"enterpriseUpsellDismiss","click .js-enterprise-upsell-learn-more":"enterpriseUpsellLearnMore","click .js-open-butler":"openButler"}}initialize({sidebarView:e}){this.sidebarView=e,this.numActionsToShow=15,this.makeDebouncedMethods("render","renderMembers"),this.listenTo(this.model,{"change:datePluginDisable":this.renderPowerUpDisableTimer,"change:prefs.permissionLevel":this.renderDebounced,"change:prefs.isTemplate":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount,"change:desc":this.renderAboutThisBoardSummary,"change:memberships":this.renderAboutThisBoardSummary,"change:idOrganization":()=>(this.renderButlerButton(),this.renderEnabledPowerUpCount())}),this.listenTo(o.me().organizationList,"change",(()=>this.renderDebounced())),this.listenTo(this.model.boardPluginList,{"add remove reset":e=>(this.renderEnabledPowerUpCount(),this.renderButlerButton())}),this.subscribe(v(this.model),(()=>this.renderEnabledPowerUpCount())),this.actionListView=this.collectionSubview(r,new s([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:e=>e.get("date")<this.model.get("dateLastView"),excludeTypes:["copyCommentCard"],source:"boardMenuDrawerDefaultScreen"}}),this.waitForId(this.model,(()=>(this.listenTo(this.modelCache,"add:Action:".concat(this.model.id," remove:Action:").concat(this.model.id," change:Action:").concat(this.model.id),this.frameDebounce((()=>(this.renderActionCount(),this.actionListView.collection.reset(this.getActions()))))),this.actionListView.collection.reset(this.getActions())))),this.enterpriseUpsellsEnabled=this.model.canUpsellToEnterprise()&&f.get("enterprise.up_sells",!1)}renderAboutThisBoardSummary(){const e=this.model.isMember(o.me()),t=this.model.get("desc").length>0;return this.$(".board-menu-about-this-board-summary").toggleClass("hide",t||!e),this}render(){const e=o.me(),t={editable:this.model.editable(),hasPaidOrgPowerUps:e.hasPaidOrgPowerUps(),hasGoldPowerUps:e.isFeatureEnabled("threePlugins"),isTemplate:this.model.isTemplate(),showEnterpriseUpsell:this.enterpriseUpsellsEnabled};if(this.$el.html(b(t)),this.enterpriseUpsellsEnabled){const e=this.model.get("idOrganization");n.sendScreenEvent({name:"boardMenuDrawerEnterpriseUpsellInlineDialog",containers:{organization:{id:e}}})}return this.$(".js-menu-action-list").length&&(this.actionListView.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount()),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this.renderPowerUpDisableTimer(),this.renderPowerUpSlots(),this.renderAboutThisBoardSummary(),this.renderButlerButton(),this}renderBackgroundPreview(){let e,t;const i=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""});if(null!=S(a[this.model.getPref("background")],(e=>e.tile)))t=this.model.getPref("backgroundImage");else if(null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")){let e,i;t=null!=(e=null!=(i=S(u.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400),(e=>e.url)))?i:this.model.get("fullSizeUrl"))?e:this.model.getPref("backgroundImage")}else e=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue");return i.css({"background-image":t?"url(".concat(t,")"):"","background-color":e}),this}getDateLastViewedActionsStorageKey(){return this.model.id?"timeLastViewedActions-".concat(this.model.id):null}setDateLastViewedActions(e){let t;null!=(t=this.getDateLastViewedActionsStorageKey())&&p.set(t,e.toISOString())}setDateLastViewedActionsAsNow(){this.setDateLastViewedActions(new Date)}getDateLastViewedActions(){let e;if(null!=(e=this.getDateLastViewedActionsStorageKey())){let t;if(null!=(t=p.get(e)))return new Date(t)}return null}renderActionCount(){if(!this.$(".js-unread-activity-count").length)return;this.$(".js-unread-activity-count").empty();let e=this.getDateLastViewedActions();null==e&&(e=new Date,this.setDateLastViewedActions(e));const t=t=>{const i=new Date(t.get("date"))>e,s=t.get("idMemberCreator")!==o.me().id;return i&&s};let s=0;for(const e of Array.from(this.model.getActions()))t(e)&&s++;0<s&&s<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow();let r=s;s>=50&&(r="".concat(50,"+")),s>this.numActionsToShow&&this.$(".js-unread-activity-count").text(r);const n={count:r,hasCount:s>this.numActionsToShow};return this.$(".js-fill-activity-button").empty().append(g.fill(i("./app/scripts/views/templates/board_menu_more_activity_button.js"),n)),this}renderPowerUpDisableTimer(){const e=this.model.daysUntilPluginsDisable();return null!==e?this.$(".js-power-up-disable-timer").removeClass("hide").text(w("days remaining",e)):this.$(".js-power-up-disable-timer").addClass("hide")}getEnabledPowerUpCount(){return(this.model.get("powerUps")?this.model.get("powerUps").length:0)+this.model.powerUpsCount()}renderButlerButton(){return this.$(".js-butler-button").toggleClass("hide",!this.model.isButlerCore())}renderEnabledPowerUpCount(){const e=o.me();if(e&&j&&!e.isDismissed(j))this.$(".js-enabled-power-up-count").text(""),this.$(".js-power-up-new").removeClass("hide");else{this.$(".js-power-up-new").addClass("hide");const e=this.getEnabledPowerUpCount();e>0?this.$(".js-enabled-power-up-count").text(k(e)):this.$(".js-enabled-power-up-count").text("")}return this}renderActions(){return this.actionListView.render(),this}showPowerUps(e){u.stop(e);const t=o.me();t&&j&&!t.isDismissed(j)&&t.dismiss(j);const i=this.sidebarView.getBoardView();var s,r;(i.toggleDirectory(),this.model.canEnableAdditionalPowerUps())||n.sendTrackEvent({action:"exceeded",actionSubject:"powerUpLimit",source:"inBoardPowerUpDirectory",containers:{board:{id:this.model.id},organization:{id:null===(s=this.model)||void 0===s?void 0:s.get("idOrganization")},enterprise:{id:null===(r=this.model)||void 0===r?void 0:r.get("idEnterprise")}},attributes:{fromBoardMenu:!0,fromCard:!1}});if(!i.directoryView){this.$(e.target).hasClass("js-power-up-empty-slot")?n.sendClickedButtonEvent({buttonName:"emptyPowerUpSlotButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}}}):this.sidebarView.sendClickedDrawerNavItemEvent("default","powerUpDirectory")}}showCardFilter(e){u.stop(e),this.sidebarView.pushView("filter")}openStickers(e){u.stop(e),this.sidebarView.pushView("stickers")}openAboutThisBoard(e){u.stop(e),this.sidebarView.pushView("about")}changeBackground(e){u.stop(e),this.sidebarView.pushView("background")}openActivity(e){u.stop(e),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow()}openMore(e){u.stop(e),this.sidebarView.pushView("more")}remove(){return"function"==typeof this.unmountBCPrompt&&this.unmountBCPrompt(),this.setDateLastViewedActionsAsNow(),super.remove(...arguments)}renderPowerUpSlots(){const e=this.$(".js-power-up-slots-container"),t=this.subview(l,this.model);return this.appendSubview(t,e)}enterpriseUpsellDismiss(){const e=this.model.get("idOrganization");return o.me().dismiss("enterprise-upsell-board-sidebar"),n.sendDismissedComponentEvent({componentType:"inlineDialog",componentName:"boardMenuDrawerEnterpriseUpsellInlineDialog",containers:{organization:{id:e}}}),this.$(".enterprise-up-sell.on-board").remove()}enterpriseUpsellLearnMore(){var e,t,i,s;const r=this.model.get("idOrganization"),o=null!==(e=this.model)&&void 0!==e&&null!==(t=e.getOrganization())&&void 0!==t&&t.isBusinessClass()?"bc":null!==(i=this.model)&&void 0!==i&&null!==(s=i.getOrganization())&&void 0!==s&&s.isStandard()?"standard":"free";return n.sendClickedLinkEvent({linkName:"learnMoreLink",source:"boardMenuDrawerEnterpriseUpsellInlineDialog",containers:{organization:{id:r,type:o}}}),window.open("/enterprise?app_source=board_sidebar&org_id=".concat(r,"&org_type=").concat(o))}openButler(e){return f.get("workflowers.new-butler-board-button",!1)?C.getCurrentBoardView().toggleButlerView(this.model.id):c.one({plugin:d,command:"show-settings",board:this.model,el:e.currentTarget})}}function S(e,t){return null!=e?t(e):void 0}x.initClass(),h.extend(x.prototype,y),e.exports=x},"./app/scripts/views/board-menu/board-sidebar-power-up-slot-view.js":function(e,t,i){let s;const{Analytics:r}=i("./packages/atlassian-analytics/index.ts"),n=i("./app/scripts/views/directory/directory-plugin-item-view.js"),o=i("./app/scripts/views/lib/pop-over.js"),a=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_power_up_slot"),{Controller:l}=i("./app/scripts/controller/index.js"),{navigate:d}=i("./app/scripts/controller/navigate.js"),c=i("./packages/config/index.ts").mapPowerUpId,p=a.renderable((({id:e,name:t,icon:i})=>a.a(".board-menu-navigation-item-link.mod-enabled",{href:"#"},(function(){return a.span(".board-menu-navigation-item-link-icon.mod-enabled",{style:"background-image: url(".concat(i.url,")")}),a.raw("&nbsp;"),a.text(t)}))));e.exports=(s=class extends n{static initClass(){this.prototype.tagName="li",this.prototype.className="board-menu-navigation-item mod-power-up-slot",this.prototype.events={click:"toggleOptions"}}initialize({plugin:e}){return this.plugin=e,super.initialize(...arguments)}showListingOption(){return this.plugin.id!==c}navigateToListing(){const e=l.getBoardUrl(this.model.id,"power-up",[this.plugin.id]);return d(e,{trigger:!0}),o.hide(),r.sendClickedButtonEvent({buttonName:"powerUpSlotButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}},attributes:{powerUpId:this.plugin.id}})}render(){return this.$el.html(p({id:this.plugin.id,name:this.plugin.get("name"),icon:this.plugin.get("icon")})),this}},s.initClass(),s=s)},"./app/scripts/views/board-menu/board-sidebar-power-up-slots-view.js":function(e,t,i){const s=i("./node_modules/underscore/underscore.js"),r=i("./node_modules/react/index.js"),{Analytics:n}=i("./packages/atlassian-analytics/index.ts"),{Auth:o}=i("./app/scripts/db/auth.js"),a=i("./app/scripts/views/board-menu/board-sidebar-power-up-slot-view.js"),{Controller:l}=i("./app/scripts/controller/index.js"),{MemberState:d}=i("./app/scripts/view-models/member-state.js"),c=i("./app/scripts/views/internal/plugins/plugin-runner.js"),p=i("./app/scripts/views/internal/plugins/plugins-changed-signal.js"),u=i("./node_modules/bluebird/js/browser/bluebird.js"),m=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_power_up_slot"),{BoardSidebarPuPUpsell:h}=i("./app/scripts/views/board-menu/BoardSidebarPuPUpsell.tsx"),{renderUpgradePrompt:g}=i("./app/src/components/UpgradePrompts/renderUpgradePrompt.ts"),b=i("./app/scripts/lib/util/index.js"),v=i("./app/scripts/views/internal/view.js"),f=m.renderable((()=>m.li(".board-menu-navigation-item.mod-power-up-slot.js-empty-slot-upsell"))),w=m.renderable((({index:e})=>m.li(".board-menu-navigation-item.mod-power-up-slot",(()=>m.a(".board-menu-navigation-item-link.js-power-up-empty-slot",{href:"#"},(function(){return m.span(".board-menu-navigation-item-link-icon",(function(){if(null!=e)return m.text(e)})),m.raw("&nbsp;"),m.format("add-power-up")})))))),k=m.renderable((function(){return m.ul(".board-menu-navigation.js-power-up-slots"),m.ul(".board-menu-navigation.js-upsell-slots"),m.ul(".board-menu-navigation",(function(){return m.li(".board-menu-navigation-item.mod-power-up-slot.js-show-fewer.hide",(()=>m.a(".board-menu-navigation-item-link",{href:"#"},(function(){return m.raw("&nbsp;"),m.format("show-fewer-power-ups")})))),m.li(".board-menu-navigation-item.mod-power-up-slot.js-show-more.hide",(()=>m.a(".board-menu-navigation-item-link",{href:"#"},(function(){return m.raw("&nbsp;"),m.format("view-all-power-ups")}))))}))}));class y extends v{static initClass(){this.prototype.events={"click .js-show-fewer":"showFewer","click .js-show-more":"showMore"}}initialize(){this.collapsed=!1,this.makeDebouncedMethods("renderPowerUpSlots"),this.listenTo(this.model,{"change:idOrganization":this.renderPowerUpSlotsDebounced}),this.listenTo(this.model.boardPluginList,{"add remove reset":e=>this.renderPowerUpSlotsDebounced()}),this.subscribe(p(this.model),(()=>this.renderPowerUpSlotsDebounced())),this.listenTo(d,{"change:idBoardCollapsedPowerUps":this.renderPowerUpSlotsDebounced})}remove(){return"function"==typeof this.unmountPupPrompt&&this.unmountPupPrompt(),super.remove(...arguments)}showFewer(e){return b.stop(e),n.sendClickedButtonEvent({buttonName:"showFewerPowerUpsButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}}}),d.pushBoardCollapsedPowerUps(this.model.id)}showMore(e){return b.stop(e),n.sendClickedButtonEvent({buttonName:"showAllPowerUpsButton",source:"boardMenuDrawerDefaultScreen",containers:{board:{id:this.model.id}}}),d.pullBoardCollapsedPowerUps(this.model.id)}isCollapsed(){return d.inSet("idBoardCollapsedPowerUps",this.model.id)}renderPowerUpSlots(){const e=this.isCollapsed();let t=this.model.boardPluginList.models;return t=t.filter((e=>!(this.model.isButlerCore()&&e.isButler()||this.model.isMapCore()&&e.isMap()||this.model.isCustomFieldsCore()&&e.isCustomFields()))),u.map(t,(e=>c.getOrLoadPlugin(this.model,e.get("idPlugin")))).map((e=>this.subview(a,this.model,{plugin:e,currentPage:"board view"},e.id))).then((t=>{let i=t;return e&t.length>3&&(i=s.first(t,3)),this.ensureSubviews(i,this.$(".js-power-up-slots"))})).finally((()=>{let t;const i=this.$(".js-upsell-slots");"function"==typeof this.unmountPupPrompt&&this.unmountPupPrompt(),i.empty();const n=this.model.powerUpsCount(),a=n>3&&!e;this.$(".js-show-fewer").toggleClass("hide",!a);const d=n>3&&e;this.$(".js-show-more").toggleClass("hide",!d);const c=o.me(),p=this.model.getOrganization(),u=null!=(t=null!=p?p.isPremium():void 0)&&t;if(this.model.canEnableAdditionalPowerUps()){let e=1;c.isFeatureEnabled("threePlugins")&&(e=3-n),c.getPowerUpsLimit(p)>=3&&(e=n<3?3-n:1),s.times(e,(e=>i.append(w({index:u?void 0:e+1+n}))))}const m=p?l.getOrganizationBillingUrl(p):void 0,b=p?p.id:void 0;return i.append(f()),this.unmountPupPrompt=g(r.createElement(h,{billingUrl:m,orgId:b}),i.find(".js-empty-slot-upsell")[0],{boardModel:this.model})}))}render(){return this.$el.html(k()),this.renderPowerUpSlots(),this}}y.initClass(),e.exports=y},"./app/scripts/views/board-menu/board-sidebar-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),r=i("./node_modules/react/index.js"),n=i("./packages/react-dom-wrapper/index.ts"),o=i("./app/scripts/views/archive/archive-view.js"),{Auth:a}=i("./app/scripts/db/auth.js"),l=i("./app/scripts/views/board-menu/board-menu-about-this-board-view.js"),d=i("./app/scripts/views/board-menu/board-labels-view.js"),c=i("./app/scripts/views/board-menu/board-menu-activity-view.js"),p=i("./app/scripts/views/board-menu/board-sidebar-default-view.js"),u=i("./app/scripts/views/board-menu/board-settings-view.js"),m=i("./app/scripts/views/board-menu/board-menu-more-view.js"),h=i("./app/scripts/views/board-menu/board-collections-view.js"),g=i("./app/scripts/views/board-menu/card-filter-view.js"),b=i("./app/scripts/views/board-menu/change-board-background-view.js"),v=i("./app/scripts/views/board-menu/change-board-background-select-view.js"),{Key:f,registerShortcut:w,Scope:k,unregisterShortcut:y}=i("./packages/keybindings/index.ts"),j=i("./app/scripts/views/lib/pop-over.js"),C=i("./app/scripts/views/board-menu/sticker-picker-view.js"),x=i("./app/scripts/lib/util/index.js"),S=i("./app/scripts/views/internal/view.js"),_=i("./node_modules/underscore/underscore.js"),{featureFlagClient:E}=i("./packages/feature-flag-client/index.ts"),T=i("./app/scripts/views/internal/templates.js"),{Analytics:P}=i("./packages/atlassian-analytics/index.ts"),{renderComponent:A}=i("./app/src/components/ComponentWrapper/index.ts"),{LazyTemplateTipsPopover:O}=i("./app/src/components/TemplateTips/LazyTemplateTipsPopover.tsx"),D=E.getTrackedVariation("board-header-filtering-experiment",!1),B=E.get("ecosystem.board-header-filter",!1);class N extends S{static initClass(){this.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView"},this.prototype.className="board-menu-container",this.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible(e){const t=e.$(".js-autofocus")[0];return x.setCaretAtEnd(t)}},more:{didBecomeVisible:e=>e.selectUrl()},archive:{didBecomeVisible(e){const t=e.$(".js-autofocus")[0];return x.setCaretAtEnd(t)},didBecomeRemoved:e=>(e.removeSubviews(),e.remove())}}}constructor(e){super(e),D||B||(this.onShortcut=this.onShortcut.bind(this),w(this.onShortcut,{scope:k.Sidebar,key:f.f}))}initialize({boardView:e}){this.boardView=e,this.listenTo(this.model,{"change:prefs.isTemplate"(){return this.handleTemplateMode(),this.renderTemplateTips()}}),this.listenTo(this.model,{"change:prefs.permissionLevel"(){return this.renderTemplateTips()}}),this.aboutView=this.subview(l,this.model,{sidebarView:this}),this.defaultView=this.subview(p,this.model,{sidebarView:this});const t=this.model.isTemplate();if(t&&!(null!=this.model?this.model.isMember(a.me()):void 0))this.viewStack=[{name:"about",view:this.aboutView}];else{this.viewStack=[{name:"default",view:this.defaultView}];const e=!!this.model.get("desc")||this.model.ownedByMember(a.me());(this.model.isPublic()&&e||t)&&this.pushView("about",{},{easeIn:!1,showSidebar:this.model.viewState.get("showSidebar")})}}remove(){D||B||y(this.onShortcut);const e=this.viewNamed("archive",{});return this.hackySidebarLifetimeEvents.archive.didBecomeRemoved(e),super.remove(...arguments)}onShortcut(){return this.pushView("filter"),P.sendPressedShortcutEvent({shortcutName:"searchAndFilterCardsShortcut",source:"boardScreen",keyValue:"F"})}render(){return this.$el.html(T.fill(i("./app/scripts/views/templates/board_sidebar.js"))),this.defer((()=>this.renderView())),this}sidebarSubviews(){return{default:p,filter:g,about:l,archive:o,stickers:C,labels:d,background:b,backgroundColors:v,backgroundPhotos:v,activity:c,more:m,settings:u,collections:h}}viewNamed(e,t){for(const{name:t,view:i}of Array.from(this.viewStack))if(e===t)return i;const i=_.result(this,"sidebarSubviews")[e];if(null==i)throw new Error("Unknown sidebar view ".concat(e));const s="filter"===e?this.model.filter:this.model;return new i(_.extend({model:s,modelCache:this.modelCache,sidebarView:this,viewState:null!=t?t.viewState:void 0},t))}topSidebarView(){return _.last(this.viewStack).view}topSidebarViewOptions(){return _.last(this.viewStack).options}topSidebarViewName(){return _.last(this.viewStack).name}getScreenFromViewName(e){null==e&&(e=this.topSidebarViewName());const t=e[0].toUpperCase()+e.slice(1);return"boardMenuDrawer".concat(t,"Screen")}sendDrawerScreenEvent(e,t){return P.sendScreenEvent({name:this.getScreenFromViewName(),containers:{board:{id:this.model.id},organization:{id:L(this.model.getOrganization(),(e=>e.id))||""}},attributes:{previousDrawerScreen:this.getScreenFromViewName(e),drawerNavigationMethod:t}})}renderView(e){null==e&&(e={});const{direction:t,callOnce:i,easeIn:r}=e,n=this.$(".js-board-menu-title"),o=this.$(".js-board-menu-title-text").empty(),a=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),l=this.topSidebarView();this.$(".board-menu-header").toggleClass("no-transition",!r),a.toggleClass("no-padding",!0===l.noPadding),null!=l.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(l.headerDisplayTypeClass):1===this.viewStack.length?this.$(".js-board-menu-title").addClass("is-board-menu-default-view"):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view");const d=l.renderIfNecessary().$el;null!=t&&d.addClass(t);const c=l.getViewTitle();return c?(n.addClass("is-in-frame"),o.append(c)):n.removeClass("is-in-frame"),a.append(d),null!=i&&s(".board-menu-content-frame").one("transitionend webkitTransitionEnd",(e=>i(l))),this.defer((()=>{if(null!=t)return d.removeClass(t)})),l.delegateEvents(),this}renderTemplateTips(){return this.model.isTemplate()&&(null!=this.model?this.model.isMember(a.me()):void 0)&&(null!=this.model?this.model.isPublic():void 0)?(s(".board-wrapper").append('<div class="template-tips"></div>'),this.targetDiv=s(".template-tips")[0],A(r.createElement(O,{boardId:this.model.id,name:this.model.get("name"),username:a.me().get("username"),toggleAboutThisTemplate:()=>this.pushView("about"),toggleBackgroundSelector:()=>this.pushView("background"),isInGallery:!!this.model.get("templateGallery")}),this.targetDiv)):this.targetDiv?(n.unmountComponentAtNode(this.targetDiv),this.targetDiv=null):void 0}pushView(e,t,i){let r;null==t&&(t={}),null==i&&(i={});let{animate:n,showSidebar:o,easeIn:a}=i;null==n&&(n=!0),null==o&&(o=!0),null==a&&(a=!0);const l=this.viewNamed(e,t),d=null!=L(null!=this.hackySidebarLifetimeEvents?this.hackySidebarLifetimeEvents[e]:void 0,(e=>e.didBecomeVisible))?L(null!=this.hackySidebarLifetimeEvents?this.hackySidebarLifetimeEvents[e]:void 0,(e=>e.didBecomeVisible)):function(){},c=l===this.topSidebarView(),p=this.model.viewState.get("showSidebar");if(p?c?d(l):r=d:s(".board-menu").one("transitionend webkitTransitionEnd",(e=>d(l))),o&&!p&&this.model.viewState.setShowSidebar(!0),c)return;const u=this.topSidebarViewName();this.viewStack.push({name:e,view:l,options:t});const m=n?"is-right-of-frame":void 0;this.renderView({direction:m,callOnce:r,easeIn:a}),this.sendDrawerScreenEvent(u,"push"),j.hide()}popView(){if(1===this.viewStack.length)return;const e=L(this.topSidebarViewOptions(),(e=>e.resetTo));if(e)return this.resetTo(e);const t=this.topSidebarViewName();this.topSidebarView().remove(),this.viewStack.pop(),this.renderView({animate:"is-left-of-frame",easeIn:!0}),this.sendDrawerScreenEvent(t,"back"),j.hide()}resetTo(e,t){null==t&&(t={});let{animate:i}=t;null==i&&(i=!0);const s=this.topSidebarViewName();for(;1!==this.viewStack.length;)this.viewStack.pop();e&&this.pushView(e,{},t),this.renderView({animate:i?"is-left-of-frame":void 0}),this.sendDrawerScreenEvent(s,"reset"),j.hide()}hideSidebar(){this.model.viewState.setShowSidebar(!1),P.sendClickedButtonEvent({buttonName:"boardMenuDrawerCloseButton",source:this.getScreenFromViewName(),containers:{board:{id:this.model.id},organization:{id:L(this.model.getOrganization(),(e=>e.id))}}})}getBoardView(){return this.boardView}handleTemplateMode(){const e=this.model.isTemplate();return e&&!this.model.owned()?(this.viewStack=[{name:"about",view:this.aboutView}],this.renderView()):e||"about"===this.topSidebarViewName()?(this.viewStack=[{name:"default",view:this.defaultView}],this.pushView("about",{},{easeIn:!1,showSidebar:this.model.viewState.get("showSidebar")})):void 0}sendClickedDrawerNavItemEvent(e,t,i){null==i&&(i={}),e=e[0].toUpperCase()+e.slice(1).toLowerCase();const s={action:"clicked",actionSubject:"drawerNavigationItem",actionSubjectId:(t=t[0].toLowerCase()+t.slice(1))+"DrawerNavigationItem",source:"boardMenuDrawer".concat(e,"Screen"),containers:{board:{id:this.model.id},organization:{id:L(this.model.getOrganization(),(e=>e.id))}}};return Object.keys(i).length&&(s.attributes=i),P.sendUIEvent(s)}}function L(e,t){return null!=e?t(e):void 0}N.initClass(),e.exports=N},"./app/scripts/views/board-menu/change-board-add-member-perms-view.js":function(e,t,i){let s;const r=i("./app/scripts/views/board-menu/change-board-perms-view.js");e.exports=(s=class extends r{static initClass(){this.prototype.viewTitleKey="add member permissions"}getTemplate(){return i("./app/scripts/views/templates/board_menu_invitations.js")}getPerm(){return"invitations"}},s.initClass(),s=s)},"./app/scripts/views/board-menu/change-board-background-colors-component-view.js":function(e,t,i){function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}const{Backgrounds:r}=i("./app/scripts/data/backgrounds.js"),n=i("./node_modules/react/index.js"),o=i("./node_modules/underscore/underscore.js"),{Analytics:a}=i("./packages/atlassian-analytics/index.ts"),{featureFlagClient:l}=i("./packages/feature-flag-client/index.ts"),d=[],c=[];for(const e in r){const t=r[e];"default"===t.type&&d.push({key:e,name:e,color:t.color}),"gradient"===t.type&&c.push({key:e,name:e,gradient:t.path,color:t.color,emoji:t.emoji})}const p=({setBackgroundColor:e,name:t,color:i,boardId:s,size:r})=>n.createElement("div",{onClick:function(){const r=a.startTask({taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundColorsScreen"});e(t,i,{taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundColorsScreen",traceId:r,next:(e,i)=>{i&&a.sendUpdatedBoardFieldEvent({field:"background",value:t,source:"boardMenuDrawerBackgroundColorsScreen",containers:{board:{id:s}},attributes:{backgroundType:"color"}})}})},className:"board-backgrounds-section-tile board-backgrounds-section-tile-".concat(r)},n.createElement("div",{className:"image",style:{backgroundColor:i}})),u=({setBackgroundGradient:e,name:t,gradient:i,color:s,emoji:r,boardId:o,size:l})=>n.createElement("div",{onClick:function(){const r=a.startTask({taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundColorsScreen"});e(t,i,s,{taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundColorsScreen",traceId:r,next:(e,i)=>{i&&a.sendUpdatedBoardFieldEvent({field:"background",value:t,source:"boardMenuDrawerBackgroundColorsScreen",containers:{board:{id:o}},attributes:{backgroundType:"gradient"}})}})},className:"board-backgrounds-section-tile board-backgrounds-section-tile-".concat(l)},n.createElement("div",{className:"image",style:{backgroundColor:s,backgroundImage:"url(".concat(i,")")}},n.createElement("span",{className:"emoji"},r)));class m extends n.Component{static initClass(){this.prototype.displayName="ColorsView"}render(){const{setBackgroundColor:e,setBackgroundGradient:t}=this.props;return l.get("aaaa.web.board-bkgd-gradients",!1)?n.createElement("div",null,n.createElement("div",{className:"board-backgrounds-section-tiles"},c.map((e=>n.createElement(u,s({},o.extend({setBackgroundGradient:t},e),{size:"large"}))))),n.createElement("hr",{className:"board-menu-header-divider"}),n.createElement("div",{className:"board-backgrounds-section-tiles"},d.map((t=>n.createElement(p,s({},o.extend({setBackgroundColor:e},t),{size:"small"})))))):n.createElement("div",null,n.createElement("div",{className:"board-backgrounds-section-tiles"},d.map((t=>n.createElement(p,s({},o.extend({setBackgroundColor:e},t),{size:"large"}))))))}}m.initClass(),e.exports=m},"./app/scripts/views/board-menu/change-board-background-photos-component-view/index.js":function(e,t,i){const s=i("./node_modules/react/index.js"),{l:r}=i("./app/scripts/lib/localize.js"),{debounce:n}=i("./node_modules/underscore/underscore.js"),{unsplashClient:o}=i("./packages/unsplash/index.ts"),a=i("./app/scripts/views/board-menu/change-board-background-photos-component-view/photos-list.js"),{DEFAULT_COLLECTION_ID:l}=o.constants,d=function(){const e=Math.ceil(screen.height/112*2);let t=Math.ceil(1.5*e);return t%2&&t++,t}();class c extends s.Component{static initClass(){this.prototype.displayName="PhotosView"}constructor(e){super(e);const t=e=>({connectionError:!1,id:e,images:[],isLoading:!1,marker:null,maxPage:1,page:1});this.state={collections:[t(l),t("search")],defaultCollectionActive:!0,defaultCollectionShowTitle:!1,queueID:0,searchTerm:null},this.renderList=this.renderList.bind(this),this.onSearchInputChange=this.onSearchInputChange.bind(this),this.nextPage=this.nextPage.bind(this),this.updateCollection=this.updateCollection.bind(this),this.showErrorInCollection=this.showErrorInCollection.bind(this),this.getUnsplashBackgrounds=this.getUnsplashBackgrounds.bind(this),this.bindObserver=this.bindObserver.bind(this),this.bindMarkers=this.bindMarkers.bind(this),this.debouncedGetUnsplashBackgrounds=n(this.getUnsplashBackgrounds,250)}componentDidMount(){return this.getUnsplashBackgrounds(l)}render(){const{defaultCollectionActive:e,defaultCollectionShowTitle:t,searchTerm:i}=this.state;return s.createElement("div",{className:"board-backgrounds-photos"},s.createElement("div",{className:"search-photos"},s.createElement("input",{onChange:this.onSearchInputChange,placeholder:r(["background photos","photos"]),type:"text"}),s.createElement("span",{className:"icon-sm icon-search"})),s.createElement("div",{className:"board-backgrounds-list-observer",ref:this.bindObserver},i?this.renderList("search"):void 0,t?s.createElement("div",{className:"collection-title"},r(["background photos","top picks"])):void 0,e?this.renderList(l):void 0))}renderList(e){const{boardId:t}=this.props,{collections:i}=this.state,{connectionError:r,images:n,isLoading:o,maxPage:l,page:d}=i.filter((t=>t.id===e))[0];return s.createElement(a,{boardId:t,collectionID:e,connectionError:r,images:n,isLoading:o,maxPage:l,page:d,registerMarker:this.registerMarker(e)})}onSearchInputChange(e){const{collections:t}=this.state,i=e.target.value.trim();if(this.setState({collections:t.map((function(e){return"search"===e.id&&(e.images=[],e.isLoading=!0),e})),defaultCollectionActive:!i,defaultCollectionShowTitle:!1,searchTerm:i}),i)return this.debouncedGetUnsplashBackgrounds("search")}nextPage(e){const{collections:t}=this.state,{page:i}=t.filter((t=>t.id===e))[0];return this.getUnsplashBackgrounds(e,i+1)}updateCollection(e,t,i){const s=this.state.collections.map((function(s){return s.id===e&&(s.connectionError=!1,s.images=s.images.concat(t),s.isLoading=!1,s.maxPage=i),s}));let r=!0,n=!1;return"search"===e&&(r=!s.filter((e=>"search"===e.id))[0].images.length,n=r),this.setState({collections:s,defaultCollectionActive:r,defaultCollectionShowTitle:n})}showErrorInCollection(e){return this.setState({collections:this.state.collections.map((function(t){return t.id===e&&(t.connectionError=!0,t.isLoading=!1),t}))})}getUnsplashBackgrounds(e,t){null==t&&(t=1);let{queueID:i}=this.state;const{collections:s,searchTerm:r}=this.state;return i++,this.setState({queueID:i,collections:s.map((function(i){return i.id===e&&(i.page=t,i.isLoading=!0),i}))}),("search"===e?o.searchPhotos(r,t,d,!0).then((({results:t,total:s})=>{if(this.state.queueID===i)return this.updateCollection(e,t,Math.ceil(s/d))})):o.getCollectionPhotos(e,t,d,"latest").then((i=>{let s=t+1;return i.length<d&&(s=t),this.updateCollection(e,i,s)}))).catch((()=>this.showErrorInCollection(e)))}registerMarker(e){return t=>{if(!t)return;const i=this.state.collections.map((function(i){return i.id===e&&(i.marker=t),i}));return this.setState({collections:i}),this.observer?this.bindMarkers():void 0}}bindObserver(e){if(this.observer||!e)return;const{collections:t}=this.state;return this.observer=new IntersectionObserver((e=>(()=>{const i=[];for(const s of Array.from(e)){const e=s.isIntersecting||s.intersectionRatio,r=t.filter((e=>e.marker===s.target))[0];e&&!r.isLoading?i.push(this.nextPage(r.id)):i.push(void 0)}return i})()),{root:e}),this.bindMarkers()}bindMarkers(){const{collections:e}=this.state;return this.observer.disconnect(),(()=>{const t=[];for(const i of Array.from(e))i.marker?t.push(this.observer.observe(i.marker)):t.push(void 0);return t})()}}c.initClass(),e.exports=c},"./app/scripts/views/board-menu/change-board-background-photos-component-view/photos-list.js":function(e,t,i){const s=i("./node_modules/react/index.js"),{l:r}=i("./app/scripts/lib/localize.js"),{unsplashClient:n}=i("./packages/unsplash/index.ts"),o=i("./app/scripts/views/board-create/photo-attribution-component.js"),{Analytics:a}=i("./packages/atlassian-analytics/index.ts");class l extends s.Component{static initClass(){this.prototype.displayName="PhotosList"}constructor(e){super(e),this.state={uploadingImageID:null},this.thumbMap=this.thumbMap.bind(this),this.addMarker=this.addMarker.bind(this)}shouldComponentUpdate(e,t){const{images:i,isLoading:s}=this.props,{uploadingImageID:r}=this.state;return i.length!==e.images.length||s!==e.isLoading||r!==t.uploadingImageID}render(){const{collectionID:e,connectionError:t,images:i,isLoading:n,maxPage:o,page:a}=this.props,l=o>a,d=n?"logo-loading active":"logo-loading";let c=i.map(this.thumbMap);return l&&(c=this.addMarker(c)),s.createElement("div",{className:"board-backgrounds-list"},c.length?c:"search"!==e||n||t?void 0:s.createElement("div",{className:"no-results"},r(["background photos","no results"])),t?s.createElement("div",{className:"error"},r(["background photos","connection error unsplash"])):void 0,s.createElement("div",{className:d}))}thumbMap(e,t){const{uploadingImageID:i}=this.state;return s.createElement("div",{className:"board-background-select",key:["thumb",t,e.id].join(":"),onClick:this.setUnsplashBackground(e)},s.createElement("span",{className:"background-box",style:{backgroundImage:"url(".concat(e.urls.thumb,")")}},i===e.id?s.createElement("div",{className:"uploading"},s.createElement("span",{className:"spinner small u-float-left"}),r(["templates","board_background_selection","uploading-ellipsis"])):s.createElement(o,{user:e.user,size:"large"})))}setUnsplashBackground(e){return()=>{const t=a.startTask({taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundPhotosScreen"}),{ApiPromise:s}=i("./app/scripts/network/api-promise.js"),{boardId:r}=this.props;return n.trackDownload(e),this.setState({uploadingImageID:e.id}),s({traceId:t,url:"/1/boards/".concat(r,"/prefs/background"),type:"post",data:{url:n.appendImageParameters(e.urls.raw)}}).then((()=>{a.sendUpdatedBoardFieldEvent({field:"background",value:"unsplash-".concat(e.id),source:"boardMenuDrawerBackgroundPhotosScreen",containers:{board:{id:r}},attributes:{backgroundType:"photo"}}),a.taskSucceeded({taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundPhotosScreen",traceId:t})})).catch((e=>{throw a.taskFailed({taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundPhotosScreen",traceId:t,error:e})})).finally((()=>this.setState({uploadingImageID:null})))}}addMarker(e){const{registerMarker:t}=this.props,i=s.createElement("div",{key:"marker",className:"scroll-marker",ref:t});return e.splice(-8,0,i),e}}l.initClass(),e.exports=l},"./app/scripts/views/board-menu/change-board-background-select-view.js":function(e,t,i){const s=i("./app/scripts/views/board-menu/change-board-background-colors-component-view.js"),r=i("./app/scripts/views/board-menu/change-board-background-photos-component-view/index.js"),n=i("./node_modules/react/index.js"),o=i("./packages/react-dom-wrapper/index.ts"),a=i("./app/scripts/views/internal/view.js"),l=i("./node_modules/xtend/immutable.js"),{unsplashClient:d}=i("./packages/unsplash/index.ts"),c={colors:s,photos:r},p=function(e){const t={};for(const i in e){const s=e[i];i.indexOf("background")>-1&&(t[i]=s)}return t};class u extends a{static initClass(){this.prototype.viewTitleArguments={unsplashUrl:d.attributionUrl},this.prototype.className="board-menu-content-frame"}viewTitleKey(){return"colors"===this.options.component?"change background colors":"change background photos"}initialize(){this.listenTo(this.model,"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness",this.frameDebounce(this.render))}render(){const e={boardId:this.model.id,backgroundPrefs:p(this.model.attributes.prefs)};"colors"===this.options.component&&(e.setBackgroundColor=(e,t,i)=>{this.model.set({prefs:l(this.model.get("prefs"),{background:e,backgroundColor:t,backgroundImage:null,backgroundImageScaled:null})}).setPrefWithTracing("background",e,i)},e.setBackgroundGradient=(e,t,i)=>{this.model.set({prefs:l(this.model.get("prefs"),{background:e,backgroundColor:i,backgroundImage:t,backgroundImageScaled:null})}).setPref("background",e)});const t=n.createElement(c[this.options.component],e);return o.render(t,this.el),this}}u.initClass(),e.exports=u},"./app/scripts/views/board-menu/change-board-background-view.js":function(e,t,i){const s=i("./node_modules/react/index.js"),r=i("./app/scripts/views/lib/alerts.js"),{Analytics:n}=i("./packages/atlassian-analytics/index.ts"),{Auth:o}=i("./app/scripts/db/auth.js"),{ModelLoader:a}=i("./app/scripts/db/model-loader.js"),l=i("./app/scripts/views/board-menu/select-custom-background-view.js"),d=i("./app/scripts/lib/util/index.js"),c=i("./app/scripts/views/internal/view.js"),p=i("./node_modules/underscore/underscore.js"),{dontUpsell:u}=i("./packages/browser/index.ts"),m=i("./app/scripts/views/templates/product_promo_disable_overlay.js"),h=i("./app/scripts/views/templates/board_change_background.js"),g=i("./app/scripts/views/board-menu/board-add-to-team-view.js"),{renderComponent:b}=i("./app/src/components/ComponentWrapper/index.ts"),{FeatureId:v,NewPill:f}=i("./app/src/components/NewFeature/index.ts"),w=i("./packages/react-dom-wrapper/index.ts"),{featureFlagClient:k}=i("./packages/feature-flag-client/index.ts");class y extends c{static initClass(){this.prototype.viewTitleKey="change background",this.prototype.className="board-menu-content-frame",this.prototype.events={"click .js-bg-colors":"openBackgroundColors","click .js-bg-photos":"openBackgroundPhotos","change .js-upload-image":"setUploadImage"}}initialize({sidebarView:e}){var t,i;this.sidebarView=e,super.initialize(...arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(o.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),this.listenTo(this.model,"cancel-add-to-team",(()=>(this.addToTeam=!1,this.render()))),(o.me().hasPremiumFeature("customBoardBackgrounds")||null!==(t=this.model)&&void 0!==t&&null!==(i=t.getOrganization())&&void 0!==i&&i.hasPremiumFeature("customBoardBackgrounds"))&&a.loadMemberCustomBackgrounds(o.myId()).done()}fillBackgroundList(e,t,i){null==i&&(i=l),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(Array.from(t).map((e=>this.subview(i,e,{board:this.model}))),e)}render(){var e,t;this.$el.empty();const i=this.model.toJSON();return i.enabled_customBoardBackgrounds=o.me().hasPremiumFeature("customBoardBackgrounds")||(null===(e=this.model)||void 0===e||null===(t=e.getOrganization())||void 0===t?void 0:t.hasPremiumFeature("customBoardBackgrounds")),i.idMember=o.myId(),i.upsellEnabled=!u(),this.addToTeam?(a.loadMyOrganizations(),this.$el.parent().addClass("no-padding"),this.appendSubview(this.subview(g,this.model,{menuType:"Change Background"}))):(this.$el.html(h(i)),this.renderCustomBackgrounds()),this.renderGradientsNewPill(),this}remove(){this.removeGradientsNewPill(),super.remove(...arguments)}renderCustomBackgrounds(){var e,t;const i=o.me().hasPremiumFeature("customBoardBackgrounds")||(null===(e=this.model)||void 0===e||null===(t=e.getOrganization())||void 0===t?void 0:t.hasPremiumFeature("customBoardBackgrounds")),s=this.$(".js-custom-list");if(i){const e=this.modelCache.get("Member",o.myId()).boardBackgroundList.chain().filter((e=>"custom"===e.get("type"))).sortBy("id").reverse().value();this.fillBackgroundList(s,e,l),s.find(".js-uploader").prependTo(s)}else s.append(m());return this}uploadBackgroundsAndAddPreviews(e){return Array.from(e).map(((e,t)=>(t=>{var i,s;const a=new FileReader;if(!d.validFileSize(e))return void r.flash("file too large","error","change-board-background");const l=n.startTask({taskName:"create-attachment/boardBackground",source:"boardMenuDrawerBackgroundUploadScreen"}),c=new FormData;c.append("token",o.myToken()),c.append("file",e);const u=null===(i=this.model)||void 0===i||null===(s=i.getOrganization())||void 0===s?void 0:s.id;return u&&c.append("idOrganization",u),a.onload=e=>this.modelCache.get("Member",o.myId()).boardBackgroundList.createWithTracing({type:"custom",fullSizeUrl:e.target.result},{data:c,processData:!1,contentType:!1,traceId:l,error:(e,t)=>{n.taskFailed({taskName:"create-attachment/boardBackground",source:"boardMenuDrawerBackgroundUploadScreen",traceId:l,error:t}),e.set("error","Failed"),this.setTimeout((()=>e.destroy()),5e3)},success:e=>{const t=this.model;return p.extend(t.attributes.prefs,{backgroundColor:e.get("color"),backgroundImage:e.get("fullSizeUrl"),backgroundImageScaled:e.get("scaled"),backgroundTile:e.get("tile"),backgroundBrightness:e.get("brightness")}),t.setPrefWithTracing("background",e.id,{taskName:"create-attachment/boardBackground",source:"boardMenuDrawerBackgroundUploadScreen",traceId:l,next:(e,t)=>{var i,s;t&&n.sendTrackEvent({action:"uploaded",actionSubject:"background",source:"boardMenuDrawerBackgroundUploadScreen",containers:{board:{id:this.model.id},organization:{id:null===(i=this.model)||void 0===i||null===(s=i.getOrganization())||void 0===s?void 0:s.id}},attributes:{backgroundType:"custom"}})}})}}),a.readAsDataURL(e)})()))}setUploadImage(e){d.stop(e);const t=this.$(".js-upload-image");if(null==t.prop("files")&&t.val())return void d.uploadFile(o.myToken(),t,(function(){}));const{files:i}=t[0];i.length>0&&this.uploadBackgroundsAndAddPreviews(i)}openBackgroundColors(e){d.stop(e),this.sidebarView.pushView("backgroundColors",{component:"colors"})}openBackgroundPhotos(e){d.stop(e),this.sidebarView.pushView("backgroundPhotos",{component:"photos"})}renderGradientsNewPill(){const e=this.$(".js-gradients-new-lozenge")[0];k.get("aaaa.web.board-bkgd-gradients",!1)&&e&&b(s.createElement(f,{featureId:v.BoardBkgdGradients,source:"boardMenuDrawerBackgroundScreen"}),e)}removeGradientsNewPill(){const e=this.$(".js-gradients-new-lozenge")[0];e&&w.unmountComponentAtNode(e)}}y.initClass(),e.exports=y},"./app/scripts/views/board-menu/change-board-commenting-perms-view.js":function(e,t,i){let s;const r=i("./app/scripts/views/board-menu/change-board-perms-view.js");e.exports=(s=class extends r{static initClass(){this.prototype.viewTitleKey="commenting permissions"}getTemplate(){return i("./app/scripts/views/templates/board_menu_commenting.js")}getPerm(){return"comments"}},s.initClass(),s=s)},"./app/scripts/views/board-menu/change-board-perms-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),{Analytics:r}=i("./packages/atlassian-analytics/index.ts"),n=i("./app/scripts/views/internal/board-display-helpers.js"),o=i("./app/scripts/views/lib/pop-over.js"),a=i("./app/scripts/lib/util/index.js"),l=i("./app/scripts/views/internal/view.js"),d=i("./app/scripts/views/internal/templates.js");class c extends l{static initClass(){this.prototype.viewTitleKey="change permissions",this.prototype.events={"click .js-select":"selectPerm"}}initialize(){this.listenTo(this.model,"change",this.frameDebounce(this.render))}render(){let e;const t=this.model.toJSON({prefs:!0,url:!0});t.cardCovers=t.prefs.cardCovers;const i=this.model.getOrganization();t.hasOrg=null!=(t.idOrganization?t.idOrganization:void 0),t.orgCanSee=t.hasOrg&&(e=this.model.getPref("permissionLevel"),["public","org"].includes(e)),t.premium=null!=i?i.isFeatureEnabled("observers"):void 0,t.voting_showObservers=t.premiumFeatures.includes("observers")&&t.hasOrg,t.comments_showObservers=t.premiumFeatures.includes("observers")&&t.hasOrg,t.pLevelClass=n.getPermLevelIconClassForBoard(this.model),(null!=i?i.owned():void 0)?(t.orgOwner=!0,t.orgName=i.get("displayName"),this.model.owned()||(t.setOrgNull=!0)):this.model.owned()||(t.noEditOrg=!0);const s=this.getTemplate();return this.$el.html(d.fillMenu(s,t,{editable:this.model.editable(),owned:this.model.owned()})),this}selectPerm(e){a.stop(e);const t=s(e.target).closest(".js-select");if(t.hasClass("disabled")||t.closest(".js-disabled").length)return;const i=this.getPerm(),n="edit-board/prefs/".concat(i),l=r.startTask({taskName:n,source:"changeBoardPermissionsInlineDialog"}),d=t.attr("name");this.model.setPrefWithTracing(i,d,{taskName:n,source:"changeBoardPermissionsInlineDialog",traceId:l,next:(e,t)=>{var s;t&&r.sendUpdatedBoardFieldEvent({field:"".concat(i,"Pref"),value:d,source:"changeBoardPermissionsInlineDialog",attributes:{taskId:l},containers:{board:{id:this.model.id},organization:{id:null===(s=this.model.getOrganization())||void 0===s?void 0:s.id}}})}}),this.model.save(),o.popView()}}c.initClass(),e.exports=c},"./app/scripts/views/board-menu/custom-background-options-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),r=i("./app/scripts/views/lib/confirm.js"),n=i("./app/scripts/lib/util/index.js"),o=i("./app/scripts/views/internal/view.js"),a=i("./app/scripts/views/internal/templates.js"),{Analytics:l,tracingCallback:d}=i("./packages/atlassian-analytics/index.ts");class c extends o{static initClass(){this.prototype.viewTitleKey="background options",this.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"}}initialize(){return this.listenTo(this.model,"change",this.render)}render(){const e=this.model.toJSON();e.tile=this.model.get("tile");const t=this.model.get("brightness");return e.brightnessLight="light"===t,e.brightnessDark="dark"===t,this.$el.html(a.fill(i("./app/scripts/views/templates/board_background_options.js"),e)),this}selectOption(e){const t=s(e.target).closest(".js-select-option"),i=l.startTask({taskName:"edit-member/customBoardBackgrounds",source:"boardMenuDrawerBackgroundScreen"}),r={traceId:i};if(null!=t.attr("data-board-brightness"))r.brightness=t.attr("data-board-brightness");else if(null!=t.attr("data-background-display-type")){const e=t.attr("data-background-display-type");r.tile="tile"===e}this.model.update(r,d({taskName:"edit-member/customBoardBackgrounds",source:"boardMenuDrawerBackgroundScreen",traceId:i},((e,t)=>{t&&l.sendTrackEvent({action:"changed",actionSubject:"background",source:"boardMenuDrawerBackgroundScreen",containers:{board:{id:this.model.id}},attributes:{taskId:i,brightness:r.brightness,tile:r.tile}})})))}deleteBackground(e){return n.stop(e),r.pushView("delete background",{elem:s(e.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:e=>{const t=l.startTask({taskName:"delete-attachment/boardBackground",source:"boardMenuDrawerBackgroundScreen"});this.model.destroyWithTracing({traceId:t},d({taskName:"delete-attachment/boardBackground",source:"boardMenuDrawerBackgroundScreen",traceId:t},((e,i)=>{i&&l.sendTrackEvent({action:"deleted",actionSubject:"background",source:"boardMenuDrawerBackgroundScreen",containers:{board:{id:this.model.id}},attributes:{backgroundType:"custom",taskId:t}})}))),this.remove()}})}}c.initClass(),e.exports=c},"./app/scripts/views/board-menu/search-input-view.js":function(e,t,i){const{getKey:s,Key:r}=i("./packages/keybindings/index.ts"),n=i("./app/scripts/views/internal/view.js"),o=i("./app/scripts/views/templates/board_sidebar_search_input.js");class a extends n{static initClass(){this.prototype.className="board-menu-content-frame",this.prototype.events={"keyup .js-input":"keyUpEvent","keydown .js-input":"keyDownEvent","click .js-search-clear-title":"clearAndFocusInput","click .js-search-open-card-filter":"showCardFilter"}}initialize(){return this.listenTo(this.model,"change",this.renderInputIcon)}render(){return this.$el.html(o.renderInputRow({title:this.model.get("title"),showFilterButton:null!=(null!=this.options?this.options.showCardFilter:void 0)})),this.renderInputIcon(),this}renderInputIcon(){return this.$(".js-input-search-icon").html(o.renderInputIcon({title:this.model.get("title")}))}keyUpEvent(e){const t=s(e);if(![r.Escape,r.Enter,r.ArrowUp,r.ArrowDown].includes(t))return this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0})}keyDownEvent(e){if(s(e)===r.Enter)return this.showCardFilter()}clearAndFocusInput(){return this.model.save({title:""}),this.$(".js-input").val("").focus()}showCardFilter(){return e=this.options,t="showCardFilter",i=e=>e.showCardFilter(),null!=e&&"function"==typeof e[t]?i(e,t):void 0;var e,t,i}}a.initClass(),e.exports=a},"./app/scripts/views/board-menu/select-custom-background-view.js":function(e,t,i){const s=i("./app/scripts/views/board-menu/custom-background-options-view.js"),r=i("./app/scripts/views/lib/pop-over.js"),n=i("./app/scripts/lib/util/index.js"),{Analytics:o}=i("./packages/atlassian-analytics/index.ts"),a=i("./app/scripts/views/internal/templates.js"),l=i("./node_modules/underscore/underscore.js"),d=i("./app/scripts/views/internal/view.js");class c extends d{static initClass(){this.prototype.className="board-background-select js-select-background",this.prototype.events={"click .js-options":"openOptions",click:"selectBackground"}}initialize(){return this.listenTo(this.model,"change:id",this.render),this.listenTo(this.model,"change:error",this.render)}render(){const e=this.model.toJSON();if(e.pending=null==this.getId()&&null==e.error,null==e.color){var t;let i;e.backgroundImageThumbnail=null!=(i=null===(t=n.previewBetween(this.model.get("scaled"),90,60,600,400))||void 0===t?void 0:t.url)?i:this.model.get("fullSizeUrl")}return this.$el.html(a.fill(i("./app/scripts/views/templates/board_background_selection.js"),e)),this.$el.toggleClass("is-still-uploading-background",e.pending),this}openOptions(e){return n.stop(e),o.sendClickedLinkEvent({linkName:"backgroundOptionsLink",source:"boardMenuDrawerBackgroundScreen"}),r.toggle({elem:this.$(".js-options"),view:new s({model:this.model,modelCache:this.modelCache})})}getId(){return this.model.id}selectBackground(e){let t,i;if(n.stop(e),null==this.getId())return;const s=o.startTask({taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundScreen"}),{board:r}=this.options;l.extend(r.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(t=this.model.get("tile"))&&t,backgroundBrightness:null!=(i=this.model.get("brightness"))?i:"unknown"}),r.setPrefWithTracing("background",this.getId(),{taskName:"edit-board/prefs/background",source:"boardMenuDrawerBackgroundScreen",traceId:s,next:(e,t)=>{var i;t&&o.sendUpdatedBoardFieldEvent({field:"background",value:this.getId(),source:"boardMenuDrawerBackgroundScreen",containers:{board:{id:r.id},organization:{id:null===(i=r.getOrganization())||void 0===i?void 0:i.id}},attributes:{backgroundType:"custom"}})}})}}c.initClass(),e.exports=c},"./app/scripts/views/board-menu/sticker-picker-view.js":function(e,t,i){let s=i("./node_modules/underscore/underscore.js");const r=i("./packages/jquery/index.js"),n=i("./app/scripts/views/lib/alerts.js"),{Analytics:o,tracingCallback:a}=i("./packages/atlassian-analytics/index.ts"),{Auth:l}=i("./app/scripts/db/auth.js"),d=i("./app/scripts/views/stickers/custom-sticker-selection-view.js"),c=i("./app/scripts/views/lib/drag-sort.js"),{ModelLoader:p}=i("./app/scripts/db/model-loader.js"),u=i("./node_modules/bluebird/js/browser/bluebird.js"),{Sticker:m}=i("./app/scripts/models/Sticker.ts"),{Stickers:h}=i("./app/scripts/data/stickers.js"),g=i("./app/scripts/views/stickers/sticker-selection-view.js"),b=i("./app/scripts/lib/util/index.js"),v=i("./app/scripts/views/internal/view.js");s=i("./node_modules/underscore/underscore.js");const f=i("./app/scripts/views/internal/templates.js"),{l:w}=i("./app/scripts/lib/localize.js"),{dontUpsell:k}=i("./packages/browser/index.ts"),y=i("./app/scripts/views/templates/product_promo_disable_overlay.js"),j=i("./app/scripts/views/templates/sticker_select.js"),{getGiphyApi:C,giphyStickersToTrelloStickers:x,mapTrelloLocaleToGiphyLocale:S}=i("./packages/giphy/index.ts"),{getKey:_,Key:E}=i("./packages/keybindings/index.ts"),{MemberState:T}=i("./app/scripts/view-models/member-state.js"),P=i("./packages/locale/index.ts"),{isChrome:A}=i("./packages/browser/index.ts");class O extends v{static initClass(){this.prototype.viewTitleKey="stickers",this.prototype.viewIcon="sticker",this.prototype.className="board-menu-content-frame",this.prototype.events={"keyup .js-search-stickers":"onQueryChange","change .js-upload-image":"setUploadImage","change .js-use-animated-stickers":"onAnimationPreferenceChange"}}initialize(){let e;this.me=l.me();const t=null!=(e=this.model.getOrganization())?e:null;return(this.me.hasPremiumFeature("additionalStickers")||null!=t&&t.hasPremiumFeature("additionalStickers"))&&p.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers),this.searchForStickerDebounced=s.debounce(this.searchForSticker,1e3)}render(){let e;this.$el.empty();const t=null!=(e=this.model.getOrganization())?e:null,i=this.model.toJSON();return i.additionalStickersEnabled=this.me.hasPremiumFeature("additionalStickers")||(null==t?void 0:t.hasPremiumFeature("additionalStickers"))||!1,i.upsellEnabled=!k(),i.useAnimatedStickers=T.getUseAnimatedStickers(),this.$el.html(j(i)),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer((()=>c.refreshDraggableStickers())),this}_getStickers(e){const{premium:t}=h[e];return h[e].stickers.map((e=>new m(s.extend({premium:t},e),{modelCache:this.modelCache})))}_loadStickers(e){const t="sticker-list-loading";e.addClass(t);const i=e.find(".sticker-select-image").get().map((function(e){const t=r(e);return new u((function(e){return t.load(e),t.error(e)}))}));return u.all(i).then((()=>e.removeClass(t))).done()}renderStandardStickers(){const e=this.$(".js-standard-sticker-list"),t=this._getStickers("standard").map((e=>this.subview(g,e)));return this.appendSubviews(t,e),this._loadStickers(e),this}renderPremiumStickers(){let e;const t=null!=(e=this.model.getOrganization())?e:null,s=this.$(".js-premium-stickers"),n=this.me.hasPremiumFeature("additionalStickers")||(null==t?void 0:t.hasPremiumFeature("additionalStickers"))||!1;for(const e in h){const{premium:o}=h[e];if(o){const o=r(f.fill(i("./app/scripts/views/templates/sticker_pack_selection_list.js"),{displayName:w(["sticker packs",e])})),a=o.filter(".js-sticker-list"),l=this._getStickers(e).map((e=>this.subview(g,e,{org:t})));this.appendSubviews(l,a),this._loadStickers(a),s.append(o),n||a.append(y())}}return this}renderCustomStickers(){let e;const t=null!=(e=this.model.getOrganization())?e:null,s=this.$(".js-custom-sticker-list");s.children().detach();if(this.me.hasPremiumFeature("customStickers")||(null==t?void 0:t.hasPremiumFeature("customStickers"))||!1){const e=this.me.customStickerList.map((e=>this.subview(d,e,{org:t})));this.appendSubviews(e,s)}else s.append(y());return s.append(f.fill(i("./app/scripts/views/templates/sticker_select_item_upload.js"),{id:this.me.id})),this.defer((()=>c.refreshDraggableStickers())),this}setUploadImage(e){b.stop(e);const t=this.$(".js-upload-image");if(null==t.prop("files")&&t.val())return void b.uploadFile(l.myToken(),t,(function(){}));const{files:i}=t[0];i.length>0&&this.uploadStickers(i)}uploadStickers(e){s.each(e,(e=>{var t,i;const s=o.startTask({taskName:"create-attachment/sticker",source:"boardMenuDrawerStickersScreen"}),r=new FileReader;if(!b.validFileSize(e))return o.taskAborted({taskName:"create-attachment/sticker",traceId:s,source:"boardMenuDrawerStickersScreen",error:new Error("file too large"),attributes:{fileSize:e.size,fileType:e.type}}),void n.flash("file too large","error","sticker-picker");const d=new FormData;d.append("token",l.myToken()),d.append("file",e);const c=null===(t=this.model)||void 0===t||null===(i=t.getOrganization())||void 0===i?void 0:i.id;return c&&d.append("idOrganization",c),r.onload=e=>{const t=e.target.result;return this.me.customStickerList.createWithTracing({url:t},{data:d,processData:!1,contentType:!1,traceId:s,error:e=>(e.set("error","Failed"),this.setTimeout((()=>e.destroy()),5e3))},a({taskName:"create-attachment/sticker",traceId:s,source:"boardMenuDrawerStickersScreen",attributes:{fileSize:e.size,fileType:e.type}},((t,i)=>{const r=this.model;var n,a;i&&r&&o.sendTrackEvent({action:"uploaded",actionSubject:"stickerAttachment",source:"boardMenuDrawerStickersScreen",attributes:{taskId:s,fileSize:e.size,fileType:e.type},containers:{board:{id:r.id},organization:{id:null===(n=r.getOrganization())||void 0===n?void 0:n.id},enterprise:{id:null===(a=r.getEnterprise())||void 0===a?void 0:a.id}}})})))},r.readAsDataURL(e)}))}onAnimationPreferenceChange(e){return b.stop(e),T.setUseAnimatedStickers(e.target.checked)}onQueryChange(e){b.stop(e);const t=_(e);if([E.Enter,E.Escape].includes(t))return;const i=e.target.value;if(this.currentQuery!==i&&this.showSearchSpinner(),this.currentQuery=i,null!=i?i.length:void 0)return this.searchForStickerDebounced(i);this.showStaticStickers()}searchForSticker(e){if(null!=e?e.length:void 0)return C().search(e,{limit:48,rating:"g",lang:S(P.currentLocale),type:"stickers"}).then((t=>{if(e===this.currentQuery){const e=x(t.data,A());return this.renderStickerSearchResults(e)}})).catch((()=>this.renderStickerSearchResults([])))}renderStickerSearchResults(e){let t;this.$(".js-giphy-stickers-no-results").toggleClass("hide",0!==e.length);const i=null!=(t=this.model.getOrganization())?t:null,r=e.map((e=>{const t=new m(s.extend({isGiphySticker:!0,image:e.url},e),{modelCache:this.modelCache});return this.subview(g,t,{org:i})}));return this.ensureSubviews(r,this.$(".js-search-sticker-list")),this.showSearchResults(),this.defer((()=>c.refreshDraggableStickers())),this}showSearchSpinner(){return this.hideStaticStickers(),this.hideSearchResults(),this.$(".js-search-spinner").removeClass("hide")}showStaticStickers(){return this.hideSearchSpinner(),this.hideSearchResults(),this.$(".js-static-stickers").removeClass("hide")}showSearchResults(){return this.hideSearchSpinner(),this.hideStaticStickers(),this.$(".js-giphy-stickers").removeClass("hide")}hideStaticStickers(){return this.$(".js-static-stickers").addClass("hide")}hideSearchSpinner(){return this.$(".js-search-spinner").addClass("hide")}hideSearchResults(){return this.$(".js-giphy-stickers").addClass("hide")}}O.initClass(),e.exports=O},"./app/scripts/views/board/convert-board-template-view.js":function(e,t,i){const s=i("./app/scripts/views/lib/alerts.js"),{Analytics:r}=i("./packages/atlassian-analytics/index.ts"),n=i("./app/scripts/lib/util/index.js"),o=i("./app/scripts/views/internal/view.js"),a=i("./app/scripts/views/internal/templates.js");class l extends o{static initClass(){this.prototype.viewTitleKey="make template",this.prototype.events={"submit form":"convertToTemplate"}}render(){return this.$el.html(a.fill(i("./app/scripts/views/templates/board_convert_template.js"))),this}convertToTemplate(e){n.stop(e),this.$(".js-convert").prop("disabled"),s.show("converting","info","templates",1e3);const t=r.startTask({taskName:"edit-board/prefs/isTemplate",source:"boardMenuDrawerMoreScreen"});this.model.setPrefWithTracing("isTemplate",!0,{taskName:"edit-board/prefs/isTemplate",source:"boardMenuDrawerMoreScreen",traceId:t,next:(e,t)=>{var i,s;t&&r.sendUpdatedBoardFieldEvent({field:"prefs/isTemplate",source:"boardMenuDrawerMoreScreen",containers:{board:{id:this.model.id},organization:{id:null===(i=this.model)||void 0===i||null===(s=i.getOrganization())||void 0===s?void 0:s.id}}})}}).save()}}l.initClass(),e.exports=l},"./app/scripts/views/board/share-popover-view.js":function(e,t,i){const s=i("./app/scripts/views/lib/pop-over.js"),r=i("./app/scripts/lib/util/index.js"),n=i("./app/scripts/views/internal/view.js"),o=i("./app/scripts/views/templates/popover_share.js"),{Noun:a,Verb:l,track:d,trackUe:c}=i("./packages/analytics/index.ts"),{dontUpsell:p}=i("./packages/browser/index.ts"),{Controller:u}=i("./app/scripts/controller/index.js"),{Auth:m}=i("./app/scripts/db/auth.js"),h=i("./node_modules/react/index.js"),g=i("./packages/react-dom-wrapper/index.ts"),{renderComponent:b,ComponentWrapper:v}=i("./app/src/components/ComponentWrapper/index.ts"),{print:f}=i("./packages/browser-compatibility/index.ts"),{BusinessClassIcon:w}=i("./packages/nachos/icons/business-class.tsx"),{DownloadIcon:k}=i("./packages/nachos/icons/download.tsx"),{UpgradePromptPill:y}=i("./app/src/components/UpgradePrompts/UpgradePromptPill.tsx"),{UpgradePromptFull:j}=i("./app/src/components/UpgradePrompts/UpgradePromptFull.tsx"),{UpgradeSmartComponent:C}=i("./app/src/components/UpgradePrompts/UpgradeSmartComponent.tsx"),{PlanSelectionOverlay:x}=i("./app/src/components/FreeTrial/index.ts"),{renderUpgradePrompt:S}=i("./app/src/components/UpgradePrompts/renderUpgradePrompt.ts"),{l:_}=i("./app/scripts/lib/localize.js"),{Analytics:E}=i("./packages/atlassian-analytics/index.ts"),{featureFlagClient:T}=i("./packages/feature-flag-client/index.ts"),{ExportPopoverContent:P}=i("./app/src/components/ExportPopoverContent/index.ts"),{UpgradePromptTestIds:A}=i("./packages/test-ids/index.ts"),O=i("./node_modules/underscore/underscore.js"),{clientVersion:D}=i("./packages/config/index.ts");let B;class N extends n{static initClass(){this.prototype.viewTitleKey="print and export",B=T.get("fv.export-service-export-board",!1),this.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export":"renderExportPopover","click .js-export-csv":"exportCSV"}}constructor(e){super(e),this.upgradePromptPill=this.upgradePromptPill.bind(this),this.debouncedTracedExport=O.debounce(this.tracedExportCSV,2500,!0)}remove(){return"function"==typeof this.unmountPill&&this.unmountPill(),super.remove(...arguments)}render(){const e=this.model.getOrganization(),t=this.model.toJSON();t.hasCsvExport=!1,t.hasOrganization=this.model.hasOrganization(),t.upgradeUrl=u.getUpgradeUrl(this.model),t.isAdDismissed=m.me().isAdDismissed("share-popover"),null!=e&&(null!=e?e.isFeatureEnabled("csvExport"):void 0)&&(t.hasCsvExport=!0,t.csvURL="/b/".concat(this.model.get("shortLink"),".csv")),(null!=e?e.isPremium():void 0)&&!(null!=e?e.isFeatureEnabled("csvExport"):void 0)&&(t.needsUpgradeForCsv=!0),t.jsonURL="/b/".concat(this.model.get("shortLink"),".json"),t.upsellEnabled=!p(),t.featureFlag=B,this.$el.html(o(t));const i=e&&!e.isPremium(),s=this.getBillingUrl(e),r=null!=e?e.id:void 0;if(!t.isAdDismissed&&i&&!t.hasCsvExport&&t.upsellEnabled){const e=this.$(".print-and-export-upgrade-prompt-wrapper")[0];b(this.adContainer(r,s,e),e)}return T.get("dataeng.gasv3-event-tracking",!1)&&E.sendScreenEvent({name:"printAndExportBoardInlineDialog",containers:{board:{id:this.model.id}}}),this.upgradePromptPill(s,r),this}getBillingUrl(e){return e?u.getOrganizationBillingUrl(e):"/business-class"}renderExportPopover(){return s.pushView({getViewTitle:()=>_(["view title","export board"]),reactElement:h.createElement(v,{key:"exportPopover"},h.createElement(P,{idBoard:this.model.id}))})}adContainer(e,t,i){return h.createElement(h.Fragment,null,h.createElement("hr",null),this.upgradePrompt(e,t,i))}upgradePromptPill(e,t){const i=this.$("#js-export-csv-pill-update-prompt")[0];return this.unmountPill=S(h.createElement(y,{cta:_(["upgrade prompt","upgrade"]),ctaOnClick:()=>{c({category:a.BOARD_MENU,verb:l.OPENS,directObj:a.TEAM_PAGE_BC_TAB,method:"by clicking pill upgrade prompt in the board menu export page"});const e=document.createElement("span");return i.appendChild(e),b(h.createElement(x,{orgId:t,onContinue:()=>window.location.assign("/business-class"),onClose:()=>(g.unmountComponentAtNode(e),e.remove())}),e,{boardModel:this.model})},icon:h.createElement(w,null),isDismissable:!1}),i,{boardModel:this.model})}upgradePrompt(e,t,i){if(T.get("btg.upgrade-prompt-audit",!1))return h.createElement(C,{orgId:e,promptId:"moreMenuShareInlineDialogPromptFull"});const s={content:_(["upgrade prompt","board menu","print and export","content-2"]),headline:_(["upgrade prompt","board menu","print and export","headline-2"]),cta:_(["upgrade prompt","learn more"]),ctaLink:t,orgId:e,testId:A.PrintAndExportUpgradePrompt,source:"moreMenuShareInlineDialog",ctaOnClick:()=>c({category:a.BOARD_MENU,verb:l.OPENS,directObj:a.BC_MODAL,method:"by clicking full upgrade prompt in the board menu export page"}),icon:h.createElement(k,null),isDismissable:!0,onDismiss:()=>(g.unmountComponentAtNode(i),m.me().dismissAd("share-popover"))};return h.createElement(j,s)}printModel(e){r.stop(e),d("Board Menu","Print and Export Menu","Print"),s.hide(),this.defer((()=>f()))}exportJSON(e){return d("Board Menu","Print and Export Menu","Export JSON")}export(e){return d("Board Menu","Print and Export Menu","Export")}fetchCSVData(e,t){return fetch(e,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-Trello-Client-Version":D,"X-Trello-TraceId":t,"X-Trello-Task":"create-export/board"}})}async tracedExportCSV(e){const t=E.startTask({taskName:"create-export/board",source:"printAndExportBoardInlineDialog"});try{var i;const s=null==e||null===(i=e.target)||void 0===i?void 0:i.href,n=await this.fetchCSVData(s,t);if(!n.ok)return void E.taskFailed({taskName:"create-export/board",traceId:t,source:"printAndExportBoardInlineDialog",error:new Error("".concat(n.status,": Failed to fetch CSV export'"))});const o=await n.blob(),a=this.model.get("shortLink"),l=r.makeSlug(this.model.get("name")),d="".concat(a," - ").concat(l,".csv"),c=document.createElement("a");c.download=d,c.href=window.URL.createObjectURL(o),document.body.appendChild(c),c.click(),document.body.removeChild(c),E.taskSucceeded({taskName:"create-export/board",traceId:t,source:"printAndExportBoardInlineDialog"})}catch(e){throw E.taskFailed({taskName:"create-export/board",traceId:t,source:"printAndExportBoardInlineDialog",error:e})}}exportCSV(e){return r.stop(e),this.debouncedTracedExport(e),d("Board Menu","Print and Export Menu","Export CSV")}}N.initClass(),e.exports=N},"./app/scripts/views/card/formatting-help-view.js":function(e,t,i){const s=i("./app/scripts/views/internal/view.js"),r=i("./app/scripts/views/internal/templates.js");class n extends s{static initClass(){this.prototype.viewTitleKey="formatting help"}render(){return this.$el.html(r.fill(i("./app/scripts/views/templates/formatting_help.js"))),this}}n.initClass(),e.exports=n},"./app/scripts/views/description/description-view.js":function(e,t,i){const s=i("./node_modules/underscore/underscore.js"),{Auth:r}=i("./app/scripts/db/auth.js"),n=i("./app/scripts/views/internal/autocomplete/auto-insertion-view.js"),o=i("./app/scripts/views/internal/autocomplete/completer-util.js"),a=i("./app/scripts/views/internal/editable-view.js"),l=i("./app/scripts/views/card/formatting-help-view.js"),d=i("./app/scripts/views/lib/layout.js"),c=i("./app/scripts/views/lib/pop-over.js"),p=i("./app/scripts/views/internal/attachment-viewer.js"),u=i("./app/scripts/lib/markdown/tfm.js"),m=i("./app/scripts/lib/util/index.js"),h=i("./app/scripts/views/internal/friendly-links.js"),{l:g}=i("./app/scripts/lib/localize.js"),{Analytics:b}=i("./packages/atlassian-analytics/index.ts"),v=i("./app/scripts/views/templates/description.js"),{getKey:f,Key:w,isForceSubmitEvent:k}=i("./packages/keybindings/index.ts"),{applyMarkdownShortcuts:y}=i("./app/scripts/views/lib/markdown-transform.ts");class j extends a{static initClass(){this.prototype.events={"click .js-format-help":"openFormatHelp","click .js-edit-desc":"editDesc","click .js-edit-desc-button"(){return b.sendClickedButtonEvent({buttonName:"editDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}})},"keydown .field"(e){if(k(e)&&(this.recordCardAction(),this._discardDraft("desc")),y(e),f(e)===w.Escape)return m.stop(e),p.isActive()?void p.clear():c.isVisible?void c.hide():(this.saveDrafts(),this.$(".js-description-draft").val(this.model.get("desc")),b.sendPressedShortcutEvent({shortcutName:"escapeShortcut",keyValue:"esc",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}},attributes:{whileEditingDescription:!0}}),void this.render())},"keyup .field"(e){return f(e)===w.Escape&&m.stop(e),this.keyAutoMention(e)},"click .js-cancel-edit"(e){return b.sendClickedButtonEvent({buttonName:"cancelEditDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}),this.cancelEditDesc(e,"by clicking on cancel button")},"click .js-desc-content.is-hide-full"(){return b.sendClickedButtonEvent({buttonName:"showFullDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}),this.showFullDescription()}}}initialize({board:e,card:t,maxDescLength:i,placeholderKey:s,source:r}){return this.board=e,this.card=t,this.maxDescLength=i,this.placeholderKey=s,this.source=r,super.initialize(...arguments),this.hideFullDescription=C(this.model.get("desc"),(e=>e.length))>this.maxDescLength,this.descType="".concat(this.model.typeName.toLowerCase()," description"),this.makeDebouncedMethods("render"),this.listenTo(d,this.getAutosaveEvent(),this.onAutosaveEdit),this.listenTo(this.model,"change:desc",this.renderDebounced)}render(){var e,t;const i={};i.editable=this.model.editable(),i.isCardDesc="Card"===this.model.typeName,i.placeholderKey=this.placeholderKey,i.isTemplate=i.isCardDesc?this.model.isOnBoardTemplate():this.model.isTemplate(),this.$el.html(v(i));const s=this.model.get("desc"),r=u.description.format(null!=s?s:"",{textData:this.model.get("descData")}).output,n=this.$(".js-desc");n.empty().append(r).data("unmarkeddown",s),n.find("p").attr("dir","auto"),h(n[0],this.board,{analyticsContext:{source:this.source,containers:null===(e=this.model)||void 0===e||null===(t=e.getAnalyticsContainers)||void 0===t?void 0:t.call(e),attributes:{fromSection:"description"}}});const o=!/^\s*$/.test(r);this.$(".js-show-with-desc").toggleClass("hide",!o),this.$(".js-hide-with-desc").toggleClass("hide",o);const a=C(this.$(".js-description-draft").val(),(e=>e.length))>0;return this.$(".js-description-draft").addClass(this.descType.split(" ").join("-")),this.$(".js-hide-with-draft").toggleClass("hide",a),this.$(".js-desc-content").toggleClass("is-hide-full",this.hideFullDescription),this.renderFormattingButton(),this.recallDrafts(),this}showFullDescription(){this.hideFullDescription=!1,this.$(".js-desc-content").removeClass("is-hide-full")}editDesc(e){m.stop(e),this.showFullDescription(),this.edit("desc")}cancelEditDesc(e,t){const i=t.includes("escape key");return b.sendTrackEvent({action:"cancelled",actionSubject:"descriptionEdit",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}},attributes:{method:i?"escapeKey":"cancelEditDescriptionButton"}}),this.clearEdits(e)}expandDesc(e){m.stop(e),this.showFullDescription(),this.edit("desc",!1)}renderFormattingButton(){const e=g(["view title","formatting help"]),t="board description"===this.descType&&e.length>20;return this.$(".description-edit").toggleClass("long",t),this.$(".description-edit .helper").toggleClass("long",t)}openFormatHelp(e){return b.sendClickedButtonEvent({buttonName:"formattingHelpDescriptionButton",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}),c.toggle({elem:this.$(".js-format-help"),view:l,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1}getAutosaveEvent(){return"autosave".concat(this.model.typeName,"Description")}onAutosaveEdit(e){return this.hideFullDescription=!1,this.commitEdits(null,e)}commitEdits(){if(this.$(".description-title .editing").length){if(!this.validate())return;return r.me().editing({idBoard:this.board.id}),this.$(".description-title .editing").removeClass("editing"),!this.card&&this.board?b.sendUpdatedBoardFieldEvent({field:"description",source:this.source,containers:{board:{id:null!=this.board?this.board.id:void 0},card:{id:null!=this.card?this.card.id:void 0}}}):this.recordCardAction(),this._discardDraft("desc"),super.commitEdits(...arguments)}}recordCardAction(){if("Card"!==this.model.typeName)return;const e=this.$(".js-description-draft").val(),t=this.model.get("desc");t!==e&&this.model.recordAction({type:"update-description",description:e,previousDescription:t})}getTextInput(){const e=this.$(".js-description-draft:visible");if(e.length)return e}getMentionTarget(){const e=this.$(".js-description-draft:visible");if(e.length)return e[0]}getEmojiTarget(){const e=this.$(".js-description-draft:visible");if(e.length)return e[0]}}function C(e,t){return null!=e?t(e):void 0}j.initClass(),s.extend(j.prototype,n,o),e.exports=j},"./app/scripts/views/internal/editable-view.js":function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const o=i("./packages/jquery/index.js"),{Analytics:a}=i("./packages/atlassian-analytics/index.ts"),l=i("./app/scripts/views/internal/autocomplete/auto-mentioner-view.js"),{Board:d}=i("./app/scripts/models/board.js"),{Card:c}=i("./app/scripts/models/card.js"),p=i("./app/scripts/views/lib/drag-sort.js"),u=i("./app/scripts/views/templates/edit_controls.js"),m=i("./app/scripts/views/internal/autocomplete/emoji-completer-view.js"),{hasSelectionIn:h}=i("./app/scripts/lib/util/selection/has-selection-in.js"),{getKey:g,isForceSubmitEvent:b,Key:v}=i("./packages/keybindings/index.ts"),f=i("./app/scripts/views/lib/layout.js"),w=i("./app/scripts/views/lib/pop-over.js"),{TrelloStorage:k}=i("./packages/storage/index.ts"),y=i("./app/scripts/lib/util/index.js"),j=i("./app/scripts/views/internal/view.js"),C=i("./node_modules/underscore/underscore.js"),{track:x,trackUe:S}=i("./packages/analytics/index.ts"),{l:_}=i("./app/scripts/lib/localize.js"),{asNumber:E}=i("./packages/i18n/formatters.ts");class T extends j{static initClass(){this.prototype.allowNewlines=!0}initialize(){return super.initialize(...arguments),o(window).on("beforeunload.EditableView-".concat(this.model.cid),(()=>{this.saveDrafts("unload")}))}remove(){return this.saveDrafts("removing view"),o(window).off(".EditableView-".concat(this.model.cid)),super.remove(...arguments)}_draftKey(e){return"draft_".concat(this.model.id,"_").concat(e)}_saveDraft(e,t){return k.set(this._draftKey(e),t)}_recallDraft(e){return k.get(this._draftKey(e))}_discardDraft(e){return k.unset(this._draftKey(e))}saveDrafts(e){return null!=this.model.id&&(()=>{const t=[];for(const i of Array.from(this.getEdits())){const s=i.attr("attr"),r=i.find(".field:first").val();0!==o.trim(r).length&&(this.model.get(s)!==r&&r!==this._recallDraft(s)?(e&&(x("Editable View","Save Draft","Save draft via ".concat(e)),S("Editable View","Save Draft","","","","when ".concat(e),"")),t.push(this._saveDraft(s,r))):t.push(void 0))}return t})()}editField(e){const t=o(e.target).closest("a");if(t.length>0&&"#"!==t.attr("href"))return;if(p.sorting)return;const i=o(e.target).closest(".editable");if(0===i.length)return;if(h(i))return;if(o(e.target).closest(".js-react-root").length)return;y.stop(e),w.hide();const s=i.attr("attr");return this.edit(s)}edit(e,t){let i;null==t&&(t=!0),e.indexOf(".")>-1&&(i=e.split("."),e=i[1]);const s=this.$("[attr=".concat(e,"]")),r=this.$(".js-no-higher-edits [attr=".concat(e,"]")),n=s.not(r);if(0===n.length)return;f.cancelEdits();const o=n.find(".edit:first");if(0===o.length)return;const a=n.find(".field:first");o.append(u()),n.addClass("editing"),""===a.val()&&a.val(y.traverse(this.model.attributes,null!=i?i:e)),this.waitForId(this.model,(()=>a.data("draftKey",this._draftKey(e)))),t&&a.focus().select(),a.autosize({append:!1})}getEdits(){const e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]");return e.not(t).map(((e,t)=>o(t)))}recallDrafts(){return this.getEdits().each(((e,t)=>{const i=t.attr("attr");if(null!=this.model.id){const e=this._recallDraft(i);if(null!=e){return t.find(".field:first").val(e),this.defer((()=>t.find(".edits-warning").show()))}}}))}stopEditing(e){return y.stop(e),f.cancelEdits(),!1}clearEdits(e){y.stop(e);const t=o(e.target).closest(".editable[attr]"),i=t.attr("attr");return null!=i&&this._discardDraft(i),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),t.removeClass("editing"),f.cancelEdits(),!1}validate(){let e;for(e of Array.from(this.$(".editing.non-empty .field")))if(/^\s*$/.test(o(e).val()))return!1;for(e of Array.from(this.$(".editing .field"))){let t;const i=(null!=(t=o(e).val())?t:"").length;if(i>16384)return o(".editing").find(".edits-error").text(_("text too long",{over:E(i-16384)})).show(),!1}return!0}keydownEvent(e){const t=g(e);f.isEditing()&&(w.view instanceof m||w.view instanceof l?"function"==typeof this.checkInsert&&this.checkInsert(e):b(e)||t===v.Enter&&(!o(e.target).is("textarea")||o(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(y.stop(e),this.commitEdits(e)):t!==v.Enter||this.allowNewlines||y.stop(e))}commitEdits(e,t=null){e&&y.stop(e);const i=t||o(e.target).closest(".editable.editing[attr]");if(i.find(".edits-error").hide(),!this.validate())return;const s=this,{model:n}=this;return i.remove("input[type=submit]"),i.removeClass("editing").each((function(){const e=o(this).attr("attr");let t=o(this).find(".field").val();if(s.allowNewlines||(t=t.replace(/[\r\n]+/g," ")),0===o.trim(t).length&&(t=""),n.get(e)===t)return s._discardDraft(e);{let o={};n instanceof c&&(o={taskName:"edit-card/desc",source:"cardDetailScreen"}),n instanceof d&&(o={taskName:"edit-board/desc",source:"boardMenuDrawerAboutScreen"});const l=a.startTask(o),p={traceId:l};return p[e]=t,n.update(p,(function(p,u){null!=p?(i.find(".edits-error").text(p.message).show(),s._saveDraft(e,t),a.taskFailed(r(r({},o),{},{traceId:l,error:p}))):(s._discardDraft(e),n instanceof c&&a.sendUpdatedCardFieldEvent({field:"description",source:"cardDetailScreen",containers:{card:{id:u.id},board:{id:u.idBoard},list:{id:u.idList}},attributes:{taskId:l}}),n instanceof d&&a.sendUpdatedBoardFieldEvent({field:"description",source:"boardMenuDrawerAboutScreen",containers:{board:{id:u.id}},attributes:{taskId:l}}),a.taskSucceeded(r(r({},o),{},{traceId:l})))}))}})).find(".field").val(""),i.find(".edits-warning").hide(),!0}clickSetting(e){const t=o(e.target);if(t.hasClass("disabled")||t.closest(".js-disabled").length)return;const i=t.attr("href");if(i&&"#"!==i)return;const s=t.closest(".pref").attr("name");if(!s)return;let r=t.attr("value");r=(()=>{switch(r){case"true":return!0;case"false":return!1;default:return r}})(),this.model.setPref(s,r),this.model.save(),y.stop(e)}delegateEvents(e){const t={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":y.stopPropagation,"click textarea":y.stopPropagation};return null!=this.model.setPref&&(t["click a"]="clickSetting"),super.delegateEvents(C.extend(t,e||this.events))}}T.initClass(),e.exports=T},"./app/scripts/views/organization/add-tag-view.js":function(e,t,i){let s;const{Analytics:r,getScreenFromUrl:n}=i("./packages/atlassian-analytics/index.ts"),o=i("./app/scripts/views/organization/set-tag-view.js"),a=i("./app/scripts/views/lib/pop-over.js"),{ApiError:l}=i("./app/scripts/network/api-error.js"),{showFlag:d}=i("./packages/nachos/experimental.ts"),{l:c}=i("./app/scripts/lib/localize.js");e.exports=(s=class extends o{static initClass(){this.prototype.viewTitleKey="add tag"}onSubmit(e){if(e){const t=n(),i=r.startTask({taskName:"create-tag",source:t});this.model.tagList.createWithTracing({name:e},{wait:!0,traceId:i,success:()=>{const e=this.model;r.sendTrackEvent({action:"created",actionSubject:"collection",source:t,attributes:{taskId:i,isBCFeature:!0,requiredBC:!0},containers:{organization:{id:e.id}}}),r.taskSucceeded({taskName:"create-tag",traceId:i,source:t})},error:(e,s)=>{if(s instanceof l.Conflict)return d({id:"edit-tag",appearance:"error",title:c("alerts.there is already a collection with that name"),msTimeout:5e3}),r.taskAborted({taskName:"create-tag",traceId:i,source:t});throw r.taskFailed({taskName:"create-tag",traceId:i,source:t,error:s})}}),a.popView()}}},s.initClass(),s=s)},"./app/scripts/views/organization/set-tag-view.js":function(e,t,i){const s=i("./app/scripts/lib/util/index.js"),r=i("./app/scripts/views/internal/view.js"),{track:n}=i("./packages/analytics/index.ts"),{Feature:o}=i("./app/scripts/debug/constants.ts"),{sendErrorEvent:a}=i("./packages/error-reporting/index.ts"),l=i("./app/scripts/views/internal/teacup-with-helpers.js")("org_filtering"),d=l.renderable((({name:e,isDeleteable:t})=>{l.form(".js-add-tag-form",(()=>{l.label((()=>{l.format("name"),l.input(".js-add-tag-name.js-autofocus",{type:"text",value:e})})),l.input(".nch-button.nch-button--primary",{type:"submit",value:l.l("save")}),t&&l.input(".nch-button.nch-button--danger.u-float-right.js-delete-tag",{type:"button",value:l.l("delete")})}))}));e.exports=class extends r{events(){return{"submit .js-add-tag-form"(e){try{e.preventDefault(),this.options.boardView?n("Board Menu","Collections Menu","Save New Collection"):n("Team Page","Collections Menu","Save New Collection");const t=this.$(".js-add-tag-name").val().trim();this.onSubmit(t)}catch(e){a(e,{tags:{ownershipArea:"trello-remarkable",feature:o.Collections}})}},"click .js-delete-tag"(e){try{s.stop(e),this.onDelete()}catch(e){a(e,{tags:{ownershipArea:"trello-remarkable",feature:o.Collections}})}}}}getName(){return""}render(){return this.$el.html(d({name:this.getName(),isDeleteable:this.onDelete})),this}}},"./app/scripts/views/stickers/custom-sticker-selection-view.js":function(e,t,i){const s=i("./packages/jquery/index.js"),{Analytics:r,tracingCallback:n}=i("./packages/atlassian-analytics/index.ts"),{Auth:o}=i("./app/scripts/db/auth.js"),a=i("./app/scripts/views/lib/confirm.js"),l=i("./app/scripts/views/stickers/sticker-selection-view.js"),d=i("./app/scripts/lib/util/index.js");e.exports=function(){class e extends l{static initClass(){this.prototype.events={"click .js-delete-sticker":"deleteSticker"}}initialize(){return this.toggleSelectable(),this.waitForId(this.model,(()=>this.toggleSelectable())),this.listenTo(this.model,"change:error",this.render)}enabled(){var e,t;return o.me().hasPremiumFeature("customStickers")||(null===(e=this.options)||void 0===e||null===(t=e.org)||void 0===t?void 0:t.hasPremiumFeature("customStickers"))||!1}toggleSelectable(){const e=null!=this.model.id;return this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)}deleteSticker(e){return d.stop(e),a.toggle("delete sticker",{elem:s(e.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"nch-button nch-button--danger",fxConfirm:()=>{const e=r.startTask({taskName:"delete-attachment/sticker",source:"boardMenuDrawerStickersScreen"});return this.model.destroyWithTracing({traceId:e},n({taskName:"delete-attachment/sticker",traceId:e,source:"boardMenuDrawerStickersScreen"},((t,i)=>{if(i){var s,n;const t=null===(s=this.options)||void 0===s?void 0:s.org;r.sendTrackEvent({action:"deleted",actionSubject:"stickerAttachment",source:"boardMenuDrawerStickersScreen",attributes:{taskId:e,stickerId:i.id},containers:{organization:{id:null==t?void 0:t.id},enterprise:{id:null==t||null===(n=t.getEnterprise())||void 0===n?void 0:n.id}}})}})))}})}}return e.initClass(),e}()},"./app/scripts/views/stickers/sticker-selection-view.js":function(e,t,i){const{Auth:s}=i("./app/scripts/db/auth.js"),r=i("./app/scripts/lib/util/index.js"),n=i("./app/scripts/views/internal/view.js"),o=i("./app/scripts/views/internal/templates.js"),{stickerSize:a}=i("./app/scripts/data/sticker-size.js"),{MemberState:l}=i("./app/scripts/view-models/member-state.js");class d extends n{static initClass(){this.prototype.className="sticker-select js-draggable-sticker"}initialize(){return this.listenTo(l,{"change:useAnimatedStickers":this.render})}enabled(){var e,t;return!this.model.get("premium")||s.me().hasPremiumFeature("additionalStickers")||(null===(e=this.options)||void 0===e||null===(t=e.org)||void 0===t?void 0:t.hasPremiumFeature("additionalStickers"))||!1}render(){const e=this.model.toJSON();var t,s,n,d;this.model.get("isGiphySticker")&&!l.getUseAnimatedStickers()?e.url=null!==(t=null===(s=r.smallestPreviewBiggerThan(e.stillscaled,a))||void 0===s?void 0:s.url)&&void 0!==t?t:e.stillUrl:e.url=null!==(n=null===(d=r.smallestPreviewBiggerThan(e.scaled,a))||void 0===d?void 0:d.url)&&void 0!==n?n:e.url;return e.pending=null==e.image&&null==e.id&&null==e.error,this.$el.toggleClass("disabled",!this.enabled()).toggleClass("giphy-sticker",!!this.model.get("isGiphySticker")).html(o.fill(i("./app/scripts/views/templates/sticker_select_item.js"),e)).data("sticker",this.model),this}}d.initClass(),e.exports=d},"./app/scripts/views/templates/ArchivedCardOptions.js":function(e,t,i){"use strict";i.r(t),i.d(t,"ArchivedCardOptions",(function(){return a}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./packages/i18n/index.ts");const o=Object(n.forTemplate)("archived_card_options"),a=({editable:e,canReopen:t,canDelete:i,reOpenText:s})=>e&&(t||i)?r.a.createElement("p",{className:"quiet",style:{marginLeft:"8px"}},t?[r.a.createElement("a",{className:"js-reopen",href:"#",key:"open"},"".concat(s)),i?" - ":null]:null,i?r.a.createElement("a",{className:"js-delete",href:"#",key:"delete"},o("delete")):null):null},"./app/scripts/views/templates/ArchivedCards.js":function(e,t,i){"use strict";i.r(t),i.d(t,"ArchivedCards",(function(){return a}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./packages/i18n/index.ts");const o=Object(n.forTemplate)("archived_cards"),a=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"too-many-results-message helper js-search-message hide"}),r.a.createElement("div",{className:"js-archive-items"}),r.a.createElement("p",{className:"empty-list js-empty-message"}),r.a.createElement("a",{className:"show-more js-more-cards",href:"#"},o("load-more-cards")))},"./app/scripts/views/templates/ArchivedLists.js":function(e,t,i){"use strict";i.r(t),i.d(t,"ArchivedLists",(function(){return n}));var s=i("./node_modules/react/index.js"),r=i.n(s);const n=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"archive-list js-archive-items"}),r.a.createElement("p",{className:"js-empty-message empty-list"}))},"./app/scripts/views/templates/BoardArchive.js":function(e,t,i){"use strict";i.r(t),i.d(t,"BoardArchive",(function(){return a}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./packages/i18n/index.ts");const o=Object(n.forTemplate)("board_archive"),a=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"archive-controls"},r.a.createElement("div",{className:"archive-controls-search"},r.a.createElement("input",{className:"js-search js-autofocus",type:"text",placeholder:o("search archive")})),r.a.createElement("a",{className:"archive-controls-switch nch-button js-switch-section",href:"#"})),r.a.createElement("div",{className:"spinner loading js-loading-spinner"}),r.a.createElement("div",{className:"archive-content js-archive-content"}))},"./app/scripts/views/templates/archive_item.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("archive_item");e.exports=s.renderable((function({url:e,name:t,orgName:i,canReopen:r,reOpenText:n,reopenDisabled:o}){return s.div(".item-name",(function(){if(e?(s.a({href:e},(()=>s.text(t))),s.div(".quiet",(function(){}))):s.span((()=>s.text(t))),i)return s.div(".quiet",(()=>s.text(i)))})),s.div(".options",(function(){r&&s.a(".button-link.js-reopen".concat(o?".disabled":""),{href:"#"},(function(){return s.icon("refresh"),s.text(" "),s.text(n)}))}))}))},"./app/scripts/views/templates/board_background_options.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_background_options");e.exports=function(){return s.p(".u-font-weight-bold.quiet",(()=>s.format("display-type"))),s.ul(".pop-over-list",(function(){return s.li((()=>s.a(".js-select-option",{href:"#","data-background-display-type":"cover"},(()=>s.check(!s.mustacheVar("tile"),"cover"))))),s.li((()=>s.a(".js-select-option",{href:"#","data-background-display-type":"tile"},(()=>s.check(s.mustacheVar("tile"),"tile")))))})),s.hr(),s.p(".u-font-weight-bold.quiet",(()=>s.format("board-text"))),s.ul(".pop-over-list",(function(){return s.li((()=>s.a(".js-select-option",{href:"#","data-board-brightness":"dark"},(()=>s.check(s.mustacheVar("brightnessDark"),"light"))))),s.li((()=>s.a(".js-select-option",{href:"#","data-board-brightness":"light"},(()=>s.check(s.mustacheVar("brightnessLight"),"dark")))))})),s.hr(),s.a(".quiet-button.js-delete-background",{href:"#"},(()=>s.format("delete-background")))}},"./app/scripts/views/templates/board_background_selection.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_background_selection");e.exports=()=>s.span({class:"background-box ".concat(s.mustacheBlock("pending",(()=>"background-box-unselectable"))).concat(s.mustacheBlock("tile",(()=>" background-tile"))),style:" ".concat(s.mustacheBlock("backgroundImageThumbnail",(()=>'background-image: url("'.concat(s.mustacheVar("backgroundImageThumbnail"),'")'))),"; ").concat(s.mustacheBlock("color",(()=>"background-color: ".concat(s.mustacheVar("color"),";")))," ")},(function(){return s.mustacheBlock("attribution",(()=>s.a(".background-option.js-background-attribution",{href:s.mustacheVar("url"),target:"_blank",title:s.mustacheVar("url")},(function(){return s.img({src:i("./resources/images/cc.png"),style:"height: 14px; width: 14px; vertical-align: text-top;",title:s.mustacheVar("license")}),s.span(".text",{style:"margin-left: 2px;"},(()=>s.text(s.mustacheVar("name"))))})))),s.mustacheBlock("id",(()=>s.a(".background-option.js-options",(function(){return s.icon("overflow-menu-horizontal",{class:"light",style:"vertical-align: bottom;"}),s.span(".text",(()=>s.format("options")))})))),s.mustacheBlock("error",(()=>s.span(".background-info",(()=>s.span(".text",(()=>s.text(s.mustacheVar("error")))))))),s.mustacheBlock("pending",(()=>s.span(".background-info",(function(){return s.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),s.span(".text",(()=>s.format("uploading-ellipsis")))}))))}))},"./app/scripts/views/templates/board_change_background.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_change_background"),{featureFlagClient:r}=i("./packages/feature-flag-client/index.ts");e.exports=s.renderable((function({enabled_customBoardBackgrounds:e,idMember:t,upsellEnabled:i}){if(s.div(".board-backgrounds-section-tiles.u-clearfix",(function(){return s.div(".board-backgrounds-section-tile.board-backgrounds-photos-tile.js-bg-photos",(function(){return s.div(".image"),s.div(".title",(()=>s.format("photos")))})),r.get("aaaa.web.board-bkgd-gradients",!1)?s.div(".board-backgrounds-section-tile.board-backgrounds-gradients-tile.js-bg-colors",(function(){return s.div(".image"),s.div(".title",(()=>(s.span(".gradients-new-lozenge.js-gradients-new-lozenge"),s.format("colors"))))})):s.div(".board-backgrounds-section-tile.board-backgrounds-colors-tile.js-bg-colors",(function(){return s.div(".image"),s.div(".title",(()=>s.format("colors")))}))})),s.hr(".board-menu-header-divider"),e||i)return s.h2((()=>s.format("custom"))),s.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list".concat(e?"":" disabled")},(()=>s.div(".board-background-select.board-background-select-upload.js-uploader",(()=>s.form({action:"/1/member/".concat(t,"/customBoardBackgrounds"),method:"post",enctype:"multipart/form-data"},(function(){return s.input({type:"hidden",name:"token",value:""}),s.input({type:"hidden",name:"format",value:"http"}),s.span(".background-box",(()=>s.span(".icon-lg.icon-add"))),s.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})}))))))}))},"./app/scripts/views/templates/board_convert_template.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_copy");e.exports=()=>s.form((function(){return s.div(".board-menu-convert-to-template-container",(()=>s.img(".board-menu-convert-to-template",{src:i("./resources/images/template-create-popover-icon.svg"),alt:"",role:"presentation"}))),s.p((()=>s.format("make-template-text"))),s.input(".nch-button.nch-button--primary.wide.full.js-convert",{type:"submit",value:s.l("make-template")})}))},"./app/scripts/views/templates/board_menu_about_this_board.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_about_this_board"),r=s.renderable((function(e,t,i){if(e||t)return s.div(".about-this-board-actions-section",(function(){return s.h2(".small-caps",(()=>s.format(i))),s.ul(".pop-over-list.inset",(function(){if(e&&s.li((function(){return s.span(".icon-sm.icon-comment"),s.format("comment-on-cards")})),t)return s.li((function(){return s.span(".icon-sm.icon-vote"),s.format("vote-on-cards")}))}))}))}));e.exports=s.renderable((function({isLoggedIn:e,isAdmin:t,isNonAdminMember:i,canComment:n,canVote:o,commentHeader:a,votingHeader:l,permissionsHierarchy:d,isTemplate:c}){if(!c||i||t||(s.div(".js-search-input-view"),s.hr()),s.div(".about-this-board-section",(function(){return s.div(".window-module-title.window-module-title-no-divider",(function(){return s.span(".icon-member.icon-lg.window-module-title-icon"),s.h3(".u-inline-block",(()=>s.format("board-admins")))})),s.div(".js-made-by"),s.div(".about-this-board-multi-admin",(function(){return s.div(".js-made-by-facepile"),s.a(".admin-count.about-this-board-pile-button.pile.js-fill-board-admin-count",{href:"#"},(()=>s.span(".admin-count-notifications")))}))})),s.div(".js-view-copy-count"),s.div(".about-this-board-section.about-this-board-desc",(()=>s.div(".js-fill-atb-desc.about-this-board-description-content"))),!c&&!i&&(n||o))return s.div(".about-this-board-section",(function(){return s.hr(),t?("equal"===d?r(n,o,a):"comment"===d?(r(n,null,a),r(null,o,l)):(r(null,o,l),r(n,null,a)),s.a(".quiet-button.js-change-permissions",{href:"#"},(()=>s.span((()=>s.format("change-permissions")))))):r(n,o,"any-trello-user-can")}))}))},"./app/scripts/views/templates/board_menu_activity.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_activity");e.exports=function(){return s.div(".segmented-control",(()=>(s.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},(()=>s.format("all"))),s.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},(()=>s.format("comments")))))),s.div(".phenom-list.js-list-activity"),s.a(".show-more.js-more-actions",{href:"#"},(()=>s.format("load-more-activity")))}},"./app/scripts/views/templates/board_menu_commenting.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_commenting");e.exports=function(){return s.li((()=>s.a(".js-select",{href:"#",name:"disabled"},(function(){return s.check(s.mustacheVar("comments_disabled"),"disabled"),s.span(".sub-name",(()=>s.format("no-one-is-allowed-to-comment")))})))),s.li((()=>s.a(".js-select",{href:"#",name:"members"},(function(){return s.check(s.mustacheVar("comments_members"),"members"),s.span(".sub-name",(()=>s.format("allow-admins-and-normal-members-to-comment")))})))),s.li((()=>s.a({href:"#",class:"js-select".concat(s.mustacheBlockInverted("comments_showObservers",(()=>" disabled"))),name:"observers"},(function(){return s.check(s.mustacheVar("comments_observers"),"members-and-observers"),s.span(".sub-name",(()=>s.format("allow-admins-normal-members-and-observers-to-comment")))})))),s.li((()=>s.a({href:"#",class:"js-select".concat(s.mustacheBlockInverted("orgCanSee",(()=>" disabled"))),name:"org"},(function(){return s.check(s.mustacheVar("comments_org"),"organization-members"),s.span(".sub-name",(()=>s.format("allow-admins-normal-members-observers-and-organization-members-to-comment")))})))),s.li((()=>s.a({href:"#",class:"js-select".concat(s.mustacheBlockInverted("permissionLevel_public",(()=>" disabled"))),name:"public"},(function(){return s.check(s.mustacheVar("comments_public"),"any-trello-user"),s.span(".sub-name",(()=>s.format("allow-any-trello-member-to-comment")))}))))}},"./app/scripts/views/templates/board_menu_default.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_default"),{featureFlagClient:r}=i("./packages/feature-flag-client/index.ts"),n=r.getTrackedVariation("board-header-filtering-experiment",!1),o=r.get("ecosystem.board-header-filter",!1),{getButlerKey:a,getButlerIconKey:l}=i("./app/src/components/Butler/getButlerName.ts"),d=s.renderable((({hasPaidOrgPowerUps:e,hasGoldPowerUps:t})=>s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},(function(){return s.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),s.raw("&nbsp;"),e?s.icon("business-class",{class:"mod-quiet"}):t&&s.icon("trello-gold",{class:"icon-trello-gold-color"}),s.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count"),s.span(".board-menu-navigation-item-new.js-power-up-new",(()=>s.format("new"))),s.span(".board-menu-navigation-item-link-warning.js-power-up-disable-timer"),s.div(".board-menu-navigation-item-link-summary",(function(){return s.raw("&nbsp;"),s.format("power-ups-explanation")}))}))))));e.exports=s.renderable((function({hasPaidOrgPowerUps:e,hasGoldPowerUps:t,editable:i,showEnterpriseUpsell:r,isTemplate:c}){if(s.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},(()=>s.format("file-too-large-10mb-limit"))),s.ul(".board-menu-navigation",(function(){if(s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-about-this-board",{href:"#"},(function(){return s.span(".board-menu-navigation-item-link-icon.icon-lg.icon-board"),s.raw("&nbsp;"),c?s.format("about-this-template"):s.format("about-this-board"),s.div(".board-menu-navigation-item-link-summary.board-menu-about-this-board-summary",(function(){return s.raw("&nbsp;"),c?s.format("add-a-description-to-your-template"):s.format("add-a-description-to-your-board")}))})))),i&&s.li(".board-menu-navigation-item.mod-background",(()=>s.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},(function(){return s.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),s.raw("&nbsp;"),s.format("change-background")})))),n||o||s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-card-filter",{href:"#"},(()=>s.icon("search","search-cards",{class:"board-menu-navigation-item-link-icon"}))))),i&&s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},(()=>s.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"}))))),s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},(()=>s.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"}))))),i)return s.div(".js-butler-button.hide",(function(){return s.hr(),s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-butler",{href:"#"},(function(){return s.icon(l(),a(),{class:"board-menu-navigation-item-link-icon"}),s.div(".board-menu-navigation-item-link-summary",(function(){return s.raw("&nbsp;"),s.format("butler-description")}))}))))}))})),i&&(s.hr(),r&&s.div(".enterprise-up-sell.on-board",(function(){return s.div(".enterprise-up-sell-body",(()=>s.div(".enterprise-up-sell-copy",(function(){return s.h2(".enterprise-up-sell-header",(function(){return s.span(".icon-lg.icon-power-up"),s.format("ads-ent-title")})),s.div(".enterprise-up-sell-description",(()=>s.format("ads-ent-description")))})))),s.div(".enterprise-up-sell-footer",(()=>s.div(".enterprise-up-sell-actions",(function(){return s.button(".js-enterprise-upsell-dismiss",(()=>s.format("ads-ent-dismiss"))),s.button(".js-enterprise-upsell-learn-more.nch-button.nch-button--primary",(()=>s.format("ads-ent-learn-more")))}))))})),s.ul(".board-menu-navigation",(()=>d({hasPaidOrgPowerUps:e,hasGoldPowerUps:t}))),s.div(".js-power-up-slots-container")),!c)return s.hr(),s.a(".board-menu-section-header.js-open-activity",{href:"#"},(function(){return s.span(".board-menu-section-header-icon.icon-lg.icon-activity"),s.span(".board-menu-section-header-title",(()=>s.format("activity"))),s.span(".board-menu-section-header-count.js-unread-activity-count")})),s.div(".js-menu-action-list"),s.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"})}))},"./app/scripts/views/templates/board_menu_invitations.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_invitations");e.exports=function(){return s.li((()=>s.a(".js-select",{href:"#",name:"admins"},(function(){return s.check(s.mustacheVar("invitations_admins"),"admins"),s.span(".sub-name",(()=>s.format("allow-only-admins-to-add-and-remove-others")))})))),s.li((()=>s.a(".js-select",{href:"#",name:"members"},(function(){return s.check(s.mustacheVar("invitations_members"),"all-members"),s.span(".sub-name",(()=>s.format("allow-members-and-admins-to-add-and-remove-others")))}))))}},"./app/scripts/views/templates/board_menu_more.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_more");e.exports=s.renderable((function({shortUrl:e,editableByMember:t,isAdmin:i,isLoggedIn:r,canCloseOrLeave:n,canCloseBoard:o,canCopyBoard:a,canLeaveBoard:l,pLevelAltText:d,pLevelClass:c,helperText:p,showCollections:u,isTemplate:m,canBeTemplate:h,isOrgBcOrEnt:g,showTemplateUpgrade:b}){return s.ul(".board-menu-navigation",(function(){return s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},(()=>s.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"}))))),s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},(()=>s.icon("label","labels",{class:"board-menu-navigation-item-link-icon"}))))),u&&(g?s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-collections",{href:"#"},(()=>s.icon("collection","collections",{class:"board-menu-navigation-item-link-icon"}))))):s.li(".board-menu-navigation-item.disabled",(function(){return s.span(".board-menu-navigation-item-link.",(function(){return s.icon("collection","collections",{class:"board-menu-navigation-item-link-icon"}),s.div(".board-menu-pill-upgrade.js-board-menu-pill-collections-upgrade")})),s.div(".js-board-menu-prompt-collections")}))),s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},(()=>s.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})))))})),s.hr(),s.ul(".board-menu-navigation",(function(){return t&&!m&&s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-email",{href:"#"},(()=>s.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"}))))),r&&!m&&s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},(function(){return s.icon("subscribe","watch",{class:"board-menu-navigation-item-link-icon"}),s.raw("&nbsp;"),s.span(".js-subscribed-state",(()=>s.icon("check")))})))),h&&t&&i?s.li(".board-menu-navigation-item",(function(){return m?s.a(".board-menu-navigation-item-link.js-convert-to-board",{href:"#"},(function(){return s.icon("board",{class:"board-menu-navigation-item-link-icon"}),s.raw("&nbsp;"),s.format("convert-to-board")})):s.a(".board-menu-navigation-item-link.js-make-template",{href:"#"},(function(){return s.icon("template-board",{class:"board-menu-navigation-item-link-icon"}),s.raw("&nbsp;"),s.format("make-template")}))})):b&&s.li(".board-menu-navigation-item.disabled",(()=>s.span(".board-menu-navigation-item-link",(function(){return s.icon("template-board",{class:"board-menu-navigation-item-link-icon"}),s.raw("&nbsp;"),s.format("make-template"),s.div(".board-menu-pill-upgrade.js-board-menu-pill-templates-upgrade")})))),r&&!m&&a&&s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},(()=>s.icon("copy","copy-board",{class:"board-menu-navigation-item-link-icon"}))))),s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-share",{href:"#"},(()=>s.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})))))})),n&&(s.hr(),s.ul(".board-menu-navigation",(function(){if(o&&s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},(function(){return s.raw("&nbsp;"),m?s.format("close-template-ellipsis"):s.format("close-board-ellipsis")})))),l)return s.li(".board-menu-navigation-item",(()=>s.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},(function(){return s.raw("&nbsp;"),s.format("leave-board-ellipsis")}))))}))),s.hr(),s.form(".u-gutter",(function(){return s.label({for:"id-short-url"},(function(){return m?s.format("link-to-this-template"):s.format("link-to-this-board")})),s.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:e}),s.p(".quiet",(function(){return s.span({class:"icon-sm icon-".concat(c),title:d}),s.text(p)})),s.div(".js-qr-code")}))}))},"./app/scripts/views/templates/board_menu_more_activity_button.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_more_activity_button");e.exports=function(){return s.mustacheBlockInverted("hasCount",(()=>s.format("view-all-activity-ellipsis"))),s.mustacheBlock("hasCount",(()=>s.format("view-all-unread-activity-count-ellipsis",{count:s.mustacheVar("count")})))}},"./app/scripts/views/templates/board_menu_settings.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_settings");e.exports=function(){return s.mustacheVar("isLoggedIn")||(s.ul(".board-menu-navigation",(()=>s.li(".board-menu-navigation-item",(()=>s.a(".js-change-cookie-settings.board-menu-navigation-item-link",{href:"#"},(()=>s.icon("gear","cookie-settings",{class:"board-menu-navigation-item-link-icon"}))))))),s.hr()),s.div((()=>s.ul(".pop-over-list.inset",(()=>{if(s.mustacheBlock("blockTeamlessBoardsEnabled",(()=>s.li("#board-settings-change-org"))),s.mustacheBlockInverted("blockTeamlessBoardsEnabled",(()=>s.li((()=>s.a({class:"js-change-org".concat(s.mustacheBlockInverted("canChangeOrg",(()=>" disabled"))),href:"#"},(()=>(s.mustacheBlock("setOrgNull",(()=>s.format("remove-from-organization"))),s.mustacheBlockInverted("setOrgNull",(()=>s.format("change-organization-ellipsis"))),s.mustacheBlock("orgDisplayName",(()=>s.span(".sub-name",(()=>s.text(s.mustacheVar("orgDisplayName"))))))))))))),s.hr(),s.li((()=>s.a({class:s.mustacheBlock("__own",(()=>"js-toggle-covers"))+s.mustacheBlockInverted("__own",(()=>" disabled")),href:"#"},(()=>(s.mustacheBlockInverted("cardCovers",(()=>s.format("enable-card-covers"))),s.mustacheBlock("cardCovers",(()=>(s.format("card-covers-enabled"),s.icon("check")))),s.span(".sub-name",(()=>s.format("show-image-attachments-and-colors-on-the-front-of-cards")))))))),s.hr(),s.mustacheVar("isTemplate")||s.li((()=>s.a({class:s.mustacheBlock("__own",(()=>"js-change-comments"))+s.mustacheBlockInverted("__own",(()=>" disabled")),href:"#"},(()=>s.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:s.mustacheVar("commentsDisplay")}))))),s.mustacheVar("votingEnabled")&&s.li((()=>s.a({class:s.mustacheBlock("__own",(()=>"js-change-voting"))+s.mustacheBlockInverted("__own",(()=>" disabled")),href:"#"},(()=>s.format("voting-permissions-ellipsis-votingdisplay",{votingDisplay:s.mustacheVar("votingDisplay")}))))),!s.mustacheVar("isTemplate"))return s.li((()=>s.a({class:s.mustacheBlock("__own",(()=>"js-change-add-members"))+s.mustacheBlockInverted("__own",(()=>" disabled")),href:"#"},(()=>s.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:s.mustacheVar("invitationsDisplay")}))))),s.hr(),s.li((()=>s.a({class:" ".concat(s.mustacheBlock("__own",(()=>" js-toggle-org-mem-join "))," ").concat(s.mustacheBlockInverted("__own",(()=>" disabled "))," ").concat(s.mustacheBlockInverted("idOrganization",(()=>" disabled "))," ").concat(s.mustacheBlock("permissionLevel_private",(()=>" disabled "))," "),href:"#"},(()=>(s.check(s.mustacheVar("selfJoin_true"),"allow-team-members-to-edit-and-join"),s.span(".sub-name",(()=>(s.mustacheBlock("hasOrg",(()=>s.mustacheBlock("permissionLevel_private",(()=>s.format("any-team-member-can-edit-and-join-this-board-to-enable-this-the-board-cant-be-private"))))),s.mustacheBlock("hasOrg",(()=>s.mustacheBlockInverted("permissionLevel_private",(()=>s.format("any-team-member-can-edit-and-join-this-board"))))),s.mustacheBlockInverted("hasOrg",(()=>s.mustacheBlock("permissionLevel_private",(()=>s.format("any-team-member-can-edit-and-join-this-board-to-enable-this-the-board-has-to-be-a-part-of-a-team-and-the-board-cant-be-private"))))),s.mustacheBlockInverted("hasOrg",(()=>s.mustacheBlockInverted("permissionLevel_private",(()=>s.format("any-team-member-can-edit-and-join-this-board-to-enable-this-the-board-has-to-be-a-part-of-a-team")))))))))))))}))))}},"./app/scripts/views/templates/board_sidebar.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_sidebar");e.exports=s.renderable((()=>s.div(".board-menu-tab-content",(function(){return s.div(".board-menu-header.js-board-menu-title",(function(){return s.div(".board-menu-header-content",(function(){return s.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:s.l("go-back")}),s.h3(".board-menu-header-title.js-board-menu-title-text"),s.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:s.l("close-the-board-menu")})})),s.hr(".board-menu-header-divider")})),s.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")}))))},"./app/scripts/views/templates/board_sidebar_search_input.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("board_menu_default");e.exports.renderInputRow=s.renderable((({title:e,showFilterButton:t})=>s.div(".board-menu-navigation-row",(function(){if(s.div(".input-container",(function(){return s.input(".js-input.js-autofocus",{type:"search",attr:"title",placeholder:s.l("search-cards-placeholder"),"aria-label":s.l("search-cards-placeholder"),value:e}),s.div(".js-input-search-icon")})),t)return s.button(".button.js-search-open-card-filter",(()=>s.icon("filter")))})))),e.exports.renderInputIcon=s.renderable((function({title:e}){return e?s.a(".input-icon.js-search-clear-title",{href:"#"},(()=>s.icon("close"))):s.a(".input-icon.js-search-open-card-filter",{href:"#"},(()=>s.icon("search")))}))},"./app/scripts/views/templates/description.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("description");e.exports=s.renderable((({editable:e,isCardDesc:t,placeholderKey:i,isAdmin:r,isTemplate:n})=>s.div(".window-module",(function(){return s.div(".window-module-title.window-module-title-no-divider.description-title",(function(){if(s.span(".icon-description.icon-lg.window-module-title-icon"),s.h3(".u-inline-block",(()=>s.format("description"))),e)return s.div({class:s.classify({editable:e}),attr:"desc"},(function(){return s.a(".nch-button.ml-4.hide-on-edit.js-show-with-desc.js-edit-desc.js-edit-desc-button",{href:"#"},(()=>s.format("edit"))),s.span(".editing-members-description.js-editing-members-description.hide")}))})),s.div(".u-gutter",(()=>s.div({class:s.classify({editable:e}),attr:"desc"},(()=>s.div(".description-content.js-desc-content",(function(){if(s.div(".description-content-fade-button",(()=>s.span(".description-content-fade-button-text",(()=>s.format("show-full-description"))))),s.div(".current.markeddown.hide-on-edit.js-desc.js-show-with-desc.hide",{dir:"auto"}),e||!n||t||r||s.div(".description-content-no-edit.js-hide-with-desc",(()=>s.format(i))),e)return s.p(".u-bottom.js-hide-with-desc",(()=>s.a({class:s.classify({"description-fake-text-area hide-on-edit js-edit-desc  js-hide-with-draft":!0,large:!t}),href:"#"},(()=>s.format(i))))),s.div(".description-edit.edit",(function(){return s.a(".helper.nch-button.js-format-help",{href:"#"},(()=>s.format("formatting-help"))),s.textarea(".field.field-autosave.js-description-draft.description",{placeholder:s.l(i)})})),s.p(".edits-warning.quiet",(function(){return s.format("you-have-unsaved-edits-on-this-field"),s.text(" "),s.a(".js-view-edits",{href:"#"},(()=>s.format("view-edits"))),s.text(" - "),s.a(".js-discard-edits",{href:"#"},(()=>s.format("discard")))})),s.p(".edits-error.error",(()=>s.format("edit-not-saved")))}))))))}))))},"./app/scripts/views/templates/edit_controls.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("edit_controls");e.exports=s.renderable((()=>s.div(".edit-controls.u-clearfix",(function(){return s.input(".nch-button.nch-button--primary.confirm.mod-submit-edit.js-save-edit",{type:"submit",value:s.l("save")}),s.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"})}))))},"./app/scripts/views/templates/formatting_help.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("formatting_help");e.exports=function(){return s.p((()=>s.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax"))),s.hr(),s.p(".quiet",(()=>s.format("first-level-header"))),s.code((function(){return s.format("making-scrambled-eggs-a-primer"),s.br(),s.text("\n    ===============================\n  ")})),s.hr(),s.p(".quiet",(()=>s.format("second-level-header"))),s.code((function(){return s.format("1-1-preparation"),s.br(),s.text("\n    ----------------\n  ")})),s.hr(),s.p(".quiet",(()=>s.format("paragraphs"))),s.code((()=>s.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk"))),s.hr(),s.p(".quiet",(()=>s.format("bold"))),s.code((()=>s.format("carefully-crack-the-eggs"))),s.hr(),s.p(".quiet",(()=>s.format("emphasis"))),s.code((()=>s.format("whisk-the-eggs-vigorously"))),s.hr(),s.p(".quiet",(()=>s.format("lists"))),s.code((function(){return s.format("ingredients"),s.br(),s.br(),s.format("eggs"),s.br(),s.format("oil"),s.br(),s.format("optional-milk")})),s.hr(),s.p(".quiet",(()=>s.format("links"))),s.code((()=>s.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf"))),s.hr(),s.p(".quiet",(()=>s.format("images"))),s.code((()=>s.format("the-finished-dish-https-example-com-eggs-png")))}},"./app/scripts/views/templates/popover_about_this_board_admin_list.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("popover_about_this_board_admin_list");e.exports=()=>s.div(".about-this-board-admin-list-popover",(()=>s.ul(".js-admin-list",(()=>s.li(".pop-over-member-list",(()=>s.span(".name.js-show-all-admins")))))))},"./app/scripts/views/templates/popover_share.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("popover_share");e.exports=s.renderable((({hasCsvExport:e,csvURL:t,jsonURL:i,needsUpgradeForCsv:r,upgradeUrl:n,hasOrganization:o,upsellEnabled:a,isAdDismissed:l,featureFlag:d})=>s.ul(".pop-over-list",(function(){if(s.li((()=>s.a(".js-print",{href:"#",title:s.l("print-using-the-browser-s-print-function-you-can-use-file")},(()=>s.format("print-ellipsis"))))),d?s.li((()=>e?s.a(".js-export",{href:"#"},(()=>s.format("export-board"))):s.a(".js-export-json",{href:i,title:s.l("export-the-board-data-in-json-format")},(()=>s.format("export-json"))))):(s.li((()=>e?s.a(".js-export-csv",{href:t,title:s.l("export-the-board-data-in-csv-format")},(()=>s.format("export-csv"))):s.a(".disabled",{href:"#",title:s.l("export-the-board-data-in-csv-format")},(function(){return s.format("export-csv"),s.div({class:"export-csv-update-pill",id:"js-export-csv-pill-update-prompt"})})))),s.li((()=>s.a(".js-export-json",{href:i,title:s.l("export-the-board-data-in-json-format")},(()=>s.format("export-json")))))),!e&&a)return s.div(".popover-share-ads-container",(()=>s.div(".print-and-export-upgrade-prompt-wrapper")))}))))},"./app/scripts/views/templates/product_promo_disable_overlay.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")();e.exports=s.renderable((()=>s.div(".product-promo-disable-overlay")))},"./app/scripts/views/templates/search_help_popover.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("search_help_popover");e.exports=s.renderable((function(){const e=e=>s.format(e,{archived:"archived",attachments:"attachments",board:"board",checklist:"checklist",comment:"comment",cover:"cover",created:"created",day:"day",description:"description",due:"due",edited:"edited",has:"has",id:"id",is:"is",label:"label",list:"list",member:"member",members:"members",month:"month",name:"name",open:"open",overdue:"overdue",sort:"sort",starred:"starred",stickers:"stickers",week:"week"});return s.div(".search-tips.js-no-input",(()=>s.div(".search-tips-list.js-search-tips-list",(function(){return s.p(".quiet",(()=>e("intro-text"))),s.dl((function(){return s.dt((()=>s.format("at-name"))),s.dd((()=>e("returns-cards-assigned-to-a-member-member-also-works-me-will-include-only-your-cards"))),s.dt((()=>s.format("label"))),s.dd((()=>e("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works"))),s.dt((()=>e("list-name"))),s.dd((()=>e("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name"))),s.dt((()=>e("has-attachments"))),s.dd((()=>e("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect"))),s.dt((()=>e("due-day"))),s.dd((()=>e("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days"))),s.dt((()=>e("created-day"))),s.dd((()=>e("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days"))),s.dt((()=>e("edited-day"))),s.dd((()=>e("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days"))),s.dt((()=>e("description-checklist-comment-and-name"))),s.dd((()=>e("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment"))),s.dt((()=>e("sort-created"))),s.dd((()=>e("sorts-cards-by-date-created-sort-edited-and-sort-due-also-work-as-expected")))}))}))))}))},"./app/scripts/views/templates/sticker_pack_selection_list.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_pack_selection_list");e.exports=function(){return s.h2((()=>s.text(s.mustacheVar("displayName")))),s.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},"./app/scripts/views/templates/sticker_select.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_select");e.exports=s.renderable((function({additionalStickersEnabled:e,upsellEnabled:t,useAnimatedStickers:i}){return s.div(".search-stickers",(function(){return s.input(".js-search-stickers",{type:"text",placeholder:s.l("search-giphy")}),s.span(".icon-sm.icon-search")})),s.div(".spinner.loading.js-search-spinner.hide"),s.div(".giphy-stickers.js-giphy-stickers.hide",(function(){return s.div(".stickers-footer",(function(){return s.div(".check-div.mod-animated-check-div",(function(){return s.input(".animated-checkbox.js-use-animated-stickers",{type:"checkbox",checked:i,id:"usedAnimated"}),s.label({for:"usedAnimated"},(()=>s.format("use-animated-stickers")))})),s.span(".giphy-attribution")})),s.div(".js-giphy-stickers-no-results",(()=>s.span(".no-results",(()=>s.format("no-results"))))),s.div(".sticker-list.u-clearfix.js-search-sticker-list")})),s.div(".js-static-stickers",(function(){if(s.div(".sticker-list.u-clearfix.js-standard-sticker-list"),e||t)return s.div(".js-premium-stickers"),s.h2((()=>s.format("custom-stickers"))),s.div(".sticker-list.u-clearfix.js-custom-sticker-list")}))}))},"./app/scripts/views/templates/sticker_select_item.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_select_item");e.exports=function(){return s.mustacheBlock("pending",(()=>s.img(".sticker-select-image.sticker-select-pending",{src:s.mustacheVar("url")}))),s.mustacheBlockInverted("pending",(function(){return s.img(".sticker-select-image.sticker-select-shadow",{src:s.mustacheVar("url")}),s.img(".sticker-select-image.sticker-select-fixed",{src:s.mustacheVar("url")}),s.img(".sticker-select-image.sticker-select-peel",{src:s.mustacheVar("url")})})),s.mustacheBlock("id",(()=>s.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",(function(){return s.icon("close",{class:"sticker-select-option-icon"}),s.span(".sticker-select-option-text.u-text-underline",(()=>s.format("delete")))})))),s.mustacheBlock("error",(()=>s.span(".sticker-select-option",(()=>s.span(".sticker-select-option-text",(()=>s.text(s.mustacheVar("error")))))))),s.mustacheBlock("pending",(()=>s.span(".sticker-select-option",(function(){return s.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),s.span(".sticker-select-option-text",(()=>s.format("uploading-ellipsis")))}))))}},"./app/scripts/views/templates/sticker_select_item_upload.js":function(e,t,i){const s=i("./app/scripts/views/internal/teacup-with-helpers.js")("sticker_select_item_upload");e.exports=()=>s.form({action:"/1/member/".concat(s.mustacheVar("id"),"/customStickers"),method:"post",enctype:"multipart/form-data"},(function(){return s.input({type:"hidden",name:"token",value:""}),s.input({type:"hidden",name:"format",value:"http"}),s.div(".sticker-select.sticker-select-upload",(function(){return s.span(".sticker-select-upload-icon.icon-lg.icon-add"),s.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image ".concat(s.mustacheBlockInverted("enabled_customStickers",(()=>" disabled"))),multiple:"multiple",accept:"image/*"})}))}))},"./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.tsx":function(e,t,i){"use strict";i.r(t),i.d(t,"ViewsAndCopies",(function(){return y})),i.d(t,"BoardMenuViewsAndCopies",(function(){return j}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./packages/nachos/icons/copy.tsx"),o=i("./packages/nachos/icons/subscribe.tsx"),a=i("./packages/i18n/index.ts"),l=i("./node_modules/@apollo/client/react/hooks/useQuery.js");i("./node_modules/@apollo/client/react/hooks/useLazyQuery.js");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u={context:{operationName:"BoardStats"}},m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BoardStats"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"board"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"boardId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stats"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"boardId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewCount"}},{kind:"Field",name:{kind:"Name",value:"copyCount"}}]}}]}}]}}]};var h=i("./packages/i18n/formatters.ts"),g=i("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),b=i.n(g),v=i("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.less"),f={insert:"head",singleton:!1},w=(b()(v.a,f),v.a.locals||{});const k=Object(a.forTemplate)("board_menu_about_this_board"),y=({isTemplate:e,showLabels:t,useSmallTextStyle:i,copyCount:s,viewCount:a})=>{const l=e&&s>=0&&a>0,d=k(1===s?"copy":"copies"),c=k(1===a?"view":"views"),p=i?w.viewCopyTextSmall:w.viewCopyText;return r.a.createElement("div",null,l&&r.a.createElement("div",null,r.a.createElement("span",{className:p,title:"".concat(Object(h.asNumber)(s)," ").concat(d)},r.a.createElement(n.a,{size:"small",color:"quiet",dangerous_className:w.iconViewCopy}),s&&Object(h.asCompactNumber)(s)," ",t&&d)," ",r.a.createElement("span",{className:p,title:"".concat(Object(h.asNumber)(a)," ").concat(c)},r.a.createElement(o.a,{size:"small",color:"quiet",dangerous_className:w.iconViewCopy}),a&&Object(h.asCompactNumber)(a)," ",t&&c)))},j=({idBoard:e,isTemplate:t,showLabels:i})=>{var s,n,o,a,d,p;const{data:h,error:g,loading:b}=function(e){const t=c(c({},u),e);return l.a(m,t)}({variables:{boardId:e}}),v=null!==(s=null==h||null===(n=h.board)||void 0===n||null===(o=n.stats)||void 0===o?void 0:o.copyCount)&&void 0!==s?s:0,f=null!==(a=null==h||null===(d=h.board)||void 0===d||null===(p=d.stats)||void 0===p?void 0:p.viewCount)&&void 0!==a?a:0,k=t&&v>=0&&f>0;return g||b?null:r.a.createElement("div",null,k&&r.a.createElement("div",{className:w.viewCopyComponent},r.a.createElement("hr",null),r.a.createElement(y,{isTemplate:t,showLabels:i,useSmallTextStyle:!1,copyCount:v,viewCount:f}),r.a.createElement("hr",null)))}},"./app/src/components/ExportPopoverContent/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"ExportPopoverContent",(function(){return A}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./node_modules/@apollo/client/react/hooks/useQuery.js");i("./node_modules/@apollo/client/react/hooks/useLazyQuery.js");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d={context:{operationName:"BoardExport"}},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BoardExport"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"idBoard"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"idExport"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"board"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"idBoard"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"idOrganization"}},{kind:"Field",name:{kind:"Name",value:"export"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"idExport"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"attempts"}},{kind:"Field",name:{kind:"Name",value:"finished"}},{kind:"Field",name:{kind:"Name",value:"stage"}}]}},{kind:"Field",name:{kind:"Name",value:"size"}}]}}]}}]}}]};var p=i("./node_modules/@apollo/client/react/hooks/useMutation.js");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g={context:{operationName:"StartBoardExport"}},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartBoardExport"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startBoardExport"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"attempts"}},{kind:"Field",name:{kind:"Name",value:"finished"}},{kind:"Field",name:{kind:"Name",value:"stage"}}]}},{kind:"Field",name:{kind:"Name",value:"size"}}]}}]}}]};var v=i("./packages/nachos/button.ts"),f=i("./packages/i18n/index.ts"),w=i("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=i.n(w),y=i("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/ExportPopoverContent/ExportPopoverContent.less"),j={insert:"head",singleton:!1},C=(k()(y.a,j),y.a.locals||{}),x=i("./app/common/lib/util/date.ts"),S=i("./app/gamma/src/util/dates.ts");function _(e){const t=["B","KB","MB","GB"];let i=e;for(let s=0;s<t.length;s++){if(i<1024||s===t.length-1)return e=Math.round(100*i)/100,"".concat(e," ").concat(t[s]);i/=1024}return"unknown"}var E=i("./packages/nachos/spinner.ts"),T=i("./packages/atlassian-analytics/index.ts");const P=Object(f.forTemplate)("popover_share"),A=({idBoard:e,idOrg:t})=>{const{data:i,startPolling:o,stopPolling:l}=function(e){const t=a(a({},d),e);return n.a(c,t)}({variables:{idBoard:e,idExport:"mostRecent"}}),u=i&&i.board&&i.board.export&&i.board.export.status.finished,[h,f]=Object(s.useState)(!1),[w,k]=Object(s.useState)(i&&i.board&&!!i.board.export);Object(s.useEffect)((()=>{w?u||(f(!0),o(1e3)):f(!1)}),[w,u,o]),Object(s.useEffect)((()=>{u&&(f(!1),l())}),[i,u,l]);const[y]=function(e){const t=m(m({},g),e);return p.a(b,t)}();if(Object(s.useEffect)((()=>{T.Analytics.sendScreenEvent({name:"exportBoardInlineDialog"})}),[e,t]),!i||!i.board)return r.a.createElement("div",null,r.a.createElement(E.a,{centered:!0}));i&&i.board&&i.board.idOrganization&&(t=i.board.idOrganization);return r.a.createElement("div",null,i.board.export&&i.board.export.status.finished&&!h&&r.a.createElement("p",null,P("last-exported",{timeOfLastExport:Object(S.getDateDeltaString)(Object(x.idToDate)(i.board.export.id),new Date),sizeOfExport:"number"==typeof i.board.export.size?_(i.board.export.size):"unknown"})),h&&w&&r.a.createElement("p",null,P("exporting-ellipsis")),!i.board.export&&!w&&r.a.createElement("p",{className:C.exportHistoryText},P("no-export-history")),r.a.createElement("div",{className:C.buttons},r.a.createElement(v.Button,{appearance:"primary",onClick:()=>{k(!0),f(!0),y({variables:{id:e}}).then((()=>{o(1e3)})),T.Analytics.sendClickedButtonEvent({buttonName:"exportButton",source:"exportBoardInlineDialog",containers:{board:{id:e},organization:{id:t}}})},className:C.exportButton,isDisabled:h},P("export")),i.board.export&&!h&&r.a.createElement("a",{className:C.downloadLink,href:"/1/boards/".concat(e,"/exports/").concat(i.board.export.id,"/download"),onClick:()=>{T.Analytics.sendClickedLinkEvent({linkName:"downloadLink",source:"exportBoardInlineDialog",containers:{board:{id:e},organization:{id:t}}})}},P("download"))))}},"./app/src/components/TemplateTips/LazyTemplateTipsPopover.tsx":function(e,t,i){"use strict";i.r(t),i.d(t,"LazyTemplateTipsPopover",(function(){return o}));var s=i("./node_modules/react/index.js"),r=i.n(s),n=i("./packages/use-lazy-component/index.ts");const o=({boardId:e,isInGallery:t,name:o,username:a,toggleAboutThisTemplate:l,toggleBackgroundSelector:d})=>{const c=Object(n.useLazyComponent)((()=>i.e(205).then(i.bind(null,"./app/src/components/TemplateTips/TemplateTipsPopover.tsx"))));return r.a.createElement(s.Suspense,{fallback:null},r.a.createElement(c,{boardId:e,isInGallery:t,name:o,username:a,toggleAboutThisTemplate:l,toggleBackgroundSelector:d}))}},"./app/src/components/UpgradePrompts/renderUpgradePrompt.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"renderUpgradePrompt",(function(){return a}));var s=i("./app/scripts/db/auth.js"),r=i("./app/src/components/ComponentWrapper/index.ts"),n=i("./packages/react-dom-wrapper/index.ts"),o=i("./packages/browser/index.ts");const a=(e,t,i={},a)=>{const{boardModel:l,extraCondition:d=(()=>!0),orgModel:c,promptID:p,allowUpsell:u}=i,m=s.Auth.me(),h=!!p&&m.isDismissed(p),g=c||l&&l.getOrganization(),b=!!g&&(!g.isPremium()&&!g.isEnterprise()),v=m.hasPaidOrgPowerUps(),f=(!Object(o.dontUpsell)()||u)&&!h&&b&&!v&&d(),w=()=>!!t&&n.default.unmountComponentAtNode(t),k="function"==typeof e?e({dismiss:()=>{p&&m.dismiss(p),w()}}):e;return t&&(f||a)?Object(r.renderComponent)(k,t):w(),w}},"./node_modules/@giphy/js-fetch-api/dist/api.js":function(e,t,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GiphyFetch=void 0;var n=r(i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/index.js")),o=r(i("./node_modules/cookie/index.js")),a=i("./node_modules/@giphy/js-fetch-api/dist/normalize/gif.js"),l=r(i("./node_modules/@giphy/js-fetch-api/dist/request.js")),d=function(e){return e&&e.type?e.type:"gifs"},c=function(){function e(e){var t=this;this.getQS=function(e){void 0===e&&(e={});var i=("undefined"!=typeof document?o.default.parse(document.cookie):{}).giphy_pbid;return n.default.stringify(s(s({},e),{api_key:t.apiKey,pingback_id:i}))},this.apiKey=e}return e.prototype.categories=function(e){return l.default("gifs/categories?"+this.getQS(e))},e.prototype.gif=function(e){return l.default("gifs/"+e+"?"+this.getQS(),a.normalizeGif)},e.prototype.gifs=function(e,t){return Array.isArray(e)?l.default("gifs?"+this.getQS({ids:e.join(",")}),a.normalizeGifs):l.default("gifs/categories/"+e+"/"+t+"?"+this.getQS(),a.normalizeGifs)},e.prototype.emoji=function(e){return l.default("emoji?"+this.getQS(e),a.normalizeGifs,"EMOJI")},e.prototype.search=function(e,t){void 0===t&&(t={});var i=t.channel?"@"+t.channel+" "+e:e,r=this.getQS(s(s({},t),{q:i})),n="text"===t.type?"TEXT_SEARCH":t.explore?"GIF_EXPLORE":"GIF_SEARCH";return l.default(d(t)+"/search?"+r,a.normalizeGifs,n)},e.prototype.subcategories=function(e,t){return l.default("gifs/categories/"+e+"?"+this.getQS(t))},e.prototype.trending=function(e){void 0===e&&(e={});var t="text"===e.type?"TEXT_TRENDING":"GIF_TRENDING";return l.default(d(e)+"/trending?"+this.getQS(e),a.normalizeGifs,t)},e.prototype.random=function(e){return l.default(d(e)+"/random?"+this.getQS(e),a.normalizeGif)},e.prototype.related=function(e,t){return l.default("gifs/related?"+this.getQS(s({gif_id:e},t)),a.normalizeGifs,"GIF_RELATED")},e}();t.GiphyFetch=c,t.default=c},"./node_modules/@giphy/js-fetch-api/dist/fetch-error.js":function(e,t,i){"use strict";var s,r=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,i,s){void 0===i&&(i=0),void 0===s&&(s="");var r=e.call(this,t)||this;return r.status=i,r.statusText=s,r}return r(t,e),t}(Error);t.default=n},"./node_modules/@giphy/js-fetch-api/dist/index.js":function(e,t,i){"use strict";var s,r=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0});var o=i("./node_modules/@giphy/js-util/dist/index.js"),a=i("./node_modules/@giphy/js-fetch-api/dist/api.js");Object.defineProperty(t,"GiphyFetch",{enumerable:!0,get:function(){return a.default}}),n(i("./node_modules/@giphy/js-fetch-api/dist/option-types.js"),t),n(i("./node_modules/@giphy/js-fetch-api/dist/result-types.js"),t);var l=i("./node_modules/@giphy/js-fetch-api/dist/paginator.js");Object.defineProperty(t,"gifPaginator",{enumerable:!0,get:function(){return l.gifPaginator}});var d=i("./node_modules/@giphy/js-fetch-api/package.json").version;(null===(s=o.getGiphySDKRequestHeaders())||void 0===s?void 0:s.get("X-GIPHY-SDK-NAME"))||(o.appendGiphySDKRequestHeader("X-GIPHY-SDK-NAME","FetchAPI"),o.appendGiphySDKRequestHeader("X-GIPHY-SDK-VERSION",d))},"./node_modules/@giphy/js-fetch-api/dist/normalize/gif.js":function(e,t,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeGifs=t.normalizeGif=t.USER_BOOL_PROPS=t.BOOL_PROPS=void 0,t.BOOL_PROPS=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker"],t.USER_BOOL_PROPS=["suppress_chrome","is_public","is_verified"];var r=function(e){return function(t){return e[t]=!!e[t]}},n=function(e){return"string"==typeof e?e:e.text},o=function(e,i,o){void 0===i&&(i=""),void 0===o&&(o="");var a=s({},e);a.id=String(a.id),a.tags=(a.tags||[]).map(n),a.bottle_data||(a.bottle_data={}),a.response_id=i,a.pingback_event_type=o,t.BOOL_PROPS.forEach(r(a));var l=a.user;if(l){var d=s({},l);t.USER_BOOL_PROPS.forEach(r(d)),a.user=d}return a};t.normalizeGif=function(e,t){var i=e.meta.response_id;return e.data=o(e.data,i,t),e},t.normalizeGifs=function(e,t){var i=e.meta.response_id;return e.data=e.data.map((function(e){return o(e,i,t)})),e}},"./node_modules/@giphy/js-fetch-api/dist/option-types.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@giphy/js-fetch-api/dist/paginator.js":function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function a(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,s,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(r=2&n[0]?s.return:n[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,s=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},n=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,r++)s[r]=n[o];return s};Object.defineProperty(t,"__esModule",{value:!0}),t.gifPaginator=void 0,t.gifPaginator=function(e,t){void 0===t&&(t=[]);var i=n(t),o=t.map((function(e){return e.id})),a=t.length,l=!1;return function(){return s(void 0,void 0,void 0,(function(){var t,s,d;return r(this,(function(r){switch(r.label){case 0:return l?[2,i]:[4,e(a)];case 1:return t=r.sent(),s=t.pagination,d=t.data,a=s.count+s.offset,l=a===s.total_count,d.forEach((function(e){var t=e.id;o.includes(t)||(i.push(e),o.push(t))})),[2,n(i)]}}))}))}}},"./node_modules/@giphy/js-fetch-api/dist/request.js":function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function a(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,s,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(r=2&n[0]?s.return:n[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,s=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR=t.ERROR_PREFIX=void 0;var o=n(i("./node_modules/@giphy/js-fetch-api/dist/fetch-error.js"));t.ERROR_PREFIX="@giphy/js-fetch-api: ",t.DEFAULT_ERROR="Error fetching";var a=function(e){return e},l={};t.default=function(e,i,n){var d=this;if(void 0===i&&(i=a),!l[e]){l[e]=s(d,void 0,void 0,(function(){var s,a,d,c,p;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,9,,10]),[4,fetch("https://api.giphy.com/v1/"+e,{method:"get"})];case 1:return(a=r.sent()).ok?[4,a.json()]:[3,3];case 2:return c=r.sent(),[2,i(c,n)];case 3:d=t.DEFAULT_ERROR,r.label=4;case 4:return r.trys.push([4,6,,7]),[4,a.json()];case 5:return(c=r.sent()).message&&(d=c.message),[3,7];case 6:return r.sent(),[3,7];case 7:s=new o.default(""+t.ERROR_PREFIX+d,a.status,a.statusText),r.label=8;case 8:return[3,10];case 9:return p=r.sent(),s=new o.default(p.message),delete l[e],[3,10];case 10:throw s}}))}))}return l[e]}},"./node_modules/@giphy/js-fetch-api/dist/result-types.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/formats.js":function(e,t,i){"use strict";var s=String.prototype.replace,r=/%20/g,n=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/utils.js"),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=n.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return s.call(e,r,"+")},RFC3986:function(e){return String(e)}}},o)},"./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/index.js":function(e,t,i){"use strict";var s=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/stringify.js"),r=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/parse.js"),n=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/formats.js");e.exports={formats:n,parse:r,stringify:s}},"./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/parse.js":function(e,t,i){"use strict";var s=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/utils.js"),r=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},a=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,n=/(\[[^[\]]*])/g,o=i.depth>0&&/(\[[^[\]]*])/.exec(s),a=o?s.slice(0,o.index):s,l=[];if(a){if(!i.plainObjects&&r.call(Object.prototype,a)&&!i.allowPrototypes)return;l.push(a)}for(var d=0;i.depth>0&&null!==(o=n.exec(s))&&d<i.depth;){if(d+=1,!i.plainObjects&&r.call(Object.prototype,o[1].slice(1,-1))&&!i.allowPrototypes)return;l.push(o[1])}return o&&l.push("["+s.slice(o.index)+"]"),function(e,t,i){for(var s=t,r=e.length-1;r>=0;--r){var n,o=e[r];if("[]"===o&&i.parseArrays)n=[].concat(s);else{n=i.plainObjects?Object.create(null):{};var a="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,l=parseInt(a,10);i.parseArrays||""!==a?!isNaN(l)&&o!==a&&String(l)===a&&l>=0&&i.parseArrays&&l<=i.arrayLimit?(n=[])[l]=s:n[a]=s:n={0:s}}s=n}return s}(l,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return n;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?n.charset:e.charset;return{allowDots:void 0===e.allowDots?n.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:n.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:n.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:n.comma,decoder:"function"==typeof e.decoder?e.decoder:n.decoder,delimiter:"string"==typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:n.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:n.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:n.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:n.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:n.strictNullHandling}}(t);if(""===e||null==e)return i.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var i,a={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,c=l.split(t.delimiter,d),p=-1,u=t.charset;if(t.charsetSentinel)for(i=0;i<c.length;++i)0===c[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===c[i]?u="utf-8":"utf8=%26%2310003%3B"===c[i]&&(u="iso-8859-1"),p=i,i=c.length);for(i=0;i<c.length;++i)if(i!==p){var m,h,g=c[i],b=g.indexOf("]="),v=-1===b?g.indexOf("="):b+1;-1===v?(m=t.decoder(g,n.decoder,u,"key"),h=t.strictNullHandling?null:""):(m=t.decoder(g.slice(0,v),n.decoder,u,"key"),h=t.decoder(g.slice(v+1),n.decoder,u,"value")),h&&t.interpretNumericEntities&&"iso-8859-1"===u&&(h=o(h)),h&&t.comma&&h.indexOf(",")>-1&&(h=h.split(",")),r.call(a,m)?a[m]=s.combine(a[m],h):a[m]=h}return a}(e,i):e,d=i.plainObjects?Object.create(null):{},c=Object.keys(l),p=0;p<c.length;++p){var u=c[p],m=a(u,l[u],i);d=s.merge(d,m,i)}return s.compact(d)}},"./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/stringify.js":function(e,t,i){"use strict";var s=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/utils.js"),r=i("./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/formats.js"),n=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,l=Array.prototype.push,d=function(e,t){l.apply(e,a(t)?t:[t])},c=Date.prototype.toISOString,p=r.default,u={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,format:p,formatter:r.formatters[p],indices:!1,serializeDate:function(e){return c.call(e)},skipNulls:!1,strictNullHandling:!1},m=function e(t,i,r,n,o,l,c,p,m,h,g,b,v){var f,w=t;if("function"==typeof c?w=c(i,w):w instanceof Date?w=h(w):"comma"===r&&a(w)&&(w=w.join(",")),null===w){if(n)return l&&!b?l(i,u.encoder,v,"key"):i;w=""}if("string"==typeof(f=w)||"number"==typeof f||"boolean"==typeof f||"symbol"==typeof f||"bigint"==typeof f||s.isBuffer(w))return l?[g(b?i:l(i,u.encoder,v,"key"))+"="+g(l(w,u.encoder,v,"value"))]:[g(i)+"="+g(String(w))];var k,y=[];if(void 0===w)return y;if(a(c))k=c;else{var j=Object.keys(w);k=p?j.sort(p):j}for(var C=0;C<k.length;++C){var x=k[C];o&&null===w[x]||(a(w)?d(y,e(w[x],"function"==typeof r?r(i,x):i,r,n,o,l,c,p,m,h,g,b,v)):d(y,e(w[x],i+(m?"."+x:"["+x+"]"),r,n,o,l,c,p,m,h,g,b,v)))}return y};e.exports=function(e,t){var i,s=e,l=function(e){if(!e)return u;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||u.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=r.default;if(void 0!==e.format){if(!n.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=r.formatters[i],o=u.filter;return("function"==typeof e.filter||a(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:u.addQueryPrefix,allowDots:void 0===e.allowDots?u.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:u.charsetSentinel,delimiter:void 0===e.delimiter?u.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:u.encode,encoder:"function"==typeof e.encoder?e.encoder:u.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:u.encodeValuesOnly,filter:o,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:u.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:u.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:u.strictNullHandling}}(t);"function"==typeof l.filter?s=(0,l.filter)("",s):a(l.filter)&&(i=l.filter);var c,p=[];if("object"!=typeof s||null===s)return"";c=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=o[c];i||(i=Object.keys(s)),l.sort&&i.sort(l.sort);for(var g=0;g<i.length;++g){var b=i[g];l.skipNulls&&null===s[b]||d(p,m(s[b],b,h,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.formatter,l.encodeValuesOnly,l.charset))}var v=p.join(l.delimiter),f=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),v.length>0?f+v:""}},"./node_modules/@giphy/js-fetch-api/node_modules/qs/lib/utils.js":function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var n=t[s],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var d=a[l],c=o[d];"object"==typeof c&&null!==c&&-1===i.indexOf(c)&&(t.push({obj:o,prop:d}),i.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(r(i)){for(var s=[],n=0;n<i.length;++n)void 0!==i[n]&&s.push(i[n]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(e){return s}},encode:function(e,t,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===i)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var r="",o=0;o<s.length;++o){var a=s.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=s.charAt(o):a<128?r+=n[a]:a<2048?r+=n[192|a>>6]+n[128|63&a]:a<55296||a>=57344?r+=n[224|a>>12]+n[128|a>>6&63]+n[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&s.charCodeAt(o)),r+=n[240|a>>18]+n[128|a>>12&63]+n[128|a>>6&63]+n[128|63&a])}return r},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,n){if(!i)return t;if("object"!=typeof i){if(r(t))t.push(i);else{if(!t||"object"!=typeof t)return[t,i];(n&&(n.plainObjects||n.allowPrototypes)||!s.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(i);var a=t;return r(t)&&!r(i)&&(a=o(t,n)),r(t)&&r(i)?(i.forEach((function(i,r){if(s.call(t,r)){var o=t[r];o&&"object"==typeof o&&i&&"object"==typeof i?t[r]=e(o,i,n):t.push(i)}else t[r]=i})),t):Object.keys(i).reduce((function(t,r){var o=i[r];return s.call(t,r)?t[r]=e(t[r],o,n):t[r]=o,t}),a)}}},"./node_modules/@giphy/js-fetch-api/package.json":function(e,t){e.exports={scripts:{clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc",prepublish:"npm run clean && tsc",build:"tsc",test:"jest --config ./jestconfig.js","test:watch":"jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"1.6.0",main:"dist/index.js",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",types:"dist/index.d.ts",files:["dist/**/*","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"^2.0.2","@giphy/js-util":"^1.9.1",cookie:"0.4.0",qs:"^6.7.0"},devDependencies:{"@types/cookie":"^0.3.3","@types/qs":"^6.5.3","jest-fetch-mock":"^2.1.2","parcel-bundler":"^1.12.3",typedoc:"^0.14.2","typedoc-thunder-theme":"^0.0.2",typescript:"^3.8.2"},gitHead:"8d57ae7cdd775900da581fb511b92f23cd0d8dd8"}},"./node_modules/@giphy/js-util/dist/bestfit.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("./node_modules/@giphy/js-util/dist/log.js"),r=50;t.setRenditionScaleUpMaxPixels=function(e){s.Logger.debug("@giphy/js-util set rendition selection scale up max pixels to "+e),r=e},t.default=function(e,t,i,s){void 0===s&&(s=r);var n=e[0],o=e.filter((function(e){return e.width*e.height>n.width*n.height&&(n=e),t-e.width<=s&&i-e.height<=s}));return 0===o.length?n:function(e,t,i){var s,r=1/0;return i.forEach((function(i){var n=i.width/e*(i.height/t),o=Math.abs(1-n);o<r&&(r=o,s=i)})),s}(t,i,o)}},"./node_modules/@giphy/js-util/dist/collections.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=function(e,t){if(Array.isArray(e))throw"This map is just for objects, just use array.map for arrays";return Object.keys(e).reduce((function(i,s){return i[s]=t(e[s],s),i}),{})},t.forEach=function(e,t){if(Array.isArray(e))throw"This map is just for objects, just use array.forEach for arrays";return Object.keys(e).forEach((function(i){t(e[i],i)}))},t.take=function(e,t){return void 0===t&&(t=0),e.slice(0,t)},t.without=function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))},t.pick=function(e,t){var i={};return t.forEach((function(t){void 0!==e[t]&&(i[t]=e[t])})),i}},"./node_modules/@giphy/js-util/dist/construct-moat-data.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constructMoatData=function(e){var t,i=e.tdata,s=((null===(t=null==i?void 0:i.web)||void 0===t?void 0:t.filter((function(e){return"Moat"===e.vendor})))||[])[0];if(null==s?void 0:s.verificationParameters){var r=s.verificationParameters,n=r.moatClientLevel1,o=void 0===n?"_ADVERTISER_":n,a=r.moatClientLevel2,l=void 0===a?"_CAMPAIGN_":a,d=r.moatClientLevel3,c=void 0===d?"_LINE_ITEM_":d,p=r.moatClientLevel4,u=void 0===p?"_CREATIVE_":p,m=r.moatClientSlicer1,h=void 0===m?"_SITE_":m,g=r.moatClientSlicer2,b=void 0===g?"_PLACEMENT_":g,v=r.zMoatPosition;return{moatClientLevel1:o,moatClientLevel2:l,moatClientLevel3:c,moatClientLevel4:u,moatClientSlicer1:h,moatClientSlicer2:b,zMoatPosition:void 0===v?"_POSITION_":v}}}},"./node_modules/@giphy/js-util/dist/get-client-rect-from-el.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=0,i=0,s=e.offsetWidth,r=e.offsetHeight;do{t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent}while(e);return{left:t,top:i,width:s,height:r,right:t+s,bottom:i+r}}},"./node_modules/@giphy/js-util/dist/gif-utils.js":function(e,t,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i("./node_modules/@giphy/js-util/dist/collections.js"),o=r(i("./node_modules/@giphy/js-util/dist/bestfit.js")),a=i("./node_modules/@giphy/js-util/dist/webp-check.js");t.getSpecificRendition=function(e,t,i,s){var r=e.images,n=e.is_sticker;if(void 0===i&&(i=!1),void 0===s&&(s=!1),!r||!t)return"";var o=r[t+((i=i&&!s)?"_still":"")];if(o){if(n||i)return o.url;var l=a.SUPPORTS_WEBP&&o.webp;return s?o.mp4:l||o.url}return""};t.getBestRendition=function(e,t,i,r){var a=n.pick(e,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),l=Object.entries(a).map((function(e){var t=e[0],i=e[1];return s({renditionName:t},i)}));return o.default(l,t,i,r)},t.getBestRenditionUrl=function(e,i,s,r){var n=e.images,o=e.video,l=e.type;if(void 0===r&&(r={isStill:!1,useVideo:!1}),!i||!s||!n)return"";var d=r.useVideo,c=r.isStill,p=r.scaleUpMaxPixels,u=function(e,t,i){return"video"===e&&i&&i.previews&&!Object.keys(t).length?i.previews:t}(l,n,o),m=u[t.getBestRendition(u,i,s,p).renditionName+(c&&!d?"_still":"")];return(d?m.mp4:a.SUPPORTS_WEBP&&m.webp?m.webp:m.url)||""},t.getGifHeight=function(e,t){var i=e.images.fixed_width;if(i){var s=i.width/i.height;return Math.round(t/s)}return 0},t.getGifWidth=function(e,t){var i=e.images.fixed_width;if(i){var s=i.width/i.height;return Math.round(t*s)}return 0},t.getAltText=function(e){var t=e.user,i=e.tags,s=void 0===i?[]:i,r=e.is_sticker,o=void 0!==r&&r,a=e.title,l=void 0===a?"":a;if(l)return l;var d=t&&t.username||"";return(d?d+" ":"")+n.take(n.without(s,["transparent"]),d?4:5).join(" ")+" "+(o?"Sticker":"GIF")}},"./node_modules/@giphy/js-util/dist/index.js":function(e,t,i){"use strict";function s(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0});var r=i("./node_modules/@giphy/js-util/dist/bestfit.js");t.bestfit=r.default,t.setRenditionScaleUpMaxPixels=r.setRenditionScaleUpMaxPixels,s(i("./node_modules/@giphy/js-util/dist/collections.js")),s(i("./node_modules/@giphy/js-util/dist/construct-moat-data.js"));var n=i("./node_modules/@giphy/js-util/dist/get-client-rect-from-el.js");t.getClientRect=n.default;var o=i("./node_modules/@giphy/js-util/dist/gif-utils.js");t.getAltText=o.getAltText,t.getBestRendition=o.getBestRendition,t.getBestRenditionUrl=o.getBestRenditionUrl,t.getGifHeight=o.getGifHeight,t.getGifWidth=o.getGifWidth,t.getSpecificRendition=o.getSpecificRendition,s(i("./node_modules/@giphy/js-util/dist/log.js")),s(i("./node_modules/@giphy/js-util/dist/sdk-headers.js"));var a=i("./node_modules/@giphy/js-util/dist/tracking-pixel.js");t.injectTrackingPixel=a.default;var l=i("./node_modules/@giphy/js-util/dist/webp-check.js");t.checkIfWebP=l.checkIfWebP},"./node_modules/@giphy/js-util/dist/log.js":function(e,t,i){"use strict";var s,r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,r++)s[r]=n[o];return s};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(s=t.LogLevel||(t.LogLevel={})),t.Logger={ENABLED:"undefined"!=typeof window&&location&&-1!==location.search.indexOf("giphy-debug"),LEVEL:0,PREFIX:"GiphyJS",debug:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Logger.ENABLED&&t.Logger.LEVEL<=s.DEBUG&&console.debug.apply(console,r([t.Logger.PREFIX],e))},info:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Logger.ENABLED&&t.Logger.LEVEL<=s.INFO&&console.info.apply(console,r([t.Logger.PREFIX],e))},warn:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Logger.ENABLED&&t.Logger.LEVEL<=s.WARN&&console.warn.apply(console,r([t.Logger.PREFIX],e))},error:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Logger.ENABLED&&t.Logger.LEVEL<=s.ERROR&&console.error.apply(console,r([t.Logger.PREFIX],e))}}},"./node_modules/@giphy/js-util/dist/sdk-headers.js":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=("undefined"!=typeof window?window:e)||{};i._GIPHY_SDK_HEADERS_=i._GIPHY_SDK_HEADERS_||(i.Headers?new i.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0),t.getGiphySDKRequestHeaders=function(){return i._GIPHY_SDK_HEADERS_},t.appendGiphySDKRequestHeader=function(e,i){var s;return null===(s=t.getGiphySDKRequestHeaders())||void 0===s?void 0:s.set(e,i)},t.appendGiphySDKRequestParam=function(e,i){var s;return null===(s=t.getGiphySDKRequestHeaders())||void 0===s?void 0:s.set(e,i)}}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/@giphy/js-util/dist/tracking-pixel.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("./node_modules/dompurify/dist/purify.js");t.default=function(e){void 0===e&&(e=[]),e.forEach((function(e){var t,i=document.createElement("html");e=e.replace("%%CACHEBUSTER%%",Date.now().toString()),i.innerHTML=s.sanitize(e);var r=i.querySelector("img");r&&(null===(t=null===document||void 0===document?void 0:document.querySelector("head"))||void 0===t||t.appendChild(r))}))}},"./node_modules/@giphy/js-util/dist/webp-check.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTS_WEBP=null,t.checkIfWebP=new Promise((function(e){"undefined"==typeof Image&&e(!1);var i=new Image;i.onload=function(){t.SUPPORTS_WEBP=!0,e(t.SUPPORTS_WEBP)},i.onerror=function(){t.SUPPORTS_WEBP=!1,e(t.SUPPORTS_WEBP)},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}))},"./node_modules/cookie/index.js":function(e,t,i){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},r=t||{},o=e.split(n),l=r.decode||s,d=0;d<o.length;d++){var c=o[d],p=c.indexOf("=");if(!(p<0)){var u=c.substr(0,p).trim(),m=c.substr(++p,c.length).trim();'"'==m[0]&&(m=m.slice(1,-1)),null==i[u]&&(i[u]=a(m,l))}}return i},t.serialize=function(e,t,i){var s=i||{},n=s.encode||r;if("function"!=typeof n)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var a=n(t);if(a&&!o.test(a))throw new TypeError("argument val is invalid");var l=e+"="+a;if(null!=s.maxAge){var d=s.maxAge-0;if(isNaN(d))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(d)}if(s.domain){if(!o.test(s.domain))throw new TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!o.test(s.path))throw new TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+s.expires.toUTCString()}s.httpOnly&&(l+="; HttpOnly");s.secure&&(l+="; Secure");if(s.sameSite){switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return l};var s=decodeURIComponent,r=encodeURIComponent,n=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/BoardMenuViewsAndCopies/BoardMenuViewsAndCopies.less":function(e,t,i){"use strict";var s=i("./node_modules/css-loader/dist/runtime/api.js"),r=i.n(s)()(!1);r.push([e.i,"._1sTq0MpQuCTSyh {\n  margin-left: 8px;\n}\n._2X_eLbqec7bt07 {\n  display: inline-flex;\n  font-weight: 600;\n  color: #5E6C84;\n}\n._1RIk1Ra33KeD7M {\n  display: inline-flex;\n  font-size: 12px;\n  color: #5E6C84;\n}\n.flk7K0Rc4ldrLc {\n  display: inline-flex;\n  height: 20px;\n  width: 20px;\n  justify-content: center;\n  align-items: center;\n}\n",""]),r.locals={viewCopyComponent:"_1sTq0MpQuCTSyh",viewCopyText:"_2X_eLbqec7bt07",viewCopyTextSmall:"_1RIk1Ra33KeD7M",iconViewCopy:"flk7K0Rc4ldrLc"},t.a=r},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/ExportPopoverContent/ExportPopoverContent.less":function(e,t,i){"use strict";var s=i("./node_modules/css-loader/dist/runtime/api.js"),r=i.n(s)()(!1);r.push([e.i,"._3lKIVc4WEu4U_H {\n  color: #8993A4;\n  padding: 0 4px;\n}\n._3lKIVc4WEu4U_H:hover {\n  color: #091E42;\n}\n.Rf_lDCmZgg5mPt {\n  margin: 0;\n}\n._2K0B76NHbTES8D {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 12px;\n}\n.C8Tayx3l28pXCh {\n  display: block;\n}\n",""]),r.locals={downloadLink:"_3lKIVc4WEu4U_H",exportButton:"Rf_lDCmZgg5mPt",buttons:"_2K0B76NHbTES8D",exportHistoryText:"C8Tayx3l28pXCh"},t.a=r},"./node_modules/dompurify/dist/purify.js":function(e,t,i){e.exports=function(){"use strict";function e(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var t=Object.hasOwnProperty,i=Object.setPrototypeOf,s=Object.isFrozen,r=Object.keys,n=Object.freeze,o=Object.seal,a="undefined"!=typeof Reflect&&Reflect,l=a.apply,d=a.construct;l||(l=function(e,t,i){return e.apply(t,i)}),n||(n=function(e){return e}),o||(o=function(e){return e}),d||(d=function(t,i){return new(Function.prototype.bind.apply(t,[null].concat(e(i))))});var c=x(Array.prototype.forEach),p=x(Array.prototype.indexOf),u=x(Array.prototype.join),m=x(Array.prototype.pop),h=x(Array.prototype.push),g=x(Array.prototype.slice),b=x(String.prototype.toLowerCase),v=x(String.prototype.match),f=x(String.prototype.replace),w=x(String.prototype.indexOf),k=x(String.prototype.trim),y=x(RegExp.prototype.test),j=S(RegExp),C=S(TypeError);function x(e){return function(t){for(var i=arguments.length,s=Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return l(e,t,s)}}function S(e){return function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];return d(e,i)}}function _(e,t){i&&i(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var o=b(n);o!==n&&(s(t)||(t[r]=o),n=o)}e[n]=!0}return e}function E(e){var i={},s=void 0;for(s in e)l(t,e,[s])&&(i[s]=e[s]);return i}var T=n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),A=n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),D=n(["#text"]),B=n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),N=n(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),I=n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=o(/\{\{[\s\S]*|[\s\S]*\}\}/gm),U=o(/<%[\s\S]*|[\s\S]*%>/gm),z=o(/^data-[\-\w.\u00B7-\uFFFF]/),V=o(/^aria-[\-\w]+$/),F=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),R=o(/^(?:\w+script|data):/i),$=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var q=function(){return"undefined"==typeof window?null:window},K=function(e,t){if("object"!==(void 0===e?"undefined":G(e))||"function"!=typeof e.createPolicy)return null;var i=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(i=t.currentScript.getAttribute(s));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q(),t=function(e){return W(e)};if(t.version="2.0.12",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var i=e.document,s=!1,o=e.document,a=e.DocumentFragment,l=e.HTMLTemplateElement,d=e.Node,x=e.NodeFilter,S=e.NamedNodeMap,Q=void 0===S?e.NamedNodeMap||e.MozNamedAttrMap:S,J=e.Text,X=e.Comment,Y=e.DOMParser,Z=e.trustedTypes;if("function"==typeof l){var ee=o.createElement("template");ee.content&&ee.content.ownerDocument&&(o=ee.content.ownerDocument)}var te=K(Z,i),ie=te&&Ne?te.createHTML(""):"",se=o,re=se.implementation,ne=se.createNodeIterator,oe=se.getElementsByTagName,ae=se.createDocumentFragment,le=i.importNode,de={};t.isSupported=re&&void 0!==re.createHTMLDocument&&9!==o.documentMode;var ce=M,pe=U,ue=z,me=V,he=R,ge=$,be=F,ve=null,fe=_({},[].concat(H(T),H(P),H(A),H(O),H(D))),we=null,ke=_({},[].concat(H(B),H(N),H(L),H(I))),ye=null,je=null,Ce=!0,xe=!0,Se=!1,_e=!1,Ee=!1,Te=!1,Pe=!1,Ae=!1,Oe=!1,De=!1,Be=!1,Ne=!1,Le=!0,Ie=!0,Me=!1,Ue={},ze=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ve=null,Fe=_({},["audio","video","img","source","image","track"]),Re=null,$e=_({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ge=null,He=o.createElement("form"),qe=function(e){Ge&&Ge===e||(e&&"object"===(void 0===e?"undefined":G(e))||(e={}),ve="ALLOWED_TAGS"in e?_({},e.ALLOWED_TAGS):fe,we="ALLOWED_ATTR"in e?_({},e.ALLOWED_ATTR):ke,Re="ADD_URI_SAFE_ATTR"in e?_(E($e),e.ADD_URI_SAFE_ATTR):$e,Ve="ADD_DATA_URI_TAGS"in e?_(E(Fe),e.ADD_DATA_URI_TAGS):Fe,ye="FORBID_TAGS"in e?_({},e.FORBID_TAGS):{},je="FORBID_ATTR"in e?_({},e.FORBID_ATTR):{},Ue="USE_PROFILES"in e&&e.USE_PROFILES,Ce=!1!==e.ALLOW_ARIA_ATTR,xe=!1!==e.ALLOW_DATA_ATTR,Se=e.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=e.SAFE_FOR_JQUERY||!1,Ee=e.SAFE_FOR_TEMPLATES||!1,Te=e.WHOLE_DOCUMENT||!1,Oe=e.RETURN_DOM||!1,De=e.RETURN_DOM_FRAGMENT||!1,Be=e.RETURN_DOM_IMPORT||!1,Ne=e.RETURN_TRUSTED_TYPE||!1,Ae=e.FORCE_BODY||!1,Le=!1!==e.SANITIZE_DOM,Ie=!1!==e.KEEP_CONTENT,Me=e.IN_PLACE||!1,be=e.ALLOWED_URI_REGEXP||be,Ee&&(xe=!1),De&&(Oe=!0),Ue&&(ve=_({},[].concat(H(D))),we=[],!0===Ue.html&&(_(ve,T),_(we,B)),!0===Ue.svg&&(_(ve,P),_(we,N),_(we,I)),!0===Ue.svgFilters&&(_(ve,A),_(we,N),_(we,I)),!0===Ue.mathMl&&(_(ve,O),_(we,L),_(we,I))),e.ADD_TAGS&&(ve===fe&&(ve=E(ve)),_(ve,e.ADD_TAGS)),e.ADD_ATTR&&(we===ke&&(we=E(we)),_(we,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&_(Re,e.ADD_URI_SAFE_ATTR),Ie&&(ve["#text"]=!0),Te&&_(ve,["html","head","body"]),ve.table&&(_(ve,["tbody"]),delete ye.tbody),n&&n(e),Ge=e)},Ke=function(e){h(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=ie}},We=function(e,i){try{h(t.removed,{attribute:i.getAttributeNode(e),from:i})}catch(e){h(t.removed,{attribute:null,from:i})}i.removeAttribute(e)},Qe=function(e){var t=void 0,i=void 0;if(Ae)e="<remove></remove>"+e;else{var r=v(e,/^[\r\n\t ]+/);i=r&&r[0]}var n=te?te.createHTML(e):e;try{t=(new Y).parseFromString(n,"text/html")}catch(e){}if(s&&_(ye,["title"]),!t||!t.documentElement){var a=(t=re.createHTMLDocument("")).body;a.parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=n}return e&&i&&t.body.insertBefore(o.createTextNode(i),t.body.childNodes[0]||null),oe.call(t,Te?"html":"body")[0]};t.isSupported&&function(){try{var e=Qe("<x/><title>&lt;/title&gt;&lt;img&gt;");y(/<\/title/,e.querySelector("title").innerHTML)&&(s=!0)}catch(e){}}();var Je=function(e){return ne.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,(function(){return x.FILTER_ACCEPT}),!1)},Xe=function(e){return!(e instanceof J||e instanceof X||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof Q&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI)},Ye=function(e){return"object"===(void 0===d?"undefined":G(d))?e instanceof d:e&&"object"===(void 0===e?"undefined":G(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ze=function(e,i,s){de[e]&&c(de[e],(function(e){e.call(t,i,s,Ge)}))},et=function(e){var i=void 0;if(Ze("beforeSanitizeElements",e,null),Xe(e))return Ke(e),!0;var s=b(e.nodeName);if(Ze("uponSanitizeElement",e,{tagName:s,allowedTags:ve}),("svg"===s||"math"===s)&&0!==e.querySelectorAll("p, br").length)return Ke(e),!0;if(!ve[s]||ye[s]){if(Ie&&!ze[s]&&"function"==typeof e.insertAdjacentHTML)try{var r=e.innerHTML;e.insertAdjacentHTML("AfterEnd",te?te.createHTML(r):r)}catch(e){}return Ke(e),!0}return"noscript"===s&&y(/<\/noscript/i,e.innerHTML)||"noembed"===s&&y(/<\/noembed/i,e.innerHTML)?(Ke(e),!0):(!_e||e.firstElementChild||e.content&&e.content.firstElementChild||!y(/</g,e.textContent)||(h(t.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=f(e.innerHTML,/</g,"&lt;"):e.innerHTML=f(e.textContent,/</g,"&lt;")),Ee&&3===e.nodeType&&(i=e.textContent,i=f(i,ce," "),i=f(i,pe," "),e.textContent!==i&&(h(t.removed,{element:e.cloneNode()}),e.textContent=i)),Ze("afterSanitizeElements",e,null),!1)},tt=function(e,t,i){if(Le&&("id"===t||"name"===t)&&(i in o||i in He))return!1;if(xe&&y(ue,t));else if(Ce&&y(me,t));else{if(!we[t]||je[t])return!1;if(Re[t]);else if(y(be,f(i,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(i,"data:")||!Ve[e])if(Se&&!y(he,f(i,ge,"")));else if(i)return!1}return!0},it=function(e){var i=void 0,s=void 0,n=void 0,o=void 0,a=void 0;Ze("beforeSanitizeAttributes",e,null);var l=e.attributes;if(l){var d={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};for(a=l.length;a--;){var c=i=l[a],h=c.name,v=c.namespaceURI;if(s=k(i.value),n=b(h),d.attrName=n,d.attrValue=s,d.keepAttr=!0,d.forceKeepAttr=void 0,Ze("uponSanitizeAttribute",e,d),s=d.attrValue,!d.forceKeepAttr){if("name"===n&&"IMG"===e.nodeName&&l.id)o=l.id,l=g(l,[]),We("id",e),We(h,e),p(l,o)>a&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===n&&"file"===s&&d.keepAttr&&(we[n]||!je[n]))continue;"id"===h&&e.setAttribute(h,""),We(h,e)}if(d.keepAttr)if(_e&&y(/\/>/i,s))We(h,e);else if(y(/svg|math/i,e.namespaceURI)&&y(j("</("+u(r(ze),"|")+")","i"),s))We(h,e);else{Ee&&(s=f(s,ce," "),s=f(s,pe," "));var w=e.nodeName.toLowerCase();if(tt(w,n,s))try{v?e.setAttributeNS(v,h,s):e.setAttribute(h,s),m(t.removed)}catch(e){}}}}Ze("afterSanitizeAttributes",e,null)}},st=function e(t){var i=void 0,s=Je(t);for(Ze("beforeSanitizeShadowDOM",t,null);i=s.nextNode();)Ze("uponSanitizeShadowNode",i,null),et(i)||(i.content instanceof a&&e(i.content),it(i));Ze("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(s,r){var n=void 0,o=void 0,l=void 0,c=void 0,p=void 0;if(s||(s="\x3c!--\x3e"),"string"!=typeof s&&!Ye(s)){if("function"!=typeof s.toString)throw C("toString is not a function");if("string"!=typeof(s=s.toString()))throw C("dirty is not a string, aborting")}if(!t.isSupported){if("object"===G(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof s)return e.toStaticHTML(s);if(Ye(s))return e.toStaticHTML(s.outerHTML)}return s}if(Pe||qe(r),t.removed=[],"string"==typeof s&&(Me=!1),Me);else if(s instanceof d)1===(o=(n=Qe("\x3c!--\x3e")).ownerDocument.importNode(s,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!Oe&&!Ee&&!Te&&-1===s.indexOf("<"))return te&&Ne?te.createHTML(s):s;if(!(n=Qe(s)))return Oe?null:ie}n&&Ae&&Ke(n.firstChild);for(var u=Je(Me?s:n);l=u.nextNode();)3===l.nodeType&&l===c||et(l)||(l.content instanceof a&&st(l.content),it(l),c=l);if(c=null,Me)return s;if(Oe){if(De)for(p=ae.call(n.ownerDocument);n.firstChild;)p.appendChild(n.firstChild);else p=n;return Be&&(p=le.call(i,p,!0)),p}var m=Te?n.outerHTML:n.innerHTML;return Ee&&(m=f(m,ce," "),m=f(m,pe," ")),te&&Ne?te.createHTML(m):m},t.setConfig=function(e){qe(e),Pe=!0},t.clearConfig=function(){Ge=null,Pe=!1},t.isValidAttribute=function(e,t,i){Ge||qe({});var s=b(e),r=b(t);return tt(s,r,i)},t.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],h(de[e],t))},t.removeHook=function(e){de[e]&&m(de[e])},t.removeHooks=function(e){de[e]&&(de[e]=[])},t.removeAllHooks=function(){de={}},t}return W()}()},"./packages/browser-compatibility/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"print",(function(){return s})),i.d(t,"getUserMedia",(function(){return r}));const s=()=>{navigator.vendor.includes("Apple")?document.execCommand("print"):window.print()};let r=null;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?r=(e,t,i)=>{navigator.mediaDevices.getUserMedia(e).then(t).catch(i)}:navigator.getUserMedia?r=navigator.getUserMedia.bind(navigator):navigator.webkitGetUserMedia&&(r=navigator.webkitGetUserMedia.bind(navigator))},"./packages/giphy/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"getGiphyApi",(function(){return n})),i.d(t,"giphyStickersToTrelloStickers",(function(){return o})),i.d(t,"mapTrelloLocaleToGiphyLocale",(function(){return l}));var s=i("./node_modules/@giphy/js-fetch-api/dist/index.js"),r=i("./node_modules/memoize-one/dist/memoize-one.esm.js");const n=Object(r.a)((()=>new s.GiphyFetch("DOl4PIGDk4srrYJzMgI0KiTrL2qM2IG4"))),o=(e,t)=>e.map((e=>{const i=e.images.fixed_width_small;let s=i.url;t&&e.images.preview.webp&&(s=e.images.preview.webp);const r=e.images.fixed_width_small_still,n=parseInt(i.width,10),o=parseInt(i.height,10);if(n>o){if(o/n<.75)return null}else if(n/o<.75)return null;return{url:i.url,scaled:[{url:s,width:n,height:o}],stillUrl:r.url,stillScaled:[{url:r.url,width:n,height:o}]}})).filter((e=>!!e)),a={"en-AU":"en","en-GB":"en","en-US":"en","pt-BR":"pt","zh-Hans":"zh-CN","zh-Hant":"zh-TW"},l=e=>a[e]?a[e]:e},"./resources/images/cc.png":function(e,t,i){e.exports=i.p+"images/cc.21b2aa13eb0b71ba633f.png"},"./resources/images/collections/business-class-feature-roadmap.png":function(e,t,i){e.exports=i.p+"images/collections/business-class-feature-roadmap.cfed59ceb298324cf263.png"},"./resources/images/template-create-popover-icon.svg":function(e,t,i){e.exports=i.p+"images/template-create-popover-icon.9031d6f24be0b85716f8.svg"}}]);
//# sourceMappingURL=board-sidebar-view.84ebbef4e4bddfa115d6.js.map