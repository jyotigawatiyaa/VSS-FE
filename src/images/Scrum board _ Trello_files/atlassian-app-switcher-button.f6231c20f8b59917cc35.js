(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"./app/gamma/src/components/header/atlassian-app-switcher-button.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,"AtlassianAppSwitcherButton",(function(){return Vt}));var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./packages/nachos/icons/application-switcher.tsx"),s=n("./packages/test-ids/index.ts"),i=n("./app/gamma/src/components/header/button.tsx"),c=n("./node_modules/classnames/index.js"),l=n.n(c),u=n("./packages/atlassian-analytics/index.ts"),d=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/default-available-products-provider.js"),p=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/cross-join/providers/default-joinable-sites-provider.js"),f=n("./node_modules/@babel/runtime/regenerator/index.js"),m=n.n(f),b=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),h=n.n(b),v=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=n.n(v),O=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/types.js"),y=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/fetch.js");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=function(e){return e+"/v1/product-recommendations?capability=DIRECT_ACCESS&product=jira-software&product=jira-servicedesk&product=jira-core&product=confluence"},E={confluence:O.g.CONFLUENCE,"jira-core":O.g.JIRA_CORE,"jira-servicedesk":O.g.JIRA_SERVICE_DESK,"jira-software":O.g.JIRA_SOFTWARE,opsgenie:O.g.OPSGENIE,statuspage:O.g.STATUSPAGE},k=function(e){var t={};e.capability.DIRECT_ACCESS.forEach((function(e,n){var r=S(e.resourceId);if(E[r.resourceOwner]&&"site"===r.resourceType)if(r.resourceId in t)t[r.resourceId].products[E[r.resourceOwner]]={collaborators:[],productUrl:e.url};else{var o=new URL(e.url),a={};a[E[r.resourceOwner]]={collaborators:[],productUrl:e.url},t[r.resourceId]={cloudId:r.resourceId,url:o.origin,displayName:e.displayName,products:a,relevance:Math.max(1e3-n,0)}}}));var n=[];for(var r in t)n.push(t[r]);return{sites:n}},S=function(e){var t=e.split(":");if(5!==t.length||"ari"!==t[0]||"cloud"!==t[1])throw new Error("Invalid ARI");var n=t[4].split("/");if(2!==n.length)throw new Error("Invalid ARI");return{uriScheme:t[0],cloud:t[1],resourceOwner:t[2],cloudId:t[3],resourceType:n[0],resourceId:n[1]}},_={capability:{DIRECT_ACCESS:[],REQUEST_ACCESS:[]}},P=function(e,t){return fetch(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({credentials:"include"},t)).then(function(){var t=h()(m.a.mark((function t(n){var r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.json(),!n.ok){t.next=3;break}return t.abrupt("return",r);case 3:if(400!==n.status){t.next=9;break}return t.next=6,r;case 6:if(o=t.sent,!(null==(a=o)?void 0:a.code)||"email-public-domain"!==a.code){t.next=9;break}return t.abrupt("return",_);case 9:throw Object(y.b)(new Error("Unable to fetch ".concat(e," ").concat(n.status," ").concat(n.statusText)),n.status);case 10:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}())},C=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),A=n.n(C),x=n("./node_modules/@babel/runtime/helpers/createClass.js"),T=n.n(x),R=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),I=n.n(R),N=n("./node_modules/@babel/runtime/helpers/inherits.js"),D=n.n(N),M=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),F=n.n(M),L=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),U=n.n(L),B=n("./node_modules/lodash/throttle.js"),J=n.n(B),V=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/instance-data-providers.js"),G=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/products-data-provider.js"),W=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/cross-join/providers/joinable-sites-data-provider.js"),H=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/loaders.js"),K=function(e){var t=e.cloudId;!function(e){Object(H.f)(),e===O.f.JIRA?Object(H.i)():e===O.f.CONFLUENCE?Object(H.g)():Object(H.h)()}(e.product),Object(G.b)(e.availableProductsDataProvider),Object(W.b)(e.joinableSitesDataProvider),t&&Object(V.e)({cloudId:t})},z=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/performance-now.js"),q=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/analytics/index.js"),X=n("./node_modules/@atlaskit/analytics-gas-types/dist/esm/index.js"),Q=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/analytics-next/dist/esm/hocs/withAnalyticsEvents.js"),Y=n("./node_modules/@atlaskit/analytics-namespaced-context/dist/esm/index.js"),$=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/package-context.js");function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U()(e);if(t){var o=U()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F()(this,n)}}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne={leading:!0,trailing:!1},re=te({componentName:q.m},$.a),oe=function(e){D()(n,e);var t=Z(n);function n(){var e;A()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),j()(I()(e),"fireOperationalEvent",(function(t){e.props.createAnalyticsEvent&&e.props.createAnalyticsEvent(te({eventType:X.b,actionSubject:q.n},t)).fire(q.a)})),j()(I()(e),"triggerPrefetch",J()((function(){K(e.props),e.fireOperationalEvent({action:"triggered"})}),6e4,ne)),j()(I()(e),"handleMouseEnter",(function(){e.triggerPrefetch(),e.lastEnteredAt=Object(z.a)()})),j()(I()(e),"handleMouseClick",(function(){if(e.lastEnteredAt){var t=Math.round(Object(z.a)()-e.lastEnteredAt);e.fireOperationalEvent({action:"clicked",attributes:{hoverToClick:t}})}})),e}return T()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.Container,r=void 0===n?"div":n;return o.a.createElement(r,{onFocus:this.handleMouseEnter,onMouseEnter:this.handleMouseEnter,onClick:this.handleMouseClick},t)}}]),n}(o.a.Component),ae=Object(Q.a)()(oe),se=function(e){return o.a.createElement(Y.a,{data:re},o.a.createElement(ae,e))},ie=n("./packages/config/index.ts"),ce=n("./app/gamma/src/util/cross-flow-essentials.ts"),le=n("./packages/nachos/popover.ts"),ue=n("./node_modules/react-intl/lib/index.es.js"),de=n("./node_modules/@atlaskit/analytics-listeners/dist/esm/index.js"),pe=n("./packages/colors/index.ts"),fe=n("./node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/index.js");function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let be;!function(e){e.CONTROL="control",e.NOT_ENROLLED="not-enrolled",e.EXPERIMENT="experiment"}(be||(be={}));const he={primaryTextColor:pe.N800,secondaryTextColor:pe.N300,primaryHoverBackgroundColor:"#E0E2E5",secondaryHoverBackgroundColor:"#F5F6F7"},ve=({aaId:e,triggerXFlow:t,onDiscoverMoreClicked:n,joinableSitesDataProvider:r,highlightedJoinableItemHref:a,onJoinableSiteClicked:s,availableProductsDataProvider:i,nonAaMastered:c,defaultSignupEmail:l,locale:d="en",onClose:p})=>{const f={triggerXFlow:t,onDiscoverMoreClicked:n,recommendationsFeatureFlags:{isProductStoreInTrelloEnabled:!0},highlightedJoinableItemHref:a,onJoinableSiteClicked:s,joinableSitesDataProvider:r,availableProductsDataProvider:i},m={navigationCtx:{attributes:{aaId:e,isAaMastered:!c}}};return o.a.createElement(ue.c,{locale:d},o.a.createElement(de.b,{client:u.Analytics.dangerouslyGetAnalyticsWebClient(),excludedChannels:[de.a.atlaskit,de.a.elements,de.a.editor,de.a.media]},o.a.createElement(fe.a,{data:m},o.a.createElement(H.a,me({product:"trello",appearance:"standalone",theme:he},f,{nonAaMastered:c,defaultSignupEmail:null===l?void 0:l,onClose:p})))))};var je=n("./packages/i18n/index.ts"),Oe=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ye=n.n(Oe),ge=n("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/AtlassianAppSwitcher/AtlassianAppSwitcherEmptyState.less"),we={insert:"head",singleton:!1};ye()(ge.a,we),ge.a.locals;Object(je.forNamespace)(["atlassian app switcher"],{shouldEscapeStrings:!1}),n("./resources/images/empty-states/app-switcher.svg");var Ee=n("./node_modules/@atlassiansox/cross-flow-support/dist/esm/trello.js"),ke=n("./packages/use-lazy-component/index.ts"),Se=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/create-data-provider.js");let _e,Pe;!function(e){e.CONFLUENCE="confluence.ondemand",e.JIRA_SOFTWARE="jira-software.ondemand"}(_e||(_e={})),function(e){e.JIRA="Jira",e.CONFLUENCE="Confluence"}(Pe||(Pe={}));var Ce=n("./packages/router/index.ts"),Ae=n("./packages/routes/index.ts");const xe="not-a-board",Te=[Ae.RouteId.BOARD,Ae.RouteId.BOARD_DASHBOARD,Ae.RouteId.BOARD_REFERRAL],Re=e=>{const[t,n]=Object(r.useState)(xe),o=Object(Ae.useRouteId)(),{pathname:a}=Object(Ce.useLocation)();return Object(r.useEffect)((()=>{if(e||!o||!a||!(e=>Te.some((t=>t===e)))(o))return void n(xe);const t=Ae.routes[o].regExp.exec(a.slice(1)),r=null==t?void 0:t[1];n(null!=r?r:xe)}),[o,a,e]),t};var Ie=n("./node_modules/@apollo/client/react/hooks/useQuery.js");n("./node_modules/@apollo/client/react/hooks/useLazyQuery.js");function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fe={context:{operationName:"GetBoardMemberIds"}},Le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetBoardMemberIds"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"board"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"boardId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"members"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ve={context:{operationName:"GetMemberInfo"}},Ge={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMemberInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"idMembers"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"members"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"idMembers"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"aaId"}},{kind:"Field",name:{kind:"Name",value:"fullName"}},{kind:"Field",name:{kind:"Name",value:"avatarUrl"}}]}}]}}]};var We=n("./packages/storage/index.ts"),He=n("./app/scripts/debug/constants.ts"),Ke=n("./packages/error-reporting/index.ts"),ze=n("./packages/browser/index.ts"),qe=n("./packages/feature-flag-client/index.ts");let Xe;!function(e){e.CONTROL="control",e.NOT_ENROLLED="not-enrolled",e.VARIATION="variation"}(Xe||(Xe={}));const Qe=(...e)=>e.some((e=>qe.featureFlagClient.get("growth.trello-jsw-crossflow-push-touchpoints-experiment",Xe.NOT_ENROLLED)===e)),Ye=e=>Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.isAaMastered)&&!Object(ze.isTouch)()&&!Object(ze.isDesktop)()&&!Object(ze.isCypress)()&&(()=>{try{return We.TrelloStorage.isEnabled()}catch(e){return!1}})()&&Qe(Xe.VARIATION)),$e=["products"];function Ze(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rt=e=>e&&"object"==typeof e,ot=e=>"".concat("mando-pt-cache","-").concat(e),at=e=>{try{const t=We.TrelloStorage.get(ot(e));if(!t)throw new Error("No PT cache present");const{boards:n,collaborators:r,sites:o,version:a}=t;if(1!==a)throw new Error("PT Cache Version Mismatch");if(![n,r,o].every(rt))throw new Error("PT Cache Values Mismatch");return t}catch(e){return"No PT cache present"!==(null==e?void 0:e.message)&&u.Analytics.sendOperationalEvent({action:"errored",actionSubject:"mandoPtCache",source:"boardScreen",attributes:{message:null==e?void 0:e.message,name:null==e?void 0:e.name}}),{boards:{},collaborators:{},sites:{},featureExposed:!1,lastVisitedBoard:{collaboratorStamp:null,id:null},version:1}}},st=(e,t)=>{We.TrelloStorage.set(ot(e),t)},it=e=>JSON.stringify(e.map((({accountId:e})=>e))),ct=({relevance:e=0,products:t,url:n},{relevance:r=0,products:o,url:a})=>{const s=r-e;if(0!==s)return s;const[i]=Object.keys(t);if(i===_e.CONFLUENCE)return-1;const[c]=Object.keys(o);return c===_e.CONFLUENCE?1:n<a?-1:n>a?1:0},lt=(e,t,n="atlassianSwitcher",r=["DES","RA"])=>{const o={products:{productKeys:[],accessType:r},collaborators:{userIds:[]},context:{product:"trello",experience:n}};return o.collaborators.userIds=[...t],o.products.productKeys=null==e?void 0:e.map((e=>null==e?void 0:e.split(".")[0])),o},ut=(e,t)=>JSON.parse(e).map((e=>t[e])).filter((e=>!!e)),dt=(e,t)=>{try{const n=at(t),{boards:r,collaborators:o,sites:a,lastVisitedBoard:s}=n,{resolvedBoard:i,resolvedBoardId:c}=((e,t,n)=>{var r;let o=e,a=null;return e===xe&&null!=n&&n.id&&null!=n&&n.collaboratorStamp&&(o=null==n?void 0:n.id),a=null!==(r=t[o])&&void 0!==r?r:null,a||(o=null),{resolvedBoard:a,resolvedBoardId:o}})(e,r,s);if(!i||((e,t,n)=>{var r;const o=null!==(r=e.invalidated)&&void 0!==r&&r;let a=!1;if(n){var s,i;const n=Date.now()-(null!==(s=e.lastCached)&&void 0!==s?s:0);a=n>=2592e6,u.Analytics.sendOperationalEvent({action:a?"failed":"succeeded",actionSubject:"switcherNudgeCacheAgeCheck",source:"boardScreen",containers:Object(u.formatContainers)({idBoard:t}),attributes:{cacheAge:n,lastCached:null!==(i=e.lastCached)&&void 0!==i?i:0,lastCachedType:typeof e.lastCached,collaborators:e.collaboratorStamp,browser:ze.asString,isBrowserSupported:Object(ze.isBrowserSupported)(),cachedBoardProducts:e.joinableProducts.length}})}return o||a})(i,c,qe.featureFlagClient.get("growth.trello-switcher-nudge-cache-invalidation-control",!1)))return null;const l=ut(i.collaboratorStamp,o),d={sites:i.joinableProducts.map((({productUrl:e,relevance:t})=>{const n=tt(tt({},a[e]),{},{relevance:t}),{products:r}=n,o=Ze(n,$e),[[s,i]]=Object.entries(r);return tt(tt({},o),{},{products:{[s]:tt(tt({},i),{},{collaborators:l.filter((({accountId:e})=>!!i.collaborators[e]))})}})})).sort(ct)};return u.Analytics.sendOperationalEvent({action:"succeeded",actionSubject:"retrieveRecommendedProducts",source:"boardScreen",containers:Object(u.formatContainers)({idBoard:e})}),d}catch(t){return Object(Ke.sendErrorEvent)(t,{tags:{ownershipArea:"trello-workflowers",feature:He.Feature.PushTouchpointsSwitcherSpotlight},extraData:{subjectMethod:"retrieveCachedResponse",boardId:e}}),null}},pt=["products"];function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const vt=async(e,t,n,r)=>{try{var o;const a=at(t);a.boards[e]={joinableProducts:[],collaboratorStamp:it(n)};const s=n.reduce(((e,t)=>(e[t.accountId]=t,e)),{});r.sites.forEach((t=>{var n,r;let{products:o}=t,i=ht(t,pt);const[[c,l]]=Object.entries(o),{productUrl:u}=l,{relevance:d=0}=i;a.boards[e].joinableProducts=[...a.boards[e].joinableProducts,{productUrl:u,relevance:d}],a.collaborators=mt(mt({},a.collaborators),l.collaborators.reduce(((e,{accountId:t})=>(e[t]=s[t],e)),{}));const p=(null===(n=a.sites[l.productUrl])||void 0===n||null===(r=n.products[c])||void 0===r?void 0:r.collaborators)||{},f=l.collaborators.reduce(((e,{accountId:t})=>(e[t]=t,e)),p);a.sites=mt(mt({},a.sites),{},{[l.productUrl]:mt(mt({},i),{},{products:{[c]:mt(mt({},l),{},{collaborators:f})}})})})),a.boards[e].lastCached=Date.now(),st(t,a);const i=at(t),c=i.boards[e].lastCached;return u.Analytics.sendOperationalEvent({action:"succeeded",actionSubject:"cacheRecommendedProducts",source:"boardScreen",containers:Object(u.formatContainers)({idBoard:e}),attributes:{lastCached:null!==(o=a.boards[e].lastCached)&&void 0!==o?o:0,updatedLastCached:null!=c?c:0,lastCachedType:typeof a.boards[e].lastCached,updatedLastCachedType:typeof c,lastCachedMatches:a.boards[e].lastCached===c,cachedBoardProducts:a.boards[e].joinableProducts.length,updatedCachedBoardProducts:i.boards[e].joinableProducts.length}}),r}catch(t){return Object(Ke.sendErrorEvent)(t,{tags:{ownershipArea:"trello-workflowers",feature:He.Feature.PushTouchpointsSwitcherSpotlight},extraData:{subjectMethod:"cacheResponse",boardId:e}}),null}},jt="mando-pt-cache-last-api-error",Ot=()=>We.TrelloStorage.set(jt,Date.now()),yt=()=>{return Date.now()-(null!==(e=We.TrelloStorage.get(jt))&&void 0!==e?e:0)>864e5;var e},gt={tags:{ownershipArea:"trello-workflowers",feature:He.Feature.PushTouchpointsSwitcherSpotlight},extraData:{subjectMethod:"useBoardMemberInfo"}},wt=(e,t,n)=>{var o,a;const s=e!==xe,i=n||!s,{data:c,loading:l,error:u}=function(e){const t=De(De({},Fe),e);return Ie.a(Le,t)}({variables:{boardId:e},skip:i}),d=null==c||null===(o=c.board)||void 0===o?void 0:o.members,p=Object(r.useMemo)((()=>{try{if(s&&!l&&!u&&null!=d&&d.length)return d.filter((({id:e})=>e!==t)).map((({id:e})=>e))}catch(e){Object(Ke.sendErrorEvent)(e,gt)}}),[s,d,l,u,t]),f=null!==(a=null==p?void 0:p.length)&&void 0!==a?a:0,m=n||f<2||f>19,{data:b,error:h,loading:v}=function(e){const t=Be(Be({},Ve),e);return Ie.a(Ge,t)}({variables:{idMembers:p||[]},skip:m}),j=Object(r.useMemo)((()=>{try{if(s&&!v&&!h&&b&&Array.isArray(null==b?void 0:b.members))return b.members.filter((({aaId:e})=>e)).map((({avatarUrl:e,fullName:t,id:n,aaId:r})=>({avatarUrl:"".concat(e,"/original.png"),displayName:null!=t?t:"",accountId:null!=r?r:"",id:n}))).sort(((e,t)=>e.displayName<=t.displayName?-1:1))}catch(e){Object(Ke.sendErrorEvent)(e,gt)}}),[s,b,v,h]),O=v||l,y=h||u;return Object(r.useEffect)((()=>{O||y||e===xe||((e,t,n)=>{try{const r=at(n),o=null!=e?e:[];o.forEach((e=>{r.collaborators[e.accountId]=e})),r.lastVisitedBoard={id:t,collaboratorStamp:it(o)},st(n,r)}catch(n){var r;Object(Ke.sendErrorEvent)(n,{tags:{ownershipArea:"trello-workflowers",feature:He.Feature.PushTouchpointsSwitcherSpotlight},extraData:{subjectMethod:"cacheMembersAndLastBoard",membersCount:"".concat(null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0),boardId:t}})}})(j,e,t)}),[j,e,t,O,y]),{data:j,loading:O,error:y}},Et=["Failed to fetch","NetworkError when attempting to fetch resource.","The operation was aborted. ","The request timed out.","Se agotó el tiempo de espera.","The network connection was lost.","cancelled","La requête a expiré.","TypeMismatchError","An SSL error has occurred and a secure connection to the server cannot be made.","Zeitüberschreitung bei der Anforderung.","A server with the specified hostname could not be found.","The Internet connection appears to be offline."],kt=["products"];function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const At="".concat(ie.atlassianApiGateway,"gateway/api/growth/trello-switcher-nudge/recommended-products"),xt="".concat(ie.atlassianApiGateway,"gateway/api/xflow/cloud/joinable-products?model=collaborators"),Tt=[_e.JIRA_SOFTWARE,_e.CONFLUENCE],Rt=async(e,t,n,r=[])=>{try{const o=dt(e,t);if(o)return o;if(!yt())return{sites:[]};const{resolvedBoardId:a,resolvedCollaborators:s}=((e,t,n)=>{const{lastVisitedBoard:{id:r,collaboratorStamp:o},collaborators:a}=at(t),s={resolvedBoardId:e,resolvedCollaborators:n};return e===xe&&r&&o&&(s.resolvedBoardId=r,s.resolvedCollaborators=ut(o,a)),s})(e,t,r),i=s.map((({accountId:e})=>e)),c=qe.featureFlagClient.get("new-cross-flow-joinable-sites-endpoint",!1),[l,d]=c?[xt,lt(n,i)]:[At,{products:n,collaborators:i}],p=await fetch(l,{method:"post",body:JSON.stringify(d),credentials:"include",headers:{"Content-Type":"application/json","X-Trello-Client-Version":ie.clientVersion}});if(!p.ok)return u.Analytics.sendOperationalEvent({action:"errored",actionSubject:"fetchRecommendedProducts",source:"boardScreen",containers:Object(u.formatContainers)({idBoard:a}),attributes:{message:p.statusText,status:p.status,collaborators:JSON.stringify(i),isBrowserSupported:Object(ze.isBrowserSupported)(),browser:ze.asString}}),Ot(),{sites:[]};u.Analytics.sendOperationalEvent({action:"succeeded",actionSubject:"fetchRecommendedProducts",source:"boardScreen",containers:Object(u.formatContainers)({idBoard:a}),attributes:{collaborators:JSON.stringify(i),isBrowserSupported:Object(ze.isBrowserSupported)(),browser:ze.asString}});const f=await p.json(),m=c&&(null==f?void 0:f.joinableProducts),b=(({sites:e})=>({sites:e.sort(ct)}))(m?(e=>{const t={sites:[]},n=(null==e?void 0:e.joinableProducts)||[];return Array.isArray(n)?(t.sites=n.map((({cloudId:e="",ari:t="",displayName:n="",siteUrl:r,avatarUrl:o="",relevance:a=0,collaborators:s=[],productUrl:i="",productKey:c=""})=>{const l={[c]:{collaborators:[],productUrl:i}};return l[c].collaborators=s.map((({userId:e="",displayName:t="",avatarUrl:n=""})=>({id:"",accountId:e,displayName:t,avatarUrl:n}))),{cloudId:e,resourceId:t,displayName:n,url:r,avatarUrl:o,relevance:a,products:l,userAccessLevel:"",roleAri:"",isInternalProductRecommendation:!1}})),t):t})(f):f);b.sites=b.sites.map((e=>{let{products:t}=e,n=Ct(e,kt);const[[r,o]]=Object.entries(t);return _t(_t({},n),{},{products:{[r]:_t(_t({},o),{},{collaborators:s.filter((e=>o.collaborators.find((({accountId:t})=>e.accountId===t))))})}})})),vt(a,t,s,b);const h=dt(a,t);return null!=h?h:b}catch(t){o=null==t?void 0:t.message,Et.some((e=>e===o))||Object(Ke.sendErrorEvent)(t,{tags:{ownershipArea:"trello-workflowers",feature:He.Feature.PushTouchpointsSwitcherSpotlight},extraData:{subjectMethod:"fetchJoinableProducts",boardId:e}}),Ot()}var o;return{sites:[]}};var It=n("./app/src/components/SwitcherSpotlight/usePushTouchpointsMessages.ts");const Nt={[_e.JIRA_SOFTWARE]:Pe.JIRA,[_e.CONFLUENCE]:Pe.CONFLUENCE},Dt=(e,t,n,o)=>{var a;const[{nudgeDismissed:s,highlightDismissed:i},c]=Object(It.d)(),l=Re(),u=l!==xe,d=(e=>{const[t,n]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{const t=setTimeout((()=>{if(e===xe)return void n(!0);const t="views-switcher-callout-".concat(e),r=We.TrelloStorage.get(t),o=Number.isFinite(r)?((new Date).getTime()-r)/864e5:0;n(o>=1)}),3e3);return()=>{n(!1),clearTimeout(t)}}),[e]),t})(l),p=!((e,t)=>{try{const{lastVisitedBoard:n}=at(t);if(!n||"object"!=typeof n)return!1;const{id:r,collaboratorStamp:o}=n,a=JSON.parse(o||"[]").length;return!(e!==r||a<2)}catch(t){return Object(Ke.sendErrorEvent)(t,{tags:{ownershipArea:"trello-workflowers",feature:He.Feature.PushTouchpointsSwitcherSpotlight},extraData:{subjectMethod:"boardHasEnoughMembers",boardId:e}}),!1}})(l,e),f=!n||!d||p||!o&&s,{cloudId:m,overlappingCollaborators:b,productUrl:h,productName:v,providerLoading:j}=((e,t)=>{const[n,o]=Object(r.useState)({providerLoading:!1});return Object(r.useEffect)((()=>{!t&&null!=e&&e.fetchMethod?(o({providerLoading:!0}),(async()=>{try{const{sites:t}=await e.fetchMethod({}),[n]=t,r=null==n?void 0:n.products;if(!r)return void o({providerLoading:!1});const[[a,s]]=Object.entries(r);if(!Nt[a])return void o({providerLoading:!1});const i=Nt[a],c=s.collaborators.map((({id:e})=>e)),{cloudId:l}=n,{productUrl:u}=s;o({cloudId:l,overlappingCollaborators:c,productName:i,productUrl:u,providerLoading:!1})}catch(e){}})()):o({providerLoading:!1})}),[e,t]),n})(t,f),O=null!==(a=null==b?void 0:b.length)&&void 0!==a?a:0,y=O>=2,g=s||!u||j||!y||!d,w=i||!u||!y||!d,E=w?void 0:h,k=Object(r.useCallback)((({href:t})=>{t&&e&&((e,t)=>{try{const n=at(t);Object.keys(n.boards).forEach((t=>{const r=n.boards[t];r.joinableProducts.some((({productUrl:t})=>t===e))&&(r.invalidated=!0)})),st(t,n)}catch(e){}})(t,e),t===E&&y&&c(It.b)}),[e,E,y,c]);return Object(r.useMemo)((()=>({nudgeHidden:g,highlightHidden:w,overlappingCollaborators:b,numOfCollaborators:O,currentBoardId:l,productName:v,productUrl:E,cloudId:m,onJoinableSiteClicked:k})),[m,l,w,g,O,k,b,v,E])};var Mt=n("./app/gamma/src/components/header/header.less");function Ft(){return(Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Lt=Object(je.forTemplate)("cross_flow"),Ut=Object(d.a)(ce.a),Bt=Object(p.a)((Jt="".concat(ie.atlassianApiGateway,"gateway/api/invitations"),function(){return function(){return P(w(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""),{method:"get"}).then((function(e){return k(e)}))}(Jt)}));var Jt;const Vt=({member:e,redesign:t=!1})=>{var c,d;const p=null==e||null===(c=e.prefs)||void 0===c?void 0:c.locale,f=(null==e?void 0:e.aaId)||void 0,m=null==e?void 0:e.isAaMastered,b=null==e?void 0:e.email;let h=Bt;const v=Object(r.useCallback)((()=>{u.Analytics.sendClickedButtonEvent({buttonName:"atlassianSwitcherHeaderButton",source:"appHeader",attributes:{aaId:f,isAaMastered:m}})}),[f,m]),{popoverProps:j,triggerRef:O,toggle:y,hide:g}=Object(le.e)({onShow:v}),w=null!==(d=null==e?void 0:e.id)&&void 0!==d?d:"",E=Ye(e),k=((e,t)=>{const n=Re(t),{data:o,loading:a,error:s}=wt(n,e,t),i=t||a||!!s;return Object(r.useMemo)((()=>{if(!i)return Object(Se.a)("joinableSites",(()=>Rt(n,e,Tt,o)))}),[i,n,o,e])})(w,!E),S=Dt(w,k,E,j.isVisible);E&&(h=k),((e,t)=>{const n=Re(),o=Object(r.useRef)(n);o.current=n,Object(r.useEffect)((()=>{e&&t&&We.TrelloStorage.addErrorListener((({key:t,error:n})=>{t===ot(e)&&u.Analytics.sendOperationalEvent({action:"errored",actionSubject:"switcherNudgeCache",containers:Object(u.formatContainers)({idBoard:o.current}),source:"boardScreen",attributes:{error:null==n?void 0:n.name,message:null==n?void 0:n.message,stack:null==n?void 0:n.stack,isBrowserSupported:Object(ze.isBrowserSupported)(),browser:ze.asString}})}))}),[e,t])})(w,E);const _=Object(Ee.b)(),P=Object(r.useCallback)((e=>{g(),_.isEnabled?_.api.open({journey:"decide",targetProduct:e,sourceComponent:"atlassian-switcher",sourceContext:"try",experimentalOptions:{crossFlowSupportInTrelloRollout:!0,enhancedJSWValuePropositionEnabled:!0}}):Object(ce.e)(e,{campaign:ce.b.ATLASSIAN_SWITCHER})}),[g,_]),C=Object(r.useCallback)((()=>{g(),_.isEnabled?_.api.open({journey:"discover",sourceComponent:"atlassian-switcher",sourceContext:"more",experimentalOptions:{crossFlowSupportInTrelloRollout:!0,enhancedJSWValuePropositionEnabled:!0}}):Object(ce.f)({campaign:ce.b.ATLASSIAN_SWITCHER})}),[g,_]),A=Object(ke.useLazyComponent)((()=>n.e(197).then(n.bind(null,"./app/src/components/SwitcherSpotlight/SwitcherSpotlight.tsx"))),{namedImport:"SwitcherSpotlight",preload:E}),x=Object(r.useCallback)((()=>o.a.createElement(i.a,{icon:o.a.createElement(a.a,{color:"light"}),onClick:y,ref:O,testId:s.HeaderTestIds.AtlassianAppSwitcher,ariaLabel:Lt("switch to"),className:l()(t&&Mt.a.headerButtonRedesign,t&&Mt.a.appSwitcherRedesign)})),[t,y,O]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{joinableSitesDataProvider:h,availableProductsDataProvider:Ut},E?o.a.createElement(r.Suspense,{fallback:x()},o.a.createElement(A,{nudgeState:S},x())):x()),o.a.createElement(le.b,Ft({},j,{title:Lt("more from atlassian"),testId:s.HeaderTestIds.AtlassianAppSwitcher}),o.a.createElement(ve,{aaId:f,triggerXFlow:P,onDiscoverMoreClicked:C,joinableSitesDataProvider:h,highlightedJoinableItemHref:S.productUrl,onJoinableSiteClicked:S.onJoinableSiteClicked,availableProductsDataProvider:Ut,nonAaMastered:!m,defaultSignupEmail:b,onClose:g,locale:p})))}},"./app/gamma/src/util/cross-flow-essentials.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n("./packages/config/index.ts"),o=n("./packages/atlassian-analytics/index.ts"),a=n("./node_modules/@atlassiansox/cross-flow-support/dist/esm/index.js");let s;!function(e){e.ATLASSIAN_SWITCHER="atlassian_switcher",e.PRODUCT_STORE="product_store",e.CROSSFLOW_ESSENTIALS="cross_flow_essentials_v2",e.TOUCHPOINTS_JSW_BOARD="trello_jsw_touchpoints_board",e.TOUCHPOINTS_JSW_POWERUPS="trello_jsw_touchpoints_powerups",e.TOUCHPOINTS_JSW_SWITCHER="trello_jsw_touchpoints_switcher",e.TOUCHPOINTS_CONFLUENCE_SWITCHER="trello_confluence_touchpoints_switcher",e.TOUCHPOINTS_CONFLUENCE_POWERUPS="trello_confluence_touchpoints_powerups"}(s||(s={}));const i=({campaign:e})=>"utm_source=trello&utm_medium=in_product_ad&utm_campaign=".concat(e),c=e=>{const t=i(e);window.open("".concat(r.wacUrl,"/software?").concat(t),"_blank")},l=(e,t)=>{const n=i(t);if(e===a.a.OPSGENIE)return void window.open("".concat(r.wacUrl,"/software/opsgenie/try?").concat(n),"_blank");const o={[a.a.JIRA_SOFTWARE]:"jira-software",[a.a.JIRA_SERVICE_DESK]:"jira-service-desk",[a.a.CONFLUENCE]:"confluence"}[e];o?window.open("".concat(r.wacUrl,"/try/cloud/signup?bundle=").concat(o,"&edition=free&").concat(n),"_blank"):c(t)},u=(e,t,n)=>{const r=[];function o(e){r.length<5&&r.push(e)}for(const n of e){if(5===r.length)break;r.push(n.displayName);const e=t.filter((e=>e.idEnterprise===n.id));e.forEach((e=>{o("".concat(n.displayName,"-").concat(e.displayName))})),e.forEach((e=>{o(e.displayName)}))}return t.forEach((e=>{e.idEnterprise||o(e.displayName)})),n&&n.name&&o(n.name),r},d="".concat(r.atlassianApiGateway,"gateway/api/available-products/api/available-products"),p="".concat(r.siteDomain,"/proxy/experiment-api/trello-cross-product-join/available-sites"),f=async e=>{try{const t=e?d:p,n=await fetch(t,{method:"GET",credentials:"include",headers:{"X-Trello-Client-Version":r.clientVersion}});if(n.ok)return n.json();throw new Error("unauthorized")}catch(e){return o.Analytics.sendOperationalEvent({action:"errored",actionSubject:"fetchAvailableSites",source:"crossFlowEssentials"}),{sites:[]}}}},"./app/src/components/SwitcherSpotlight/usePushTouchpointsMessages.ts":function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return O}));var r=n("./node_modules/react/index.js"),o=n("./node_modules/@apollo/client/react/hooks/useMutation.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={context:{operationName:"PushTouchpointsDismissOneTimeMessage"}},l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PushTouchpointsDismissOneTimeMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"messageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addOneTimeMessagesDismissed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"memberId"},value:{kind:"StringValue",value:"me",block:!1}},{kind:"Argument",name:{kind:"Name",value:"messageId"},value:{kind:"Variable",name:{kind:"Name",value:"messageId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"oneTimeMessagesDismissed"}}]}}]}}]};var u=n("./node_modules/@apollo/client/react/hooks/useQuery.js");n("./node_modules/@apollo/client/react/hooks/useLazyQuery.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={context:{operationName:"PushTouchpointsOneTimeMessage"}},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PushTouchpointsOneTimeMessage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"StringValue",value:"me",block:!1}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"oneTimeMessagesDismissed"}}]}}]}}]};const h="mando-pt-dismiss-nudge",v="mando-pt-dismiss-card",j="mando-pt-dismiss-highlight",O=()=>{const[e]=function(e){const t=s(s({},c),e);return o.a(l,t)}(),{data:t}=function(e){const t=p(p({},m),e);return u.a(b,t)}(),{oneTimeMessagesDismissed:n}=(null==t?void 0:t.member)||{};return[{nudgeDismissed:!(null==n||!n.includes(h)),cardDismissed:!(null==n||!n.includes(v)),highlightDismissed:!(null==n||!n.includes(j))},Object(r.useCallback)((t=>{e({variables:{messageId:t},optimisticResponse:{__typename:"Mutation",addOneTimeMessagesDismissed:{id:"me",oneTimeMessagesDismissed:null==n?void 0:n.concat([t]),__typename:"Member"}}})}),[e,n])]}},"./node_modules/@atlaskit/analytics-namespaced-context/dist/esm/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),s=n("./node_modules/react/index.js"),i=n.n(s),c=n("./node_modules/@atlaskit/analytics-namespaced-context/node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/index.js"),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NamespacedContext",n=function(t){var n=a()({},e,t.data);return i.a.createElement(c.a,{data:n},i.a.Children.only(t.children))};return n.displayName=t,n},u=(l("fabricElementsCtx","FabricElementsAnalyticsContext"),l("navigationCtx","NavigationAnalyticsContext"));!function(e){e.FIXED_WIDTH="fixedWidth",e.FULL_WIDTH="fullWidth",e.COMMENT="comment",e.CHROMELESS="chromeless",e.MOBILE="mobile"}(r||(r={}));l("fabricEditorCtx","FabricEditorAnalyticsContext"),l("peopleTeamsCtx","PeopleTeamsAnalyticsContext")},"./node_modules/@atlaskit/analytics-namespaced-context/node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/LegacyAnalyticsContext.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(i),l=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(d),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),b=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(b),v=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=n.n(v),O=n("./node_modules/react/index.js"),y=n.n(O),g=n("./node_modules/prop-types/index.js"),w=n.n(g),E=n("./node_modules/@atlaskit/analytics-next-stable-react-context/dist/esm/index.js");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var S={getAtlaskitAnalyticsContext:w.a.func,getAtlaskitAnalyticsEventHandlers:w.a.func},_=function(){return[]},P=function(e){p()(n,e);var t=k(n);function n(e){var r;return s()(this,n),r=t.call(this,e),j()(u()(r),"getChildContext",(function(){return{getAtlaskitAnalyticsContext:r.getAnalyticsContext}})),j()(u()(r),"getAnalyticsContext",(function(){var e=r.props.data,t=r.context.getAtlaskitAnalyticsContext,n=void 0===t?_:t;return[].concat(o()(n()),[e])})),j()(u()(r),"getAnalyticsEventHandlers",(function(){var e=r.context.getAtlaskitAnalyticsEventHandlers;return(void 0===e?_:e)()})),r.contextValue={getAtlaskitAnalyticsContext:r.getAnalyticsContext,getAtlaskitAnalyticsEventHandlers:r.getAnalyticsEventHandlers},r}return c()(n,[{key:"render",value:function(){var e=this.props.children;return y.a.createElement(E.a.Provider,{value:this.contextValue},e)}}]),n}(O.Component);j()(P,"contextTypes",S),j()(P,"childContextTypes",S),t.a=P},"./node_modules/@atlaskit/analytics-namespaced-context/node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/ModernAnalyticsContext.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n.n(a),i=n("./node_modules/@atlaskit/analytics-next-stable-react-context/dist/esm/index.js");t.a=function(e){var t=e.data,n=e.children,r=function(e){var t=Object(a.useRef)(e);return Object(a.useEffect)((function(){t.current=e}),[e]),t}(t),c=Object(a.useContext)(i.a),l=Object(a.useCallback)((function(){return[].concat(o()(c.getAtlaskitAnalyticsContext()),[r.current])}),[c,r]),u=Object(a.useMemo)((function(){return{getAtlaskitAnalyticsContext:l,getAtlaskitAnalyticsEventHandlers:c.getAtlaskitAnalyticsEventHandlers}}),[c,l]);return s.a.createElement(i.a.Provider,{value:u},n)}},"./node_modules/@atlaskit/analytics-namespaced-context/node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/index.js":function(e,t,n){"use strict";(function(e){var r,o=n("./node_modules/@atlaskit/analytics-namespaced-context/node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/LegacyAnalyticsContext.js"),a=n("./node_modules/@atlaskit/analytics-namespaced-context/node_modules/@atlaskit/analytics-next/dist/esm/components/AnalyticsContext/ModernAnalyticsContext.js");r=void 0!==e&&e.env.ANALYTICS_NEXT_MODERN_CONTEXT?a.a:o.a,t.a=r}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/as-data-provider.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return C})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return x})),n.d(t,"d",(function(){return T}));var r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=n.n(i),l=n("./node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),p=n.n(d),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),h=n.n(b),v=n("./node_modules/react/index.js"),j=n.n(v),O=n("./node_modules/@atlaskit/analytics-gas-types/dist/esm/index.js"),y=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/analytics/index.js"),g=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/analytics-next/dist/esm/hocs/withAnalyticsEvents.js"),w=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/error-to-reason.js");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var _,P="atlassianSwitcherDataProvider";!function(e){e.LOADING="loading",e.COMPLETE="complete",e.ERROR="error"}(_||(_={}));var C=function(e){return{status:_.COMPLETE,data:e}},A=function(e){return e.status===_.COMPLETE},x=function(e){return e.status===_.ERROR},T=function(e){return e.status!==_.LOADING};t.c=function(e,t,n){var r=function(e){if(n){var t=n(e);if(void 0!==t)return{status:_.COMPLETE,data:t}}return{status:_.LOADING,data:null}},a=function(n){u()(i,n);var a=S(i);function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=a.call.apply(a,[this].concat(n)),h()(c()(e),"acceptResults",!0),h()(c()(e),"state",r(e.props)),h()(c()(e),"fireOperationalEvent",(function(t){e.props.createAnalyticsEvent&&e.props.createAnalyticsEvent(k(k({eventType:O.b,actionSubject:P},t),{},{attributes:k(k({},t.attributes),{},{outdated:!e.acceptResults})})).fire(y.a)})),e}return s()(i,[{key:"componentWillUnmount",value:function(){this.acceptResults=!1}},{key:"componentDidMount",value:function(){var e=this;t(this.props).then((function(t){e.onResult(t)})).catch((function(t){e.onError(t)}))}},{key:"onResult",value:function(t){this.acceptResults&&this.setState({data:t,status:_.COMPLETE}),this.fireOperationalEvent({action:"receivedResult",actionSubjectId:e,attributes:{provider:e}})}},{key:"onError",value:function(t){this.acceptResults&&!A(this.state)&&this.setState({error:t,status:_.ERROR,data:null}),this.fireOperationalEvent({action:"failed",actionSubjectId:e,attributes:{provider:e,reason:Object(w.a)(t)}})}},{key:"render",value:function(){return this.props.children(this.state)}}]),i}(j.a.Component);return h()(a,"displayName","DataProvider(".concat(e,")")),Object(g.a)()(a)}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/create-data-provider.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/as-data-provider.js"),o=(n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/fetch.js"),n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/with-cached.js")),a=function(e,t){var n=Object(o.a)((function(e){return t()}));return{fetchMethod:n,ProviderComponent:Object(r.c)(e,n,n.cached)}}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/default-available-products-provider.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=n.n(a),i=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/create-data-provider.js"),c=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/fetch.js"),l="/gateway/api/available-products/api/available-products",u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return Object(i.a)("availableProducts",s()(o.a.mark((function t(){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c.c)(e);case 3:return n=t.sent,t.abrupt("return",n);case 7:if(t.prev=7,t.t0=t.catch(0),!(e.indexOf("experiment-api")>-1)||401!==t.t0.status){t.next=13;break}return r=Promise.resolve({sites:[],isPartial:!1}),t.abrupt("return",r);case 13:throw t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,7]])}))))}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/instance-data-providers.js":function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return v}));var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/fetch.js"),s=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/as-data-provider.js"),i=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/types.js"),c=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/with-cached.js");var l=function(e,t){return function(n){var r=n.cloudId,a=n.children;if(r)return o.a.createElement(e,n,a);var i={status:s.a.COMPLETE,data:t};return o.a.createElement(o.a.Fragment,null,a(i))}},u=Object(s.c)("collaborationGraphRecentContainers",(function(e){var t=e.cloudId;return Object(a.d)("/gateway/api/collaboration/v1/collaborationgraph/user/container",{containerTypes:["confluenceSpace","jiraProject"],context:{contextType:"atlassianSwitcher",principalId:"context",siteId:t},expanded:!0,maxNumberOfResults:6,userId:"context"})})),d={status:s.a.COMPLETE,data:{collaborationGraphEntities:[]}},p=(s.a.COMPLETE,l((function(e){var t=e.cloudId,n=e.enableRecentContainers,r=e.children;return n?o.a.createElement(u,{cloudId:t},r):o.a.createElement(o.a.Fragment,null,r(d))}),d.data)),f=Object(c.a)((function(e){var t=e.cloudId,n=e.permissionId;return Object(a.d)("/gateway/api/permissions/permitted",{permissionId:n,resourceId:"ari:cloud:platform::site/".concat(t)}).then((function(e){return e.permitted}))})),m=l(Object(s.c)("permission",f,f.cached),!1),b=Object(c.a)((function(e){var t=e.cloudId;return Object(a.c)("/gateway/api/site/".concat(t,"/setting/xflow")).then((function(e){return void 0===e["product-suggestions-enabled"]||e["product-suggestions-enabled"]}))})),h=l(Object(s.c)("xflowSettings",b,b.cached),!0),v=function(e){var t=e.cloudId;b({cloudId:t}),f({cloudId:t,permissionId:i.e.ADD_PRODUCTS}),f({cloudId:t,permissionId:i.e.MANAGE})}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/products-data-provider.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/default-available-products-provider.js"),s=Object(a.a)(),i=s.fetchMethod,c=s.ProviderComponent,l=function(e){var t=e.children,n=e.availableProductsDataProvider,r=n&&n.ProviderComponent||c;return o.a.createElement(r,null,t)},u=function(e){e?e.fetchMethod({}):i({})}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/analytics/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"i",(function(){return C})),n.d(t,"g",(function(){return A})),n.d(t,"d",(function(){return x})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return R})),n.d(t,"h",(function(){return I})),n.d(t,"m",(function(){return N})),n.d(t,"n",(function(){return D})),n.d(t,"l",(function(){return M})),n.d(t,"k",(function(){return F})),n.d(t,"j",(function(){return L})),n.d(t,"q",(function(){return B})),n.d(t,"p",(function(){return J})),n.d(t,"w",(function(){return V})),n.d(t,"c",(function(){return W})),n.d(t,"b",(function(){return H})),n.d(t,"o",(function(){return K})),n.d(t,"u",(function(){return q})),n.d(t,"s",(function(){return X})),n.d(t,"v",(function(){return Q})),n.d(t,"r",(function(){return Y})),n.d(t,"t",(function(){return $}));var r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(i),l=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=n.n(d),f=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),m=n.n(f),b=n("./node_modules/react/index.js"),h=n.n(b),v=n("./node_modules/@atlaskit/analytics-namespaced-context/dist/esm/index.js"),j=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/analytics-next/dist/esm/hocs/withAnalyticsEvents.js"),O=n("./node_modules/@atlaskit/analytics-gas-types/dist/esm/index.js"),y=["4000","2000","1000","500"],g=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/as-data-provider.js"),w=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/errors/user-site-data-error.js");function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u()(this,n)}}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _,P="navigation",C="atlassianSwitcher",A="atlassianSwitcherItem",x="atlassianSwitcherChildItem",T="atlassianSwitcherItemExpand",R="atlassianSwitcher",I="atlassianSwitcher",N="atlassianSwitcherPrefetch",D="atlassianSwitcherPrefetch",M="atlassianSwitcherTrelloSignUpToJoin",F="atlassianSwitcherTrelloHasNewFriends",L="atlassianSwitcherTrelloHasNewFriendsDismiss",U="atlassianSwitcherDiscoverMore",B=(_=P,function(e){return function(t){var n=t(e),r=n.clone();return r&&r.fire(_),n}}),J=function(e){return{attributes:e}},V=function(e){return function(t){return function(n){return h.a.createElement(v.a,{data:e(n)},h.a.createElement(t,n))}}},G=function(e){return null!=e&&e>=0},W=Object(j.a)({onRender:function(e,t){var n,r,o=null===(n=t.data)||void 0===n?void 0:n.duration;return e({eventType:O.b,action:"rendered",actionSubject:t.subject,attributes:S(S({},t.data),G(o)&&{bucket:(r=o,r>=0?y.reduce((function(e,t){return r<=parseInt(t)?t:e}),"+Inf"):null)})}).fire(P)}})(function(e){c()(n,e);var t=E(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"componentDidMount",value:function(){this.props.onRender()}},{key:"render",value:function(){return null}}]),n}(h.a.Component)),H=Object(j.a)({onRender:function(e,t){return e({eventType:O.b,action:"not_rendered",actionSubject:t.subject,attributes:t.data}).fire(P)}})(function(e){c()(n,e);var t=E(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"componentDidMount",value:function(){this.props.onRender()}},{key:"render",value:function(){return null}}]),n}(h.a.Component)),K=Object(j.a)({onRender:function(e,t){return e({eventType:O.e,action:"viewed",actionSubject:t.subject,attributes:t.data}).fire(P)}})(function(e){c()(n,e);var t=E(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"componentDidMount",value:function(){this.props.onRender()}},{key:"render",value:function(){return null}}]),n}(h.a.Component)),z=function(e){var t=e.subject,n=e.providerFailed,r=e.emptyRenderExpected,o=e.linksRendered,a=e.data;return n||0===o.length&&!r?h.a.createElement(H,{subject:t,data:S(S({},a),{},{providerFailed:n})}):h.a.createElement(W,{subject:t,data:S(S({},a),{},{emptyRender:r})})},q=function(e,t,n){if(!Object(g.d)(e))return null;var r=Boolean(e.data&&0===e.data.sites.length);return z({subject:"atlassianSwitcherJoinableSites",providerFailed:null===e.data,emptyRenderExpected:r,linksRendered:t,data:n})},X=function(e,t,n,r,o,a){var s=function(e){return null===e.data||e.status===g.a.ERROR},i=function(e){return{failed:s(e),loaded:Object(g.d)(e)}},c=0===o.length,l={xflow:i(e),provisionedProducts:i(t),joinableSites:i(n),productRecommendations:i(r)};if(!(l.joinableSites.loaded&&l.provisionedProducts.loaded&&l.xflow.loaded&&l.productRecommendations.loaded))return null;var u=l.joinableSites.failed||l.provisionedProducts.failed||l.xflow.failed||l.productRecommendations.failed;return z(u?{subject:U,providerFailed:!0,emptyRenderExpected:c,linksRendered:o,data:S(S({},a),{},{providerResults:{joinableSites:n.status,joinableSitesFailed:l.joinableSites.failed,provisionedProducts:t.status,provisionedProductsFailed:l.provisionedProducts.failed,xflow:e.status,xflowFailed:l.xflow.failed,productRecommendations:r.status,productRecommendationsFailed:l.productRecommendations.failed}})}:{subject:U,providerFailed:!1,emptyRenderExpected:c,linksRendered:o,data:a})},Q=function(e,t,n,r,o){if(!e)return null;var a=null===t.data||null===n.data,s=Boolean(t.data&&t.data.collaborationGraphEntities&&0===t.data.collaborationGraphEntities.length);return z({subject:"atlassianSwitcherRecentContainers",providerFailed:a,emptyRenderExpected:s,linksRendered:r,data:o})},Y=function(e,t,n,r){if(e){var o=0===n.length;return function(e){var t=e.subject,n=e.notRenderedReason,r=e.emptyRenderExpected,o=e.data;return n?h.a.createElement(H,{subject:t,data:S(S({},o),{},{notRenderedReason:n})}):h.a.createElement(W,{subject:t,data:S(S({},o),{},{emptyRender:r})})}({subject:"atlassianSwitcherCustomLinks",notRenderedReason:function(){if((null==e?void 0:e.status)===g.a.ERROR)return"custom_links_api_error";var n=t.error;return n?n instanceof w.a?n.reason:"usd_unknown":null}(),emptyRenderExpected:o,data:r})}},$=function(e,t,n,r,o){return S({},J(S({groupIndex:e,itemId:t,itemType:n,productType:r},o)))}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/error-to-reason.js":function(e,t,n){"use strict";function r(e){var t=e||{},n=t.name,r=void 0===n?"Unknown":n,o=t.status;return{name:r,status:void 0===o?void 0:o}}n.d(t,"a",(function(){return r}))},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/errors/user-site-data-error.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return b}));var r,o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n("./node_modules/@babel/runtime/helpers/inherits.js"),i=n.n(s),c=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(u),p=n("./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),f=n.n(p);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var o=d()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}!function(e){e.APS_NO_SITE_MATCH="aps_no_site_match",e.APS_EMPTY_RESULT="aps_empty_result",e.APS_PARTIAL_EMPTY_RESULT="aps_partial_response_empty_result"}(r||(r={}));var b=function(e){i()(n,e);var t=m(n);function n(e,r){var o;return a()(this,n),(o=t.call(this,r)).name="UserSiteDataError",o.reason=e,o}return n}(f()(Error))},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/fetch.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s="FetchError";function i(e,t){return{name:s,message:e.message,stack:e.stack,status:t}}var c=function(e,t){return fetch(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({credentials:"include"},t)).then((function(t){if(t.ok)return t.json();throw i(new Error("Unable to fetch ".concat(e," ").concat(t.status," ").concat(t.statusText)),t.status)}))},l=function(e,t){return c(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/package-context.js":function(e,t,n){"use strict";var r=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/version.json");t.a={packageName:r.name,packageVersion:r.version}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/performance-now.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="undefined"!=typeof window&&window.performance&&window.performance.now.bind(performance)||Date.now},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/utils/with-cached.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=function(e){return"function"==typeof e.then&&"function"==typeof e.catch},o=function(e){var t=new Map,n=new Map;function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify(t)}return Object.assign((function(){var a=o.apply(void 0,arguments),s=n.get(a);if(void 0!==s)return s;var i=e.apply(void 0,arguments);return n.set(a,i),r(i)&&i.then((function(e){t.set(a,e),setTimeout((function(){return n.delete(a)}),5e3)})).catch((function(){n.delete(a)})),i}),e,{cached:function(){var e=o.apply(void 0,arguments);return t.get(e)},reset:function(){t.clear(),n.clear()}})}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/cross-join/providers/default-joinable-sites-provider.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/common/providers/create-data-provider.js"),o=function(){return Promise.resolve({sites:[]})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=s(e,o);return Object(r.a)("joinableSites",t)},s=function(e,t){return function(){try{return e()}catch(e){return t()}}}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/cross-join/providers/joinable-sites-data-provider.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/@atlaskit/atlassian-switcher/dist/esm/cross-join/providers/default-joinable-sites-provider.js"),s=Object(a.a)(),i=s.fetchMethod,c=s.ProviderComponent,l=function(e){var t=e.children,n=e.joinableSitesDataProvider,r=n&&n.ProviderComponent||c;return o.a.createElement(r,null,t)},u=function(e){e?e.fetchMethod({}):i({})}},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/types.js":function(e,t,n){"use strict";var r,o,a,s,i,c,l,u,d;n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d})),function(e){e.JIRA_PROJECT="jira-project",e.CONFLUENCE_SPACE="confluence-space"}(r||(r={})),function(e){e.JIRA_PROJECT="jiraProject",e.CONFLUENCE_SPACE="confluenceSpace"}(o||(o={})),function(e){e.MANAGE="manage",e.CAN_INVITE_USERS="invite-users",e.ADD_PRODUCTS="add-products"}(a||(a={})),function(e){e.BITBUCKET="bitbucket",e.CONFLUENCE="confluence",e.HOME="home",e.JIRA="jira",e.SITE_ADMIN="site-admin",e.TRUSTED_ADMIN="trusted-admin",e.TRELLO="trello",e.START="start"}(s||(s={})),function(e){e.disableCustomLinks="disableCustomLinks",e.enableRecentContainers="enableRecentContainers",e.disableSwitchToHeading="disableSwitchToHeading",e.xflow="xflow",e.isProductStoreInTrelloJSWFirstEnabled="isProductStoreInTrelloJSWFirstEnabled",e.isProductStoreInTrelloConfluenceFirstEnabled="isProductStoreInTrelloConfluenceFirstEnabled",e.isSlackDiscoveryEnabled="isSlackDiscoveryEnabled",e.isTrustedAdminUIDeprecationEnabled="isTrustedAdminUIDeprecationEnabled"}(i||(i={})),function(e){e.JIRA_BUSINESS="JIRA_BUSINESS",e.JIRA_WORK_MANAGEMENT="JIRA_WORK_MANAGEMENT",e.JIRA_SERVICE_DESK="JIRA_SERVICE_DESK",e.JIRA_SOFTWARE="JIRA_SOFTWARE",e.CONFLUENCE="CONFLUENCE",e.OPSGENIE="OPSGENIE",e.BITBUCKET="BITBUCKET",e.STATUSPAGE="STATUSPAGE",e.TRELLO="TRELLO",e.DRAGONFRUIT="DRAGONFRUIT",e.TEAM_CENTRAL="TEAM_CENTRAL",e.AVOCADO="AVOCADO"}(c||(c={})),function(e){e.PRODUCT="product",e.ADMIN="admin",e.TRY="try",e.JOIN="join",e.CUSTOM_LINK="customLink",e.DISCOVER_FIXED_LINKS="discover-fixed-links",e.RECENT="recent"}(l||(l={})),function(e){e.CONFLUENCE="confluence.ondemand",e.JIRA_CORE="jira-core.ondemand",e.JIRA_SOFTWARE="jira-software.ondemand",e.JIRA_SERVICE_DESK="jira-servicedesk.ondemand",e.BITBUCKET="bitbucket",e.OPSGENIE="opsgenie",e.STATUSPAGE="statuspage",e.TRELLO="trello",e.DRAGONFRUIT="dragonfruit",e.TEAM_CENTRAL="townsquare",e.AVOCADO="avocado"}(u||(u={})),function(e){e.DISCOVER_MORE="discover-more",e.GIT_TOOLS="appswitcher.git.tools",e.SLACK_INTEGRATION="slack-integration"}(d||(d={}))},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/loaders.js":function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return f}));var r=n("./node_modules/react-loadable/lib/index.js"),o=n.n(r),a=function(){return n.e(13).then(n.bind(null,"./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/atlassian-switcher.js"))},s=function(){return n.e(16).then(n.bind(null,"./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/jira-switcher.js"))},i=function(){return n.e(14).then(n.bind(null,"./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/confluence-switcher.js"))},c=function(){return n.e(15).then(n.bind(null,"./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/generic-switcher.js"))},l=o()({loader:a,loading:function(){return null}}),u=o()({loader:s,loading:function(){return null}}),d=o()({loader:i,loading:function(){return null}}),p=o()({loader:c,loading:function(){return null}}),f=o()({loader:function(){return n.e(17).then(n.bind(null,"./node_modules/@atlaskit/atlassian-switcher/dist/esm/ui/components/trello-switcher.js"))},loading:function(){return null}})},"./node_modules/@atlaskit/atlassian-switcher/dist/esm/version.json":function(e,t){e.exports={name:"@atlaskit/atlassian-switcher",version:"13.0.3",sideEffects:!1}},"./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/analytics-next/dist/esm/hocs/withAnalyticsEvents.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n.n(a),i=n("./node_modules/use-memo-one/dist/use-memo-one.esm.js"),c=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),d=n.n(u),p=n("./node_modules/@babel/runtime/helpers/createClass.js"),f=n.n(p),m=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),b=n.n(m),h=n("./node_modules/@babel/runtime/helpers/get.js"),v=n.n(h),j=n("./node_modules/@babel/runtime/helpers/inherits.js"),O=n.n(j),y=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(y),w=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),E=n.n(w),k=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),S=n.n(k),_=n("./node_modules/@babel/runtime/helpers/typeof.js"),P=n.n(_);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var o=E()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var T=function(e){O()(n,e);var t=x(n);function n(e){var r;return d()(this,n),r=t.call(this,e),S()(b()(r),"clone",(function(){return r.hasFired?null:new n({context:l()(r.context),handlers:l()(r.handlers),payload:JSON.parse(JSON.stringify(r.payload))})})),S()(b()(r),"fire",(function(e){r.hasFired||(r.handlers.forEach((function(t){return t(b()(r),e)})),r.hasFired=!0)})),r.context=e.context||[],r.handlers=e.handlers||[],r.hasFired=!1,r}return f()(n,[{key:"update",value:function(e){return this.hasFired?this:v()(E()(n.prototype),"update",this).call(this,e)}}]),n}(function(){function e(t){var n=this;d()(this,e),S()(this,"clone",(function(){return new e({payload:A({},n.payload)})})),this.payload=t.payload}return f()(e,[{key:"update",value:function(e){return"function"==typeof e&&(this.payload=e(this.payload)),"object"===P()(e)&&(this.payload=A(A({},this.payload),e)),this}}]),e}()),R=n("./node_modules/@atlaskit/analytics-next-stable-react-context/dist/esm/index.js");function I(){var e=Object(a.useContext)(R.a);return{createAnalyticsEvent:Object(i.b)((function(t){return new T({context:e.getAtlaskitAnalyticsContext(),handlers:e.getAtlaskitAnalyticsEventHandlers(),payload:t})}),[e])}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=I(),r=n.createAnalyticsEvent,o=Object(a.useMemo)((function(){return Object.keys(e).reduce((function(n,o){var a=e[o];if(!["object","function"].includes(P()(a)))return n;var s=t[o],i=function(){var e="function"==typeof a?a(r,t):r(a);if(s&&"function"==typeof s){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];s.apply(void 0,o.concat([e]))}};return i?D(D({},n),{},S()({},o,i)):n}),{})}),[e,t,r]);return{patchedEventProps:o}}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=Object(a.forwardRef)((function(n,r){var a=M(e,n).patchedEventProps,i=I().createAnalyticsEvent;return s.a.createElement(t,o()({},n,a,{createAnalyticsEvent:i,ref:r}))}));return n.displayName="WithAnalyticsEvents(".concat(t.displayName||t.name,")"),n}}},"./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));n("./node_modules/@babel/runtime/helpers/extends.js");var r=n("./node_modules/react/index.js"),o=n.n(r),a=function(e){return{open:function(t){return e(t)}}},s={GET_STARTED:"get-started",DECIDE:"decide",DISCOVER:"discover"},i={CONFLUENCE:"confluence.ondemand",JIRA_CORE:"jira-core.ondemand",JIRA_SERVICE_DESK:"jira-servicedesk.ondemand",JIRA_SOFTWARE:"jira-software.ondemand",BITBUCKET:"bitbucket.ondemand",TRELLO:"trello",OPSGENIE:"opsgenie",STATUSPAGE:"statuspage",TEAM_CENTRAL:"townsquare",AVOCADO:"avocado"},c="Could not provide requested API version",l="Provider not found",u=Object(r.createContext)((function(){return{isEnabled:!1,reason:l}})),d=function(e){var t=e.onOpen,n=e.children,s=Object(r.useMemo)((function(){return function(e){return function(t){switch(t){case 0:return{isEnabled:!0,api:a(e)};default:return{isEnabled:!1,reason:c}}}}(t)}),[t]);return o.a.createElement(u.Provider,{value:s},n)},p=function(){var e=Object(r.useContext)(u);return Object(r.useMemo)((function(){return e(0)}),[e])}},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/index.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return r.d})),n.d(t,"a",(function(){return r.c}));var r=n("./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js");n("./node_modules/@babel/runtime/regenerator/index.js"),n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),n("./node_modules/react/index.js")},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/lib/redirects-helpers/redirectsHelpers.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),s=n("./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js");!function(e){e["atlassian-switcher"]="atlassian_switcher"}(r||(r={}));var i={"atlassian-switcher":r["atlassian-switcher"]},c=function(e,t){var n="";return e&&function(e){return Boolean(i[e])}(e)&&(n+="utm_campaign=".concat(i[e],"&utm_medium=in_product_ad"),t&&(n+="&utm_source=".concat(t))),n},l=function(e,t,n,r){var o="staging"===t?"https://qa-wac.internal.atlassian.com":"https://www.atlassian.com",i=c(n,r),l="",u="",d="/software";return!function(e){return[s.c.JIRA_SOFTWARE,s.c.JIRA_SERVICE_DESK,s.c.JIRA_CORE,s.c.CONFLUENCE].includes(e)}(e)?function(e){return[s.c.OPSGENIE].includes(e)}(e)&&(d=function(e){return a()({},s.c.OPSGENIE,"/software/opsgenie/try")[e]}(e)):(d="/try/cloud/signup",u=function(e){var t,n=(t={},a()(t,s.c.JIRA_SOFTWARE,"jira-software"),a()(t,s.c.JIRA_SERVICE_DESK,"jira-service-desk"),a()(t,s.c.JIRA_CORE,"jira-core"),a()(t,s.c.CONFLUENCE,"confluence"),t);return"bundle=".concat(n[e],"&edition=free")}(e)),u&&(l+="?".concat(u)),i&&(l=l+(l?"&":"?")+i),o+d+l},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"production",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=l(e,t,n,r);window.open(o,"_blank")}},"./node_modules/@atlassiansox/cross-flow-support/dist/esm/trello.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return z.b}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),c=n.n(i),l=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),u=n.n(l),d=n("./node_modules/@atlassiansox/cross-flow-api-internals/dist/esm/index.js"),p=n("./node_modules/@atlaskit/analytics-gas-types/dist/esm/index.js"),f=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),m=n.n(f);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){return function(e,t){return t.reduce((function(t,n){return e.forEach((function(e){var r=n?n[e]:null;t.push(r||n[e])})),t}),[]).filter(Boolean)}(["source"],e)},j=function(e){return e[e.length-1]},O=function(e){var t=e.context,n=e.payload;if(!n)return null;var r=v(t),o=j(r)||p.a,a=function(e){return e.reduce((function(e,t){var n=t.attributes,r=u()(t,["attributes"]),o=h(h({},e),r);return n?h(h({},o),n):o}),{})}(t),s=j(function(e){return e.map((function(e){return{packageName:e.packageName,packageVersion:e.packageVersion}})).filter((function(e){return e.packageName}))}(t))||{},i=s.packageName,c=void 0===i?void 0:i,l=s.packageVersion,d=void 0===l?void 0:l,f=n.eventType,m=void 0===f?p.e:f,b=n.action,O=n.actionSubject,y=n.actionSubjectId,g=n.attributes,w=n.name,E=h(h({packageName:c,packageVersion:d},a),g),k=n.tags||[];switch(k.push("growth"),m){case p.e:case p.b:case p.d:return{eventType:m,source:o,actionSubject:O,action:b,actionSubjectId:y,attributes:E,tags:k.slice(0)};case p.c:return{eventType:m,name:w,attributes:E,source:o,tags:k.slice(0)}}return null},y=n("./node_modules/@atlassiansox/cross-flow-support/dist/esm/lib/redirects-helpers/redirectsHelpers.js"),g=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),w=n.n(g),E=n("./node_modules/@babel/runtime/helpers/createClass.js"),k=n.n(E),S=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),_=n.n(S),P=n("./node_modules/@babel/runtime/helpers/inherits.js"),C=n.n(P),A=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),x=n.n(A),T=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),R=n.n(T),I="crossFlowProvider",N="crossFlowSupport";function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x()(this,n)}}var M={eventType:p.b,action:"errorCaught",actionSubject:"errorBoundary"},F=[{source:I},{packageName:"@atlassiansox/cross-flow-support",packageVersion:"1.4.1"}],L=function(e){C()(n,e);var t=D(n);function n(){var e;w()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),m()(_()(e),"state",{hasError:!1}),e}return k()(n,[{key:"componentDidCatch",value:function(e){this.props.onAnalyticsEvent({payload:M,context:F}),this.props.onError&&this.props.onError(e)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(a.Component);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={version:"1.4.1"};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W,H=function(e,t){if(!t)return e;var n=G(G({},e.attributes||{}),{},{sourceComponent:t.sourceComponent,sourceContext:t.sourceContext});return G(G({},e),{},{attributes:n})},K=(W=s.a.lazy((function(){return n.e(33).then(n.bind(null,"./node_modules/@atlassiansox/cross-flow-support/dist/esm/lib/view/index.js"))})),function(e){var t=e.children,n=e.analyticsClient,r=e.originProduct,i=e.redirectToWac,l=e.env,f=e.plugins,m=void 0===f?[]:f,b=e.onError,h=u()(e,["children","analyticsClient","originProduct","redirectToWac","env","plugins","onError"]),v=Object(a.useRef)(),j=Object(a.useState)(!1),g=c()(j,2),w=g[0],E=g[1],k=Object(a.useMemo)((function(){return function(e){return function(t){return Promise.resolve(e).then((function(e){switch(t.eventType){case p.e:e.sendUIEvent(t);break;case p.d:e.sendTrackEvent(t);break;case p.b:e.sendOperationalEvent(t);break;case p.c:e.sendScreenEvent(t)}}))}}(n)}),[n]),S=Object(a.useState)(),_=c()(S,2),P=_[0],C=_[1],A=Object(a.useCallback)((function(e){var t,n,r=O(e);if(r){var o=H((n=B(B({},(t=r).attributes||{}),{},{crossFlowSupport:J}),B(B({},t),{},{attributes:n})),P);k(o)}}),[k,P]),x=Object(a.useCallback)((function(e){w||(A({payload:{eventType:p.b,action:"uiInitialized",actionSubject:N,attributes:{appName:e}},context:[{source:I}]}),E(!0))}),[w,A]),T=Object(a.useCallback)((function(e){E(!1);var t={payload:H({eventType:p.b,action:"openInvoked",actionSubject:N},e),context:[{source:I}]};return A(t),e.journey===d.b.GET_STARTED&&i?(Object(y.a)(e.targetProduct,l,e.sourceComponent,e.sourceContext),Promise.resolve({})):(C(e),new Promise((function(e){v.current=e})))}),[A,l,i]),R=Object(a.useCallback)((function(e){E(!1),C(void 0),v.current&&v.current(e)}),[]);return s.a.createElement(d.a,{onOpen:T},t,P&&s.a.createElement(L,{onAnalyticsEvent:A,onError:b},s.a.createElement(a.Suspense,{fallback:null},s.a.createElement(W,o()({},h,P,{onAnalyticsEvent:A,originProduct:r,onClose:R,onHandShake:x,plugins:m,env:l,redirectToWac:i})))))}),z=n("./node_modules/@atlassiansox/cross-flow-support/dist/esm/index.js");t.a=function(e){var t=!e.isAaMastered;return s.a.createElement(K,o()({},e,{shouldUseCFFEOverride:function(){return!0},originProduct:"trello",redirectToWac:t}))}},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/AtlassianAppSwitcher/AtlassianAppSwitcherEmptyState.less":function(e,t,n){"use strict";var r=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(r)()(!1);o.push([e.i,"._29wKMUkdMK6wsF {\n  margin: 48px auto;\n  max-width: 240px;\n  text-align: center;\n}\n._29wKMUkdMK6wsF h3 {\n  margin: 32px 0 8px;\n}\n._29wKMUkdMK6wsF p {\n  margin: 24px 0 8px;\n}\n",""]),o.locals={appSwitcherEmptyState:"_29wKMUkdMK6wsF"},t.a=o},"./node_modules/lodash/debounce.js":function(e,t,n){var r=n("./node_modules/lodash/isObject.js"),o=n("./node_modules/lodash/now.js"),a=n("./node_modules/lodash/toNumber.js"),s=Math.max,i=Math.min;e.exports=function(e,t,n){var c,l,u,d,p,f,m=0,b=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function j(t){var n=c,r=l;return c=l=void 0,m=t,d=e.apply(r,n)}function O(e){return m=e,p=setTimeout(g,t),b?j(e):d}function y(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-m>=u}function g(){var e=o();if(y(e))return w(e);p=setTimeout(g,function(e){var n=t-(e-f);return h?i(n,u-(e-m)):n}(e))}function w(e){return p=void 0,v&&c?j(e):(c=l=void 0,d)}function E(){var e=o(),n=y(e);if(c=arguments,l=this,f=e,n){if(void 0===p)return O(f);if(h)return clearTimeout(p),p=setTimeout(g,t),j(f)}return void 0===p&&(p=setTimeout(g,t)),d}return t=a(t)||0,r(n)&&(b=!!n.leading,u=(h="maxWait"in n)?s(a(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),E.cancel=function(){void 0!==p&&clearTimeout(p),m=0,c=f=l=p=void 0},E.flush=function(){return void 0===p?d:w(o())},E}},"./node_modules/lodash/isSymbol.js":function(e,t,n){var r=n("./node_modules/lodash/_baseGetTag.js"),o=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},"./node_modules/lodash/now.js":function(e,t,n){var r=n("./node_modules/lodash/_root.js");e.exports=function(){return r.Date.now()}},"./node_modules/lodash/throttle.js":function(e,t,n){var r=n("./node_modules/lodash/debounce.js"),o=n("./node_modules/lodash/isObject.js");e.exports=function(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:a,maxWait:t,trailing:s})}},"./node_modules/lodash/toNumber.js":function(e,t,n){var r=n("./node_modules/lodash/isObject.js"),o=n("./node_modules/lodash/isSymbol.js"),a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=i.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},"./resources/images/empty-states/app-switcher.svg":function(e,t,n){e.exports=n.p+"images/empty-states/app-switcher.f42f3fec3507adf2897c.svg"}},0,[33]]);
//# sourceMappingURL=atlassian-app-switcher-button.f6231c20f8b59917cc35.js.map